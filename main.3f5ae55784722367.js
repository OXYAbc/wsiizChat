"use strict";(self.webpackChunkwsiizChat=self.webpackChunkwsiizChat||[]).push([[179],{2011:(dt,Se,F)=>{F.d(Se,{Dh:()=>fe,GT:()=>ye,cc:()=>Pe,hO:()=>$e,on:()=>z,pX:()=>le,xv:()=>_e});var h=F(4650),j=F(127),P=F(5813);dt=F.hmd(dt);const oe=["ngOnDestroy"],le=(ge,tt,Xe,Ne={})=>new Proxy(ge,{get:(ke,Ce)=>Xe.runOutsideAngular(()=>{var We;if(ge[Ce])return!(null===(We=Ne?.spy)||void 0===We)&&We.get&&Ne.spy.get(Ce,ge[Ce]),ge[Ce];if(oe.indexOf(Ce)>-1)return()=>{};const se=tt.toPromise().then(he=>{const ve=he&&he[Ce];return"function"==typeof ve?ve.bind(he):ve&&ve.then?ve.then(X=>Xe.run(()=>X)):Xe.run(()=>ve)});return new Proxy(()=>{},{get:(he,ve)=>se[ve],apply:(he,ve,X)=>se.then(ee=>{var pe;const ae=ee&&ee(...X);return!(null===(pe=Ne?.spy)||void 0===pe)&&pe.apply&&Ne.spy.apply(Ce,X,ae),ae})})})}),ye=(ge,tt)=>{tt.forEach(Xe=>{Object.getOwnPropertyNames(Xe.prototype||Xe).forEach(Ne=>{Object.defineProperty(ge.prototype,Ne,Object.getOwnPropertyDescriptor(Xe.prototype||Xe,Ne))})})};class ue{constructor(tt){return tt}}const fe=new h.OlP("angularfire2.app.options"),_e=new h.OlP("angularfire2.app.name");function z(ge,tt,Xe){const ke="object"==typeof Xe&&Xe||{};ke.name=ke.name||"string"==typeof Xe&&Xe||"[DEFAULT]";const We=j.Z.apps.filter(se=>se&&se.name===ke.name)[0]||tt.runOutsideAngular(()=>j.Z.initializeApp(ge,ke));try{JSON.stringify(ge)!==JSON.stringify(We.options)&&G("error",`${We.name} Firebase App already initialized with different options${dt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ue(We)}const G=(ge,...tt)=>{(0,h.X6Q)()&&typeof console<"u"&&console[ge](...tt)},J={provide:ue,useFactory:z,deps:[fe,h.R0b,[new h.FiY,_e]]};let $e=(()=>{class ge{constructor(Xe){j.Z.registerVersion("angularfire",P.q4.full,"core"),j.Z.registerVersion("angularfire",P.q4.full,"app-compat"),j.Z.registerVersion("angular",h.q4F.full,Xe.toString())}static initializeApp(Xe,Ne){return{ngModule:ge,providers:[{provide:fe,useValue:Xe},{provide:_e,useValue:Ne}]}}}return ge.\u0275fac=function(Xe){return new(Xe||ge)(h.LFG(h.Lbi))},ge.\u0275mod=h.oAB({type:ge}),ge.\u0275inj=h.cJS({providers:[J]}),ge})();function Pe(ge,tt,Xe,Ne,ke){const[,Ce,We]=globalThis.\u0275AngularfireInstanceCache.find(se=>se[0]===ge)||[];if(Ce)return function Ie(ge,tt){try{return ge.toString()===tt.toString()}catch{return ge===tt}}(ke,We)||(we("error",`${tt} was already initialized on the ${Xe} Firebase App with different settings.${st?" You may need to reload as Firebase is not HMR aware.":""}`),we("warn",{is:ke,was:We})),Ce;{const se=Ne();return globalThis.\u0275AngularfireInstanceCache.push([ge,se,ke]),se}}const st=!!dt.hot,we=(ge,...tt)=>{(0,h.X6Q)()&&typeof console<"u"&&console[ge](...tt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(dt,Se,F)=>{F.d(Se,{q4:()=>fl,iC:()=>_c,HU:()=>Us,vb:()=>lu,JM:()=>uu,u3:()=>ml});var h=F(4650),j=F(5867),P=F(5861),oe=F(9681),le=F(2090),ye=F(4859),ue=F(1877),fe=F(8766);const _e="@firebase/installations",z="0.5.14",J=`w:${z}`,$e="FIS_v2",tt=new le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Xe(I){return I instanceof le.ZR&&I.code.includes("request-failed")}function Ne({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function ke(I){return{token:I.token,requestStatus:2,expiresIn:ee(I.expiresIn),creationTime:Date.now()}}function Ce(I,D){return We.apply(this,arguments)}function We(){return(We=(0,P.Z)(function*(I,D){const B=(yield D.json()).error;return tt.create("request-failed",{requestName:I,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function se({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function he(I,{refreshToken:D}){const R=se(I);return R.append("Authorization",function pe(I){return`${$e} ${I}`}(D)),R}function ve(I){return X.apply(this,arguments)}function X(){return(X=(0,P.Z)(function*(I){const D=yield I();return D.status>=500&&D.status<600?I():D})).apply(this,arguments)}function ee(I){return Number(I.replace("s","000"))}function ae(I,D){return Be.apply(this,arguments)}function Be(){return(Be=(0,P.Z)(function*({appConfig:I,heartbeatServiceProvider:D},{fid:R}){const B=Ne(I),Q=se(I),de=D.getImmediate({optional:!0});if(de){const Mt=yield de.getHeartbeatsHeader();Mt&&Q.append("x-firebase-client",Mt)}const qe={method:"POST",headers:Q,body:JSON.stringify({fid:R,authVersion:$e,appId:I.appId,sdkVersion:J})},_t=yield ve(()=>fetch(B,qe));if(_t.ok){const Mt=yield _t.json();return{fid:Mt.fid||R,registrationStatus:2,refreshToken:Mt.refreshToken,authToken:ke(Mt.authToken)}}throw yield Ce("Create Installation",_t)})).apply(this,arguments)}function je(I){return new Promise(D=>{setTimeout(D,I)})}const tn=/^[cdef][\w-]{21}$/;function Ze(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const R=function un(I){return function vt(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return tn.test(R)?R:""}catch{return""}}function wn(I){return`${I.appName}!${I.appId}`}const Jt=new Map;function en(I,D){const R=wn(I);_r(R,D),function bi(I,D){const R=function kn(){return!Tr&&"BroadcastChannel"in self&&(Tr=new BroadcastChannel("[Firebase] FID Change"),Tr.onmessage=I=>{_r(I.data.key,I.data.fid)}),Tr}();R&&R.postMessage({key:I,fid:D}),function Fi(){0===Jt.size&&Tr&&(Tr.close(),Tr=null)}()}(R,D)}function _r(I,D){const R=Jt.get(I);if(R)for(const B of R)B(D)}let Tr=null;const Un="firebase-installations-store";let mi=null;function Vi(){return mi||(mi=(0,fe.X3)("firebase-installations-database",1,{upgrade:(I,D)=>{0===D&&I.createObjectStore(Un)}})),mi}function Je(I,D){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,P.Z)(function*(I,D){const R=wn(I),Q=(yield Vi()).transaction(Un,"readwrite"),de=Q.objectStore(Un),xe=yield de.get(R);return yield de.put(D,R),yield Q.done,(!xe||xe.fid!==D.fid)&&en(I,D.fid),D})).apply(this,arguments)}function jn(I){return yn.apply(this,arguments)}function yn(){return(yn=(0,P.Z)(function*(I){const D=wn(I),B=(yield Vi()).transaction(Un,"readwrite");yield B.objectStore(Un).delete(D),yield B.done})).apply(this,arguments)}function fr(I,D){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,P.Z)(function*(I,D){const R=wn(I),Q=(yield Vi()).transaction(Un,"readwrite"),de=Q.objectStore(Un),xe=yield de.get(R),qe=D(xe);return void 0===qe?yield de.delete(R):yield de.put(qe,R),yield Q.done,qe&&(!xe||xe.fid!==qe.fid)&&en(I,qe.fid),qe})).apply(this,arguments)}function En(I){return bn.apply(this,arguments)}function bn(){return(bn=(0,P.Z)(function*(I){let D;const R=yield fr(I.appConfig,B=>{const Q=pn(B),de=mt(I,Q);return D=de.registrationPromise,de.installationEntry});return""===R.fid?{installationEntry:yield D}:{installationEntry:R,registrationPromise:D}})).apply(this,arguments)}function pn(I){return Dt(I||{fid:Ze(),registrationStatus:0})}function mt(I,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(tt.create("app-offline"))};const R={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},B=function yt(I,D){return Tt.apply(this,arguments)}(I,R);return{installationEntry:R,registrationPromise:B}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Vr(I)}:{installationEntry:D}}function Tt(){return(Tt=(0,P.Z)(function*(I,D){try{const R=yield ae(I,D);return Je(I.appConfig,R)}catch(R){throw Xe(R)&&409===R.customData.serverCode?yield jn(I.appConfig):yield Je(I.appConfig,{fid:D.fid,registrationStatus:0}),R}})).apply(this,arguments)}function Vr(I){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,P.Z)(function*(I){let D=yield vr(I.appConfig);for(;1===D.registrationStatus;)yield je(100),D=yield vr(I.appConfig);if(0===D.registrationStatus){const{installationEntry:R,registrationPromise:B}=yield En(I);return B||R}return D})).apply(this,arguments)}function vr(I){return fr(I,D=>{if(!D)throw tt.create("installation-not-found");return Dt(D)})}function Dt(I){return function xr(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Ft(I,D){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,P.Z)(function*({appConfig:I,heartbeatServiceProvider:D},R){const B=Zt(I,R),Q=he(I,R),de=D.getImmediate({optional:!0});if(de){const Mt=yield de.getHeartbeatsHeader();Mt&&Q.append("x-firebase-client",Mt)}const qe={method:"POST",headers:Q,body:JSON.stringify({installation:{sdkVersion:J,appId:I.appId}})},_t=yield ve(()=>fetch(B,qe));if(_t.ok)return ke(yield _t.json());throw yield Ce("Generate Auth Token",_t)})).apply(this,arguments)}function Zt(I,{fid:D}){return`${Ne(I)}/${D}/authTokens:generate`}function sr(I){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,P.Z)(function*(I,D=!1){let R;const B=yield fr(I.appConfig,de=>{if(!Yt(de))throw tt.create("not-registered");const xe=de.authToken;if(!D&&W(xe))return de;if(1===xe.requestStatus)return R=nt(I,D),de;{if(!navigator.onLine)throw tt.create("app-offline");const qe=Y(de);return R=bt(I,qe),qe}});return R?yield R:B.authToken})).apply(this,arguments)}function nt(I,D){return De.apply(this,arguments)}function De(){return(De=(0,P.Z)(function*(I,D){let R=yield rt(I.appConfig);for(;1===R.authToken.requestStatus;)yield je(100),R=yield rt(I.appConfig);const B=R.authToken;return 0===B.requestStatus?sr(I,D):B})).apply(this,arguments)}function rt(I){return fr(I,D=>{if(!Yt(D))throw tt.create("not-registered");return function U(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function bt(I,D){return It.apply(this,arguments)}function It(){return(It=(0,P.Z)(function*(I,D){try{const R=yield Ft(I,D),B=Object.assign(Object.assign({},D),{authToken:R});return yield Je(I.appConfig,B),R}catch(R){if(!Xe(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const B=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Je(I.appConfig,B)}else yield jn(I.appConfig);throw R}})).apply(this,arguments)}function Yt(I){return void 0!==I&&2===I.registrationStatus}function W(I){return 2===I.requestStatus&&!function $(I){const D=Date.now();return D<I.creationTime||I.creationTime+I.expiresIn<D+36e5}(I)}function Y(I){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:D})}function V(){return(V=(0,P.Z)(function*(I){const D=I,{installationEntry:R,registrationPromise:B}=yield En(D);return B?B.catch(console.error):sr(D).catch(console.error),R.fid})).apply(this,arguments)}function Fe(){return(Fe=(0,P.Z)(function*(I,D=!1){const R=I;return yield at(R),(yield sr(R,D)).token})).apply(this,arguments)}function at(I){return ut.apply(this,arguments)}function ut(){return(ut=(0,P.Z)(function*(I){const{registrationPromise:D}=yield En(I);D&&(yield D)})).apply(this,arguments)}function Is(I){return tt.create("missing-app-config-values",{valueName:I})}const Js="installations",Ds=I=>{const D=I.getProvider("app").getImmediate(),R=function Cn(I){if(!I||!I.options)throw Is("App Configuration");if(!I.name)throw Is("App Name");const D=["projectId","apiKey","appId"];for(const R of D)if(!I.options[R])throw Is(R);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(D);return{app:D,appConfig:R,heartbeatServiceProvider:(0,oe._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Ss=I=>{const D=I.getProvider("app").getImmediate(),R=(0,oe._getProvider)(D,Js).getImmediate();return{getId:()=>function O(I){return V.apply(this,arguments)}(R),getToken:Q=>function re(I){return Fe.apply(this,arguments)}(R,Q)}};(function Ha(){(0,oe._registerComponent)(new ye.wA(Js,Ds,"PUBLIC")),(0,oe._registerComponent)(new ye.wA("installations-internal",Ss,"PRIVATE"))})(),(0,oe.registerVersion)(_e,z),(0,oe.registerVersion)(_e,z,"esm2017");const Ui="@firebase/remote-config",Hn=new le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Zu{constructor(D,R,B,Q){this.client=D,this.storage=R,this.storageCache=B,this.logger=Q}isCachedDataFresh(D,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-R,Q=B<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Q}.`),Q}fetch(D){var R=this;return(0,P.Z)(function*(){const[B,Q]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(Q&&R.isCachedDataFresh(D.cacheMaxAgeMillis,B))return Q;D.eTag=Q&&Q.eTag;const de=yield R.client.fetch(D),xe=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===de.status&&xe.push(R.storage.setLastSuccessfulFetchResponse(de)),yield Promise.all(xe),de})()}}function Ko(I=navigator){return I.languages&&I.languages[0]||I.language}class Ms{constructor(D,R,B,Q,de,xe){this.firebaseInstallations=D,this.sdkVersion=R,this.namespace=B,this.projectId=Q,this.apiKey=de,this.appId=xe}fetch(D){var R=this;return(0,P.Z)(function*(){var B,Q,de;const[xe,qe]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Mt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,ht={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},Qe={sdk_version:R.sdkVersion,app_instance_id:xe,app_instance_id_token:qe,app_id:R.appId,language_code:Ko()},Gn={method:"POST",headers:ht,body:JSON.stringify(Qe)},br=fetch(Mt,Gn),wa=new Promise(($s,Gr)=>{D.signal.addEventListener(()=>{const vc=new Error("The operation was aborted.");vc.name="AbortError",Gr(vc)})});let Ea;try{yield Promise.race([br,wa]),Ea=yield br}catch($s){let Gr="fetch-client-network";throw"AbortError"===(null===(B=$s)||void 0===B?void 0:B.name)&&(Gr="fetch-timeout"),Hn.create(Gr,{originalErrorMessage:null===(Q=$s)||void 0===Q?void 0:Q.message})}let Hr=Ea.status;const Wn=Ea.headers.get("ETag")||void 0;let ba,zr;if(200===Ea.status){let $s;try{$s=yield Ea.json()}catch(Gr){throw Hn.create("fetch-client-parse",{originalErrorMessage:null===(de=Gr)||void 0===de?void 0:de.message})}ba=$s.entries,zr=$s.state}if("INSTANCE_STATE_UNSPECIFIED"===zr?Hr=500:"NO_CHANGE"===zr?Hr=304:("NO_TEMPLATE"===zr||"EMPTY_CONFIG"===zr)&&(ba={}),304!==Hr&&200!==Hr)throw Hn.create("fetch-status",{httpStatus:Hr});return{status:Hr,eTag:Wn,config:ba}})()}}class $i{constructor(D,R){this.client=D,this.storage=R}fetch(D){var R=this;return(0,P.Z)(function*(){const B=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(D,B)})()}attemptFetch(D,{throttleEndTimeMillis:R,backoffCount:B}){var Q=this;return(0,P.Z)(function*(){yield function ni(I,D){return new Promise((R,B)=>{const Q=Math.max(D-Date.now(),0),de=setTimeout(R,Q);I.addEventListener(()=>{clearTimeout(de),B(Hn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,R);try{const de=yield Q.client.fetch(D);return yield Q.storage.deleteThrottleMetadata(),de}catch(de){if(!function Yf(I){if(!(I instanceof le.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}(de))throw de;const xe={throttleEndTimeMillis:Date.now()+(0,le.$s)(B),backoffCount:B+1};return yield Q.storage.setThrottleMetadata(xe),Q.attemptFetch(D,xe)}})()}}class Xf{constructor(D,R,B,Q,de){this.app=D,this._client=R,this._storageCache=B,this._storage=Q,this._logger=de,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Yo(I,D){var R;const B=I.target.error||void 0;return Hn.create(D,{originalErrorMessage:B&&(null===(R=B)||void 0===R?void 0:R.message)})}const to="app_namespace_store";class Kl{constructor(D,R,B,Q=function ep(){return new Promise((I,D)=>{var R;try{const B=indexedDB.open("firebase_remote_config",1);B.onerror=Q=>{D(Yo(Q,"storage-open"))},B.onsuccess=Q=>{I(Q.target.result)},B.onupgradeneeded=Q=>{0===Q.oldVersion&&Q.target.result.createObjectStore(to,{keyPath:"compositeKey"})}}catch(B){D(Hn.create("storage-open",{originalErrorMessage:null===(R=B)||void 0===R?void 0:R.message}))}})}()){this.appId=D,this.appName=R,this.namespace=B,this.openDbPromise=Q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var R=this;return(0,P.Z)(function*(){const B=yield R.openDbPromise;return new Promise((Q,de)=>{var xe;const _t=B.transaction([to],"readonly").objectStore(to),Mt=R.createCompositeKey(D);try{const ht=_t.get(Mt);ht.onerror=Qe=>{de(Yo(Qe,"storage-get"))},ht.onsuccess=Qe=>{const Gn=Qe.target.result;Q(Gn?Gn.value:void 0)}}catch(ht){de(Hn.create("storage-get",{originalErrorMessage:null===(xe=ht)||void 0===xe?void 0:xe.message}))}})})()}set(D,R){var B=this;return(0,P.Z)(function*(){const Q=yield B.openDbPromise;return new Promise((de,xe)=>{var qe;const Mt=Q.transaction([to],"readwrite").objectStore(to),ht=B.createCompositeKey(D);try{const Qe=Mt.put({compositeKey:ht,value:R});Qe.onerror=Gn=>{xe(Yo(Gn,"storage-set"))},Qe.onsuccess=()=>{de()}}catch(Qe){xe(Hn.create("storage-set",{originalErrorMessage:null===(qe=Qe)||void 0===qe?void 0:qe.message}))}})})()}delete(D){var R=this;return(0,P.Z)(function*(){const B=yield R.openDbPromise;return new Promise((Q,de)=>{var xe;const _t=B.transaction([to],"readwrite").objectStore(to),Mt=R.createCompositeKey(D);try{const ht=_t.delete(Mt);ht.onerror=Qe=>{de(Yo(Qe,"storage-delete"))},ht.onsuccess=()=>{Q()}}catch(ht){de(Hn.create("storage-delete",{originalErrorMessage:null===(xe=ht)||void 0===xe?void 0:xe.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class no{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,P.Z)(function*(){const R=D.storage.getLastFetchStatus(),B=D.storage.getLastSuccessfulFetchTimestampMillis(),Q=D.storage.getActiveConfig(),de=yield R;de&&(D.lastFetchStatus=de);const xe=yield B;xe&&(D.lastSuccessfulFetchTimestampMillis=xe);const qe=yield Q;qe&&(D.activeConfig=qe)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Fm(){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,P.Z)(function*(){if(!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}!function Yl(){(0,oe._registerComponent)(new ye.wA("remote-config",function I(D,{instanceIdentifier:R}){const B=D.getProvider("app").getImmediate(),Q=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Hn.create("registration-window");if(!(0,le.hl)())throw Hn.create("indexed-db-unavailable");const{projectId:de,apiKey:xe,appId:qe}=B.options;if(!de)throw Hn.create("registration-project-id");if(!xe)throw Hn.create("registration-api-key");if(!qe)throw Hn.create("registration-app-id");const _t=new Kl(qe,B.name,R=R||"firebase"),Mt=new no(_t),ht=new ue.Yd(Ui);ht.logLevel=ue.in.ERROR;const Qe=new Ms(Q,oe.SDK_VERSION,R,de,xe,qe),Gn=new $i(Qe,_t),br=new Zu(Gn,_t,Mt,ht),wa=new Xf(B,br,Mt,_t,ht);return function zn(I){const D=(0,le.m9)(I);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(wa),wa},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(Ui,"0.3.13"),(0,oe.registerVersion)(Ui,"0.3.13","esm2017")}();const gr="/firebase-messaging-sw.js",io="/firebase-cloud-messaging-push-scope",ss="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Wa="google.c.a.c_id",Ku="google.c.a.c_l",Jl="google.c.a.ts",so="google.c.a.e";var ri=(()=>{return(I=ri||(ri={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",ri;var I})();function Hi(I){const D=new Uint8Array(I);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function jr(I){const R=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(R),Q=new Uint8Array(B.length);for(let de=0;de<B.length;++de)Q[de]=B.charCodeAt(de);return Q}const Rs="fcm_token_details_db",oo="fcm_token_object_Store";function tp(I){return Yu.apply(this,arguments)}function Yu(){return Yu=(0,P.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(de=>de.name).includes(Rs))return null;let D=null;return(yield(0,fe.X3)(Rs,5,{upgrade:(B=(0,P.Z)(function*(Q,de,xe,qe){var _t;if(de<2||!Q.objectStoreNames.contains(oo))return;const Mt=qe.objectStore(oo),ht=yield Mt.index("fcmSenderId").get(I);if(yield Mt.clear(),ht)if(2===de){const Qe=ht;if(!Qe.auth||!Qe.p256dh||!Qe.endpoint)return;D={token:Qe.fcmToken,createTime:null!==(_t=Qe.createTime)&&void 0!==_t?_t:Date.now(),subscriptionOptions:{auth:Qe.auth,p256dh:Qe.p256dh,endpoint:Qe.endpoint,swScope:Qe.swScope,vapidKey:"string"==typeof Qe.vapidKey?Qe.vapidKey:Hi(Qe.vapidKey)}}}else if(3===de){const Qe=ht;D={token:Qe.fcmToken,createTime:Qe.createTime,subscriptionOptions:{auth:Hi(Qe.auth),p256dh:Hi(Qe.p256dh),endpoint:Qe.endpoint,swScope:Qe.swScope,vapidKey:Hi(Qe.vapidKey)}}}else if(4===de){const Qe=ht;D={token:Qe.fcmToken,createTime:Qe.createTime,subscriptionOptions:{auth:Hi(Qe.auth),p256dh:Hi(Qe.p256dh),endpoint:Qe.endpoint,swScope:Qe.swScope,vapidKey:Hi(Qe.vapidKey)}}}}),function(de,xe,qe,_t){return B.apply(this,arguments)})})).close(),yield(0,fe.Lj)(Rs),yield(0,fe.Lj)("fcm_vapid_details_db"),yield(0,fe.Lj)("undefined"),Pn(D)?D:null;var B}),Yu.apply(this,arguments)}function Pn(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:D}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const yi="firebase-messaging-store";let mr=null;function qa(){return mr||(mr=(0,fe.X3)("firebase-messaging-database",1,{upgrade:(I,D)=>{0===D&&I.createObjectStore(yi)}})),mr}function Os(I){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,P.Z)(function*(I){const D=si(I),B=yield(yield qa()).transaction(yi).objectStore(yi).get(D);if(B)return B;{const Q=yield tp(I.appConfig.senderId);if(Q)return yield nn(I,Q),Q}})).apply(this,arguments)}function nn(I,D){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,P.Z)(function*(I,D){const R=si(I),Q=(yield qa()).transaction(yi,"readwrite");return yield Q.objectStore(yi).put(D,R),yield Q.done,D})).apply(this,arguments)}function os(I){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,P.Z)(function*(I){const D=si(I),B=(yield qa()).transaction(yi,"readwrite");yield B.objectStore(yi).delete(D),yield B.done})).apply(this,arguments)}function si({appConfig:I}){return I.appId}const Ln=new le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ot(I,D){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,P.Z)(function*(I,D){var R;const B=yield ta(I),Q=Re(D),de={method:"POST",headers:B,body:JSON.stringify(Q)};let xe;try{xe=yield(yield fetch(ks(I.appConfig),de)).json()}catch(qe){throw Ln.create("token-subscribe-failed",{errorInfo:null===(R=qe)||void 0===R?void 0:R.toString()})}if(xe.error)throw Ln.create("token-subscribe-failed",{errorInfo:xe.error.message});if(!xe.token)throw Ln.create("token-subscribe-no-token");return xe.token})).apply(this,arguments)}function np(I,D){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,P.Z)(function*(I,D){var R;const B=yield ta(I),Q=Re(D.subscriptionOptions),de={method:"PATCH",headers:B,body:JSON.stringify(Q)};let xe;try{xe=yield(yield fetch(`${ks(I.appConfig)}/${D.token}`,de)).json()}catch(qe){throw Ln.create("token-update-failed",{errorInfo:null===(R=qe)||void 0===R?void 0:R.toString()})}if(xe.error)throw Ln.create("token-update-failed",{errorInfo:xe.error.message});if(!xe.token)throw Ln.create("token-update-no-token");return xe.token})).apply(this,arguments)}function nc(I,D){return ea.apply(this,arguments)}function ea(){return(ea=(0,P.Z)(function*(I,D){var R;const Q={method:"DELETE",headers:yield ta(I)};try{const xe=yield(yield fetch(`${ks(I.appConfig)}/${D}`,Q)).json();if(xe.error)throw Ln.create("token-unsubscribe-failed",{errorInfo:xe.error.message})}catch(de){throw Ln.create("token-unsubscribe-failed",{errorInfo:null===(R=de)||void 0===R?void 0:R.toString()})}})).apply(this,arguments)}function ks({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function ta(I){return ao.apply(this,arguments)}function ao(){return(ao=(0,P.Z)(function*({appConfig:I,installations:D}){const R=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Re({p256dh:I,auth:D,endpoint:R,vapidKey:B}){const Q={web:{endpoint:R,auth:D,p256dh:I}};return B!==ss&&(Q.web.applicationPubKey=B),Q}const Wt=6048e5;function rp(I){return na.apply(this,arguments)}function na(){return(na=(0,P.Z)(function*(I){const D=yield zd(I.swRegistration,I.vapidKey),R={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:D.endpoint,auth:Hi(D.getKey("auth")),p256dh:Hi(D.getKey("p256dh"))},B=yield Os(I.firebaseDependencies);if(B){if(ip(B.subscriptionOptions,R))return Date.now()>=B.createTime+Wt?Za(I,{token:B.token,createTime:Date.now(),subscriptionOptions:R}):B.token;try{yield nc(I.firebaseDependencies,B.token)}catch(Q){console.warn(Q)}return Ka(I.firebaseDependencies,R)}return Ka(I.firebaseDependencies,R)})).apply(this,arguments)}function Xn(I){return uo.apply(this,arguments)}function uo(){return(uo=(0,P.Z)(function*(I){const D=yield Os(I.firebaseDependencies);D&&(yield nc(I.firebaseDependencies,D.token),yield os(I.firebaseDependencies));const R=yield I.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function Za(I,D){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,P.Z)(function*(I,D){try{const R=yield np(I.firebaseDependencies,D),B=Object.assign(Object.assign({},D),{token:R,createTime:Date.now()});return yield nn(I.firebaseDependencies,B),R}catch(R){throw yield Xn(I),R}})).apply(this,arguments)}function Ka(I,D){return lo.apply(this,arguments)}function lo(){return(lo=(0,P.Z)(function*(I,D){const B={token:yield Ot(I,D),createTime:Date.now(),subscriptionOptions:D};return yield nn(I,B),B.token})).apply(this,arguments)}function zd(I,D){return ra.apply(this,arguments)}function ra(){return(ra=(0,P.Z)(function*(I,D){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:jr(D)})})).apply(this,arguments)}function ip(I,D){return D.vapidKey===I.vapidKey&&D.endpoint===I.endpoint&&D.auth===I.auth&&D.p256dh===I.p256dh}function Ps(I){const D={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Jn(I,D){if(!D.notification)return;I.notification={};const R=D.notification.title;R&&(I.notification.title=R);const B=D.notification.body;B&&(I.notification.body=B);const Q=D.notification.image;Q&&(I.notification.image=Q)}(D,I),function Ii(I,D){!D.data||(I.data=D.data)}(D,I),function ia(I,D){var R,B,Q,de,xe;if(!(D.fcmOptions||null!==(R=D.notification)&&void 0!==R&&R.click_action))return;I.fcmOptions={};const qe=null!==(Q=null===(B=D.fcmOptions)||void 0===B?void 0:B.link)&&void 0!==Q?Q:null===(de=D.notification)||void 0===de?void 0:de.click_action;qe&&(I.fcmOptions.link=qe);const _t=null===(xe=D.fcmOptions)||void 0===xe?void 0:xe.analytics_label;_t&&(I.fcmOptions.analyticsLabel=_t)}(D,I),D}function sa(I){return"object"==typeof I&&!!I&&Wa in I}function zi(I,D){const R=[];for(let B=0;B<I.length;B++)R.push(I.charAt(B)),B<D.length&&R.push(D.charAt(B));return R.join("")}function Ju(I){return Ln.create("missing-app-config-values",{valueName:I})}zi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),zi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ic{constructor(D,R,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Q=function rc(I){if(!I||!I.options)throw Ju("App Configuration Object");if(!I.name)throw Ju("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:R}=I;for(const B of D)if(!R[B])throw Ju(B);return{appName:I.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Q,installations:R,analyticsProvider:B}}_delete(){return Promise.resolve()}}function Gd(I){return co.apply(this,arguments)}function co(){return(co=(0,P.Z)(function*(I){var D;try{I.swRegistration=yield navigator.serviceWorker.register(gr,{scope:io}),I.swRegistration.update().catch(()=>{})}catch(R){throw Ln.create("failed-service-worker-registration",{browserErrorMessage:null===(D=R)||void 0===D?void 0:D.message})}})).apply(this,arguments)}function el(I,D){return oa.apply(this,arguments)}function oa(){return(oa=(0,P.Z)(function*(I,D){if(!D&&!I.swRegistration&&(yield Gd(I)),D||!I.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Ln.create("invalid-sw-registration");I.swRegistration=D}})).apply(this,arguments)}function tl(I,D){return aa.apply(this,arguments)}function aa(){return(aa=(0,P.Z)(function*(I,D){D?I.vapidKey=D:I.vapidKey||(I.vapidKey=ss)})).apply(this,arguments)}function ho(){return(ho=(0,P.Z)(function*(I,D){if(!navigator)throw Ln.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Ln.create("permission-blocked");return yield tl(I,D?.vapidKey),yield el(I,D?.serviceWorkerRegistration),rp(I)})).apply(this,arguments)}function Wd(I,D,R){return ua.apply(this,arguments)}function ua(){return(ua=(0,P.Z)(function*(I,D,R){const B=qd(D);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:R[Wa],message_name:R[Ku],message_time:R[Jl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function qd(I){switch(I){case ri.NOTIFICATION_CLICKED:return"notification_open";case ri.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function as(){return(as=(0,P.Z)(function*(I,D){const R=D.data;if(!R.isFirebaseMessaging)return;I.onMessageHandler&&R.messageType===ri.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Ps(R)):I.onMessageHandler.next(Ps(R)));const B=R.data;sa(B)&&"1"===B[so]&&(yield Wd(I,R.messageType,B))})).apply(this,arguments)}const us="@firebase/messaging",Mn=I=>{const D=new ic(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function oc(I,D){return as.apply(this,arguments)}(D,R)),D},Gi=I=>{const D=I.getProvider("messaging").getImmediate();return{getToken:B=>function sc(I,D){return ho.apply(this,arguments)}(D,B)}};function uc(){return nl.apply(this,arguments)}function nl(){return(nl=(0,P.Z)(function*(){try{yield(0,le.eu)()}catch{return!1}return typeof window<"u"&&(0,le.hl)()&&(0,le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Rn(){(0,oe._registerComponent)(new ye.wA("messaging",Mn,"PUBLIC")),(0,oe._registerComponent)(new ye.wA("messaging-internal",Gi,"PRIVATE")),(0,oe.registerVersion)(us,"0.9.18"),(0,oe.registerVersion)(us,"0.9.18","esm2017")}();const go="analytics",cc="firebase_id",ol="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",dc="https://www.googletagmanager.com/gtag/js",Vn=new ue.Yd("@firebase/analytics");function Qa(I){return Promise.all(I.map(D=>D.catch(R=>R)))}function Xa(I,D){const R=document.createElement("script");R.src=`${dc}?l=${I}&id=${D}`,R.async=!0,document.head.appendChild(R)}function Kd(I,D,R,B,Q,de){return eu.apply(this,arguments)}function eu(){return(eu=(0,P.Z)(function*(I,D,R,B,Q,de){const xe=B[Q];try{if(xe)yield D[xe];else{const _t=(yield Qa(R)).find(Mt=>Mt.measurementId===Q);_t&&(yield D[_t.appId])}}catch(qe){Vn.error(qe)}I("config",Q,de)})).apply(this,arguments)}function Wi(I,D,R,B,Q){return la.apply(this,arguments)}function la(){return(la=(0,P.Z)(function*(I,D,R,B,Q){try{let de=[];if(Q&&Q.send_to){let xe=Q.send_to;Array.isArray(xe)||(xe=[xe]);const qe=yield Qa(R);for(const _t of xe){const Mt=qe.find(Qe=>Qe.measurementId===_t),ht=Mt&&D[Mt.appId];if(!ht){de=[];break}de.push(ht)}}0===de.length&&(de=Object.values(D)),yield Promise.all(de),I("event",B,Q||{})}catch(de){Vn.error(de)}})).apply(this,arguments)}function hc(I){const D=window.document.getElementsByTagName("script");for(const R of Object.values(D))if(R.src&&R.src.includes(dc)&&R.src.includes(I))return R;return null}const er=new le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),da=new class ul{constructor(D={},R=1e3){this.throttleMetadata=D,this.intervalMillis=R}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,R){this.throttleMetadata[D]=R}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function mo(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Xd(I){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,P.Z)(function*(I){var D;const{appId:R,apiKey:B}=I,Q={method:"GET",headers:mo(B)},de=ol.replace("{app-id}",R),xe=yield fetch(de,Q);if(200!==xe.status&&304!==xe.status){let qe="";try{const _t=yield xe.json();null!==(D=_t.error)&&void 0!==D&&D.message&&(qe=_t.error.message)}catch{}throw er.create("config-fetch-failed",{httpStatus:xe.status,responseMessage:qe})}return xe.json()})).apply(this,arguments)}function fc(I){return $r.apply(this,arguments)}function $r(){return($r=(0,P.Z)(function*(I,D=da,R){const{appId:B,apiKey:Q,measurementId:de}=I.options;if(!B)throw er.create("no-app-id");if(!Q){if(de)return{measurementId:de,appId:B};throw er.create("no-api-key")}const xe=D.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},qe=new ha;return setTimeout((0,P.Z)(function*(){qe.abort()}),void 0!==R?R:6e4),pc({appId:B,apiKey:Q,measurementId:de},xe,qe,D)})).apply(this,arguments)}function pc(I,D,R){return qi.apply(this,arguments)}function qi(){return(qi=(0,P.Z)(function*(I,{throttleEndTimeMillis:D,backoffCount:R},B,Q=da){var de,xe;const{appId:qe,measurementId:_t}=I;try{yield ll(B,D)}catch(Mt){if(_t)return Vn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${_t} provided in the "measurementId" field in the local Firebase config. [${null===(de=Mt)||void 0===de?void 0:de.message}]`),{appId:qe,measurementId:_t};throw Mt}try{const Mt=yield Xd(I);return Q.deleteThrottleMetadata(qe),Mt}catch(Mt){const ht=Mt;if(!tu(ht)){if(Q.deleteThrottleMetadata(qe),_t)return Vn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${_t} provided in the "measurementId" field in the local Firebase config. [${ht?.message}]`),{appId:qe,measurementId:_t};throw Mt}const Qe=503===Number(null===(xe=ht?.customData)||void 0===xe?void 0:xe.httpStatus)?(0,le.$s)(R,Q.intervalMillis,30):(0,le.$s)(R,Q.intervalMillis),Gn={throttleEndTimeMillis:Date.now()+Qe,backoffCount:R+1};return Q.setThrottleMetadata(qe,Gn),Vn.debug(`Calling attemptFetch again in ${Qe} millis`),pc(I,Gn,B,Q)}})).apply(this,arguments)}function ll(I,D){return new Promise((R,B)=>{const Q=Math.max(D-Date.now(),0),de=setTimeout(R,Q);I.addEventListener(()=>{clearTimeout(de),B(er.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function tu(I){if(!(I instanceof le.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}class ha{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let Ns,ru;function yo(){return(yo=(0,P.Z)(function*(I,D,R,B,Q){if(Q&&Q.global)I("event",R,B);else{const de=yield D;I("event",R,Object.assign(Object.assign({},B),{send_to:de}))}})).apply(this,arguments)}function Eo(I){ru=I}function cl(I){Ns=I}function cs(){return bo.apply(this,arguments)}function bo(){return(bo=(0,P.Z)(function*(){var I;if(!(0,le.hl)())return Vn.warn(er.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,le.eu)()}catch(D){return Vn.warn(er.create("indexeddb-unavailable",{errorInfo:null===(I=D)||void 0===I?void 0:I.toString()}).message),!1}return!0})).apply(this,arguments)}function Co(){return(Co=(0,P.Z)(function*(I,D,R,B,Q,de,xe){var qe;const _t=fc(I);_t.then(br=>{R[br.measurementId]=br.appId,I.options.measurementId&&br.measurementId!==I.options.measurementId&&Vn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${br.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(br=>Vn.error(br)),D.push(_t);const Mt=cs().then(br=>{if(br)return B.getId()}),[ht,Qe]=yield Promise.all([_t,Mt]);hc(de)||Xa(de,ht.measurementId),ru&&(Q("consent","default",ru),Eo(void 0)),Q("js",new Date);const Gn=null!==(qe=xe?.config)&&void 0!==qe?qe:{};return Gn.origin="firebase",Gn.update=!0,null!=Qe&&(Gn[cc]=Qe),Q("config",ht.measurementId,Gn),Ns&&(Q("set",Ns),cl(void 0)),ht.measurementId})).apply(this,arguments)}class iu{constructor(D){this.app=D}_delete(){return delete wr[this.app.options.appId],Promise.resolve()}}let wr={},Io=[];const Fs={};let So,Si,Do="dataLayer",mc=!1;function th(I,D,R){!function sp(){const I=[];if((0,le.ru)()&&I.push("This is a browser extension environment."),(0,le.zI)()||I.push("Cookies are not available."),I.length>0){const D=I.map((B,Q)=>`(${Q+1}) ${B}`).join(" "),R=er.create("invalid-analytics-context",{errorInfo:D});Vn.warn(R.message)}}();const B=I.options.appId;if(!B)throw er.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw er.create("no-api-key");Vn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=wr[B])throw er.create("already-exists",{id:B});if(!mc){!function Ja(I){let D=[];Array.isArray(window[I])?D=window[I]:window[I]=D}(Do);const{wrappedGtag:de,gtagCore:xe}=function ca(I,D,R,B,Q){let de=function(...xe){window[B].push(arguments)};return window[Q]&&"function"==typeof window[Q]&&(de=window[Q]),window[Q]=function al(I,D,R,B){function de(){return(de=(0,P.Z)(function*(xe,qe,_t){try{"event"===xe?yield Wi(I,D,R,qe,_t):"config"===xe?yield Kd(I,D,R,B,qe,_t):"consent"===xe?I("consent","update",_t):I("set",qe)}catch(Mt){Vn.error(Mt)}})).apply(this,arguments)}return function Q(xe,qe,_t){return de.apply(this,arguments)}}(de,I,D,R),{gtagCore:de,wrappedGtag:window[Q]}}(wr,Io,Fs,Do,"gtag");Si=de,So=xe,mc=!0}return wr[B]=function eh(I,D,R,B,Q,de,xe){return Co.apply(this,arguments)}(I,Io,Fs,D,So,Do,R),new iu(I)}function Vm(){return nh.apply(this,arguments)}function nh(){return(nh=(0,P.Z)(function*(){if((0,le.ru)()||!(0,le.zI)()||!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}const hl="@firebase/analytics";!function Rr(){(0,oe._registerComponent)(new ye.wA(go,(D,{options:R})=>th(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,oe._registerComponent)(new ye.wA("analytics-internal",function I(D){try{const R=D.getProvider(go).getImmediate();return{logEvent:(B,Q,de)=>function gn(I,D,R,B){I=(0,le.m9)(I),function fa(I,D,R,B,Q){return yo.apply(this,arguments)}(Si,wr[I.app.options.appId],D,R,B).catch(Q=>Vn.error(Q))}(R,B,Q,de)}}catch(R){throw er.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,oe.registerVersion)(hl,"0.8.2"),(0,oe.registerVersion)(hl,"0.8.2","esm2017")}();var Zi=F(4408),_n=F(7565);const ih=new class Ti extends _n.v{}(class Ls extends Zi.o{constructor(D,R){super(D,R),this.scheduler=D,this.work=R}schedule(D,R=0){return R>0?super.schedule(D,R):(this.delay=R,this.state=D,this.scheduler.flush(this),this)}execute(D,R){return R>0||this.closed?super.execute(D,R):this._execute(D,R)}requestAsyncId(D,R,B=0){return null!=B&&B>0||null==B&&this.delay>0?super.requestAsyncId(D,R,B):D.flush(this)}});var Dn=F(4986),ot=F(9751),Er=F(8505),Ki=F(9468),on=F(5363);const fl=new h.GfV("7.4.1"),tr="__angularfire_symbol__analyticsIsSupportedValue",pt="__angularfire_symbol__analyticsIsSupported",ou="__angularfire_symbol__remoteConfigIsSupportedValue",pl="__angularfire_symbol__remoteConfigIsSupported",Bs="__angularfire_symbol__messagingIsSupportedValue",gl="__angularfire_symbol__messagingIsSupported";function uu(I,D,R){if(D){if(1===D.length)return D[0];const de=D.filter(xe=>xe.app===R);if(1===de.length)return de[0]}return R.container.getProvider(I).getImmediate({optional:!0})}globalThis[pt]||(globalThis[pt]=Vm().then(I=>globalThis[tr]=I).catch(()=>globalThis[tr]=!1)),globalThis[gl]||(globalThis[gl]=uc().then(I=>globalThis[Bs]=I).catch(()=>globalThis[Bs]=!1)),globalThis[pl]||(globalThis[pl]=Fm().then(I=>globalThis[ou]=I).catch(()=>globalThis[ou]=!1));const lu=(I,D)=>{const R=D?[D]:(0,j.C6)(),B=[];return R.forEach(Q=>{Q.container.getProvider(I).instances.forEach(xe=>{B.includes(xe)||B.push(xe)})}),B};function Ai(){}class ya{constructor(D,R=ih){this.zone=D,this.delegate=R}now(){return this.delegate.now()}schedule(D,R,B){const Q=this.zone;return this.delegate.schedule(function(xe){Q.runGuarded(()=>{D.apply(this,[xe])})},R,B)}}class xi{constructor(D){this.zone=D,this.task=null}call(D,R){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ai,{},Ai,Ai)),R.pipe((0,Er.b)({next:B,complete:B,error:B})).subscribe(D).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Us=(()=>{class I{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new ya(Zone.current)),this.insideAngular=R.run(()=>new ya(Zone.current,Dn.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(R){return new(R||I)(h.LFG(h.R0b))},I.\u0275prov=h.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Yi(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function yc(I){return Yi().ngZone.runOutsideAngular(()=>I())}function Qi(I){return Yi().ngZone.run(()=>I())}function _c(I){return Yi(),function Nn(I){return function(R){return(R=R.lift(new xi(I.ngZone))).pipe((0,Ki.R)(I.outsideAngular),(0,on.Q)(I.insideAngular))}}(Yi())(I)}const js=(I,D)=>function(){const B=arguments;return D&&setTimeout(()=>{"scheduled"===D.state&&D.invoke()},10),Qi(()=>I.apply(void 0,B))},ml=(I,D)=>function(){let R;const B=arguments;for(let de=0;de<arguments.length;de++)"function"==typeof B[de]&&(D&&(R||(R=Qi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ai,{},Ai,Ai)))),B[de]=js(B[de],R));const Q=yc(()=>I.apply(this,B));if(!D){if(Q instanceof ot.y){const de=Yi();return Q.pipe((0,Ki.R)(de.outsideAngular),(0,on.Q)(de.insideAngular))}return Qi(()=>Q)}return Q instanceof ot.y?Q.pipe(_c):Q instanceof Promise?Qi(()=>new Promise((de,xe)=>Q.then(qe=>Qi(()=>de(qe)),qe=>Qi(()=>xe(qe))))):"function"==typeof Q&&R?function(){return setTimeout(()=>{R&&"scheduled"===R.state&&R.invoke()},10),Q.apply(this,arguments)}:Qi(()=>Q)}},9934:(dt,Se,F)=>{F.d(Se,{$:()=>ks,A:()=>G,B:()=>Pe,G:()=>Ss,H:()=>Br,J:()=>$i,L:()=>W,M:()=>Ga,N:()=>Xl,P:()=>Dn,Q:()=>Wa,R:()=>Bm,T:()=>Ku,U:()=>ss,V:()=>ri,W:()=>Hi,X:()=>tp,Y:()=>Qo,Z:()=>Ot,_:()=>np,a:()=>ls,a0:()=>rp,a1:()=>Xn,a2:()=>Za,a3:()=>Ka,a4:()=>zd,a5:()=>ip,a6:()=>Jn,a7:()=>Ii,a8:()=>sa,a9:()=>zi,aA:()=>Gn,aB:()=>qe,aC:()=>Qi,aD:()=>yc,aE:()=>wt,aI:()=>mo,aL:()=>so,aa:()=>Gd,ab:()=>el,ac:()=>tl,af:()=>Wd,ag:()=>qd,ah:()=>oc,ak:()=>yi,al:()=>rl,an:()=>dc,ao:()=>eu,ap:()=>xt,aq:()=>ve,ar:()=>Ve,as:()=>at,at:()=>Xe,au:()=>ch,av:()=>Hr,aw:()=>Ne,ax:()=>se,ay:()=>ee,az:()=>$,b:()=>er,c:()=>pl,d:()=>op,e:()=>gl,f:()=>_c,g:()=>R,h:()=>ml,i:()=>bo,j:()=>de,k:()=>lp,l:()=>rh,m:()=>Ao,n:()=>dw,o:()=>fe,r:()=>Zi,s:()=>or,u:()=>ih});var h=F(5861),j=F(2090),P=F(9681),oe=F(1877),le=F(655),ye=F(4859);const fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},G={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Pe=function J(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ie=function $e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},st=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ge=new oe.Yd("@firebase/auth");function tt(v,...g){ge.logLevel<=oe.in.ERROR&&ge.error(`Auth (${P.SDK_VERSION}): ${v}`,...g)}function Xe(v,...g){throw We(v,...g)}function Ne(v,...g){return We(v,...g)}function ke(v,g,m){const E=Object.assign(Object.assign({},Ie()),{[g]:m});return new j.LL("auth","Firebase",E).create(g,{appName:v.name})}function Ce(v,g,m){if(!(g instanceof m))throw m.name!==g.constructor.name&&Xe(v,"argument-error"),ke(v,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function We(v,...g){if("string"!=typeof v){const m=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(m,...E)}return st.create(v,...g)}function se(v,g,...m){if(!v)throw We(g,...m)}function he(v){const g="INTERNAL ASSERTION FAILED: "+v;throw tt(g),new Error(g)}function ve(v,g){v||he(g)}const X=new Map;function ee(v){ve(v instanceof Function,"Expected a class definition");let g=X.get(v);return g?(ve(g instanceof v,"Instance stored in cache mismatched with class"),g):(g=new v,X.set(v,g),g)}function Be(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function je(){return"http:"===vt()||"https:"===vt()}function vt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Ze{constructor(g,m){this.shortDelay=g,this.longDelay=m,ve(m>g,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function tn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(je()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function un(v,g){ve(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return g?`${m}${g.startsWith("/")?g.slice(1):g}`:m}class wn{static initialize(g,m,E){this.fetchImpl=g,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void he("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void he("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void he("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Jt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},en=new Ze(3e4,6e4);function zt(v,g){return v.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:v.tenantId}):g}function Lt(v,g,m,E){return _r.apply(this,arguments)}function _r(){return(_r=(0,h.Z)(function*(v,g,m,E,x={}){return bi(v,x,(0,h.Z)(function*(){let N={},ne={};E&&("GET"===g?ne=E:N={body:JSON.stringify(E)});const Ae=(0,j.xO)(Object.assign({key:v.config.apiKey},ne)).slice(1),it=yield v._getAdditionalHeaders();return it["Content-Type"]="application/json",v.languageCode&&(it["X-Firebase-Locale"]=v.languageCode),wn.fetch()(Li(v,v.config.apiHost,m,Ae),Object.assign({method:g,headers:it,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function bi(v,g,m){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,h.Z)(function*(v,g,m){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},Jt),g);try{const x=new Ar(v),N=yield Promise.race([m(),x.promise]);x.clearNetworkTimeout();const ne=yield N.json();if("needConfirmation"in ne)throw Un(v,"account-exists-with-different-credential",ne);if(N.ok&&!("errorMessage"in ne))return ne;{const Ae=N.ok?ne.errorMessage:ne.error.message,[it,Et]=Ae.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===it)throw Un(v,"credential-already-in-use",ne);if("EMAIL_EXISTS"===it)throw Un(v,"email-already-in-use",ne);if("USER_DISABLED"===it)throw Un(v,"user-disabled",ne);const Gt=E[it]||it.toLowerCase().replace(/[_\s]+/g,"-");if(Et)throw ke(v,Gt,Et);Xe(v,Gt)}}catch(x){if(x instanceof j.ZR)throw x;Xe(v,"network-request-failed")}})).apply(this,arguments)}function kn(v,g,m,E){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,h.Z)(function*(v,g,m,E,x={}){const N=yield Lt(v,g,m,E,x);return"mfaPendingCredential"in N&&Xe(v,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Li(v,g,m,E){const x=`${g}${m}?${E}`;return v.config.emulator?un(v.config,x):`${v.config.apiScheme}://${x}`}class Ar{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(Ne(this.auth,"network-request-failed")),en.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Un(v,g,m){const E={appName:v.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const x=Ne(v,g,E);return x.customData._tokenResponse=m,x}function Vi(){return(Vi=(0,h.Z)(function*(v,g){return Lt(v,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Je(v,g){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,h.Z)(function*(v,g){return Lt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function jn(v,g){return yn.apply(this,arguments)}function yn(){return(yn=(0,h.Z)(function*(v,g){return Lt(v,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function fr(v){if(v)try{const g=new Date(Number(v));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function bn(){return(bn=(0,h.Z)(function*(v,g=!1){const m=(0,j.m9)(v),E=yield m.getIdToken(g),x=mt(E);se(x&&x.exp&&x.auth_time&&x.iat,m.auth,"internal-error");const N="object"==typeof x.firebase?x.firebase:void 0,ne=N?.sign_in_provider;return{claims:x,token:E,authTime:fr(pn(x.auth_time)),issuedAtTime:fr(pn(x.iat)),expirationTime:fr(pn(x.exp)),signInProvider:ne||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function pn(v){return 1e3*Number(v)}function mt(v){var g;const[m,E,x]=v.split(".");if(void 0===m||void 0===E||void 0===x)return tt("JWT malformed, contained fewer than 3 sections"),null;try{const N=(0,j.tV)(E);return N?JSON.parse(N):(tt("Failed to decode base64 JWT payload"),null)}catch(N){return tt("Caught error parsing JWT payload as JSON",null===(g=N)||void 0===g?void 0:g.toString()),null}}function Tt(v,g){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,h.Z)(function*(v,g,m=!1){if(m)return g;try{return yield g}catch(E){throw E instanceof j.ZR&&Yn(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}function Yn({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class vr{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var m;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const x=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(g=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,h.Z)(function*(){yield m.iteration()}),E)}iteration(){var g=this;return(0,h.Z)(function*(){var m;try{yield g.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(m=E)||void 0===m?void 0:m.code)&&g.schedule(!0))}g.schedule()})()}}class Dt{constructor(g,m){this.createdAt=g,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=fr(this.lastLoginAt),this.creationTime=fr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function xr(v){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,h.Z)(function*(v){var g;const m=v.auth,E=yield v.getIdToken(),x=yield Tt(v,jn(m,{idToken:E}));se(x?.users.length,m,"internal-error");const N=x.users[0];v._notifyReloadListener(N);const ne=null!==(g=N.providerUserInfo)&&void 0!==g&&g.length?Sn(N.providerUserInfo):[],Ae=sr(v.providerData,ne),Gt=!!v.isAnonymous&&!(v.email&&N.passwordHash||Ae?.length),Tn={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:Ae,metadata:new Dt(N.createdAt,N.lastLoginAt),isAnonymous:Gt};Object.assign(v,Tn)})).apply(this,arguments)}function Zt(){return(Zt=(0,h.Z)(function*(v){const g=(0,j.m9)(v);yield xr(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function sr(v,g){return[...v.filter(E=>!g.some(x=>x.providerId===E.providerId)),...g]}function Sn(v){return v.map(g=>{var{providerId:m}=g,E=(0,le._T)(g,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function De(){return(De=(0,h.Z)(function*(v,g){const m=yield bi(v,{},(0,h.Z)(function*(){const E=(0,j.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:x,apiKey:N}=v.config,ne=Li(v,x,"/v1/token",`key=${N}`),Ae=yield v._getAdditionalHeaders();return Ae["Content-Type"]="application/x-www-form-urlencoded",wn.fetch()(ne,{method:"POST",headers:Ae,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class rt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){se(g.idToken,"internal-error"),se(typeof g.idToken<"u","internal-error"),se(typeof g.refreshToken<"u","internal-error");const m="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function yt(v){const g=mt(v);return se(g,"internal-error"),se(typeof g.exp<"u","internal-error"),se(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,m)}getToken(g,m=!1){var E=this;return(0,h.Z)(function*(){return se(!E.accessToken||E.refreshToken,g,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,m){var E=this;return(0,h.Z)(function*(){const{accessToken:x,refreshToken:N,expiresIn:ne}=yield function nt(v,g){return De.apply(this,arguments)}(g,m);E.updateTokensAndExpiration(x,N,Number(ne))})()}updateTokensAndExpiration(g,m,E){this.refreshToken=m||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,m){const{refreshToken:E,accessToken:x,expirationTime:N}=m,ne=new rt;return E&&(se("string"==typeof E,"internal-error",{appName:g}),ne.refreshToken=E),x&&(se("string"==typeof x,"internal-error",{appName:g}),ne.accessToken=x),N&&(se("number"==typeof N,"internal-error",{appName:g}),ne.expirationTime=N),ne}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new rt,this.toJSON())}_performRefresh(){return he("not implemented")}}function bt(v,g){se("string"==typeof v||typeof v>"u","internal-error",{appName:g})}class It{constructor(g){var{uid:m,auth:E,stsTokenManager:x}=g,N=(0,le._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new Dt(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(g){var m=this;return(0,h.Z)(function*(){const E=yield Tt(m,m.stsTokenManager.getToken(m.auth,g));return se(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(g){return function En(v){return bn.apply(this,arguments)}(this,g)}reload(){return function Jr(v){return Zt.apply(this,arguments)}(this)}_assign(g){this!==g&&(se(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(m=>Object.assign({},m)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new It(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,m=!1){var E=this;return(0,h.Z)(function*(){let x=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),x=!0),m&&(yield xr(E)),yield E.auth._persistUserIfCurrent(E),x&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,h.Z)(function*(){const m=yield g.getIdToken();return yield Tt(g,function mi(v,g){return Vi.apply(this,arguments)}(g.auth,{idToken:m})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,m){var E,x,N,ne,Ae,it,Et,Gt;const Tn=null!==(E=m.displayName)&&void 0!==E?E:void 0,ai=null!==(x=m.email)&&void 0!==x?x:void 0,hu=null!==(N=m.phoneNumber)&&void 0!==N?N:void 0,dh=null!==(ne=m.photoURL)&&void 0!==ne?ne:void 0,hp=null!==(Ae=m.tenantId)&&void 0!==Ae?Ae:void 0,fp=null!==(it=m._redirectEventId)&&void 0!==it?it:void 0,Zm=null!==(Et=m.createdAt)&&void 0!==Et?Et:void 0,hh=null!==(Gt=m.lastLoginAt)&&void 0!==Gt?Gt:void 0,{uid:pp,emailVerified:wl,isAnonymous:Ec,providerData:bc,stsTokenManager:hs}=m;se(pp&&hs,g,"internal-error");const xo=rt.fromJSON(this.name,hs);se("string"==typeof pp,g,"internal-error"),bt(Tn,g.name),bt(ai,g.name),se("boolean"==typeof wl,g,"internal-error"),se("boolean"==typeof Ec,g,"internal-error"),bt(hu,g.name),bt(dh,g.name),bt(hp,g.name),bt(fp,g.name),bt(Zm,g.name),bt(hh,g.name);const qn=new It({uid:pp,auth:g,email:ai,emailVerified:wl,displayName:Tn,isAnonymous:Ec,photoURL:dh,phoneNumber:hu,tenantId:hp,stsTokenManager:xo,createdAt:Zm,lastLoginAt:hh});return bc&&Array.isArray(bc)&&(qn.providerData=bc.map(fh=>Object.assign({},fh))),fp&&(qn._redirectEventId=fp),qn}static _fromIdTokenResponse(g,m,E=!1){return(0,h.Z)(function*(){const x=new rt;x.updateFromServerResponse(m);const N=new It({uid:m.localId,auth:g,stsTokenManager:x,isAnonymous:E});return yield xr(N),N})()}}const W=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(m,E){var x=this;return(0,h.Z)(function*(){x.storage[m]=E})()}_get(m){var E=this;return(0,h.Z)(function*(){const x=E.storage[m];return void 0===x?null:x})()}_remove(m){var E=this;return(0,h.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return v.type="NONE",v})();function $(v,g,m){return`firebase:${v}:${g}:${m}`}class Y{constructor(g,m,E){this.persistence=g,this.auth=m,this.userKey=E;const{config:x,name:N}=this.auth;this.fullUserKey=$(this.userKey,x.apiKey,N),this.fullPersistenceKey=$("persistence",x.apiKey,N),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,h.Z)(function*(){const m=yield g.persistence._get(g.fullUserKey);return m?It._fromJSON(g.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var m=this;return(0,h.Z)(function*(){if(m.persistence===g)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=g,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,m,E="authUser"){return(0,h.Z)(function*(){if(!m.length)return new Y(ee(W),g,E);const x=(yield Promise.all(m.map(function(){var Et=(0,h.Z)(function*(Gt){if(yield Gt._isAvailable())return Gt});return function(Gt){return Et.apply(this,arguments)}}()))).filter(Et=>Et);let N=x[0]||ee(W);const ne=$(E,g.config.apiKey,g.name);let Ae=null;for(const Et of m)try{const Gt=yield Et._get(ne);if(Gt){const Tn=It._fromJSON(g,Gt);Et!==N&&(Ae=Tn),N=Et;break}}catch{}const it=x.filter(Et=>Et._shouldAllowMigration);return N._shouldAllowMigration&&it.length?(N=it[0],Ae&&(yield N._set(ne,Ae.toJSON())),yield Promise.all(m.map(function(){var Et=(0,h.Z)(function*(Gt){if(Gt!==N)try{yield Gt._remove(ne)}catch{}});return function(Gt){return Et.apply(this,arguments)}}())),new Y(N,g,E)):new Y(N,g,E)})()}}function U(v){const g=v.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Fe(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(O(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(ut(g))return"Blackberry";if(Te(g))return"Webos";if(V(g))return"Safari";if((g.includes("chrome/")||re(g))&&!g.includes("edge/"))return"Chrome";if(at(g))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function O(v=(0,j.z$)()){return/firefox\//i.test(v)}function V(v=(0,j.z$)()){const g=v.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function re(v=(0,j.z$)()){return/crios\//i.test(v)}function Fe(v=(0,j.z$)()){return/iemobile/i.test(v)}function at(v=(0,j.z$)()){return/android/i.test(v)}function ut(v=(0,j.z$)()){return/blackberry/i.test(v)}function Te(v=(0,j.z$)()){return/webos/i.test(v)}function Ve(v=(0,j.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function xt(v=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function cn(v=(0,j.z$)()){return Ve(v)||at(v)||Te(v)||ut(v)||/windows phone/i.test(v)||Fe(v)}function Cn(v,g=[]){let m;switch(v){case"Browser":m=U((0,j.z$)());break;case"Worker":m=`${U((0,j.z$)())}-${v}`;break;default:m=v}const E=g.length?g.join(","):"FirebaseCore-web";return`${m}/JsCore/${P.SDK_VERSION}/${E}`}class Is{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,m){const E=N=>new Promise((ne,Ae)=>{try{ne(g(N))}catch(it){Ae(it)}});E.onAbort=m,this.queue.push(E);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(g){var m=this;return(0,h.Z)(function*(){var E;if(m.auth.currentUser===g)return;const x=[];try{for(const N of m.queue)yield N(g),N.onAbort&&x.push(N.onAbort)}catch(N){x.reverse();for(const ne of x)try{ne()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=N)||void 0===E?void 0:E.message})}})()}}class Js{constructor(g,m,E){this.app=g,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ds(this),this.idTokenSubscription=new Ds(this),this.beforeStateQueue=new Is(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=st,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(g,m){var E=this;return m&&(this._popupRedirectResolver=ee(m)),this._initializationPromise=this.queue((0,h.Z)(function*(){var x,N;if(!E._deleted&&(E.persistenceManager=yield Y.create(E,g),!E._deleted)){if(null!==(x=E._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(N=E.currentUser)||void 0===N?void 0:N.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,h.Z)(function*(){if(g._deleted)return;const m=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||m){if(g.currentUser&&m&&g.currentUser.uid===m.uid)return g._currentUser._assign(m),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(m,!0)}})()}initializeCurrentUser(g){var m=this;return(0,h.Z)(function*(){var E;const x=yield m.assertedPersistence.getCurrentUser();let N=x,ne=!1;if(g&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Ae=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,it=N?._redirectEventId,Et=yield m.tryRedirectSignIn(g);(!Ae||Ae===it)&&Et?.user&&(N=Et.user,ne=!0)}if(!N)return m.directlySetCurrentUser(null);if(!N._redirectEventId){if(ne)try{yield m.beforeStateQueue.runMiddleware(N)}catch(Ae){N=x,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Ae))}return N?m.reloadAndSetCurrentUserOrClear(N):m.directlySetCurrentUser(null)}return se(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===N._redirectEventId?m.directlySetCurrentUser(N):m.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(g){var m=this;return(0,h.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,g,!0)}catch{yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(g){var m=this;return(0,h.Z)(function*(){var E;try{yield xr(g)}catch(x){if("auth/network-request-failed"!==(null===(E=x)||void 0===E?void 0:E.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function $t(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var g=this;return(0,h.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var m=this;return(0,h.Z)(function*(){const E=g?(0,j.m9)(g):null;return E&&se(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(g,m=!1){var E=this;return(0,h.Z)(function*(){if(!E._deleted)return g&&se(E.tenantId===g.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(g)),E.queue((0,h.Z)(function*(){yield E.directlySetCurrentUser(g),E.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,h.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var m=this;return this.queue((0,h.Z)(function*(){yield m.assertedPersistence.setPersistence(ee(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new j.LL("auth","Firebase",g())}onAuthStateChanged(g,m,E){return this.registerStateListener(this.authStateSubscription,g,m,E)}beforeAuthStateChanged(g,m){return this.beforeStateQueue.pushCallback(g,m)}onIdTokenChanged(g,m,E){return this.registerStateListener(this.idTokenSubscription,g,m,E)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,m){var E=this;return(0,h.Z)(function*(){const x=yield E.getOrInitRedirectPersistenceManager(m);return null===g?x.removeCurrentUser():x.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var m=this;return(0,h.Z)(function*(){if(!m.redirectPersistenceManager){const E=g&&ee(g)||m._popupRedirectResolver;se(E,m,"argument-error"),m.redirectPersistenceManager=yield Y.create(m,[ee(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(g){var m=this;return(0,h.Z)(function*(){var E,x;return m._isInitialized&&(yield m.queue((0,h.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===g?m._currentUser:(null===(x=m.redirectUser)||void 0===x?void 0:x._redirectEventId)===g?m.redirectUser:null})()}_persistUserIfCurrent(g){var m=this;return(0,h.Z)(function*(){if(g===m.currentUser)return m.queue((0,h.Z)(function*(){return m.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,m,E,x){if(this._deleted)return()=>{};const N="function"==typeof m?m:m.next.bind(m),ne=this._isInitialized?Promise.resolve():this._initializationPromise;return se(ne,this,"internal-error"),ne.then(()=>N(this.currentUser)),"function"==typeof m?g.addObserver(m,E,x):g.addObserver(m)}directlySetCurrentUser(g){var m=this;return(0,h.Z)(function*(){m.currentUser&&m.currentUser!==g&&m._currentUser._stopProactiveRefresh(),g&&m.isProactiveRefreshEnabled&&g._startProactiveRefresh(),m.currentUser=g,g?yield m.assertedPersistence.setCurrentUser(g):yield m.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Cn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,h.Z)(function*(){var m;const E={"X-Client-Version":g.clientVersion};g.app.options.appId&&(E["X-Firebase-gmpid"]=g.app.options.appId);const x=yield null===(m=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return x&&(E["X-Firebase-Client"]=x),E})()}}function wt(v){return(0,j.m9)(v)}class Ds{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,j.ne)(m=>this.observer=m)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ss(v,g,m){const E=wt(v);se(E._canInitEmulator,E,"emulator-config-failed"),se(/^https?:\/\//.test(g),E,"invalid-emulator-scheme");const x=!!m?.disableWarnings,N=Ha(g),{host:ne,port:Ae}=function Ui(v){const g=Ha(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(g.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(E);if(x){const N=x[1];return{host:N,port:$n(E.substr(N.length+1))}}{const[N,ne]=E.split(":");return{host:N,port:$n(ne)}}}(g);E.config.emulator={url:`${N}//${ne}${null===Ae?"":`:${Ae}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:ne,port:Ae,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function Ts(){function v(){const g=document.createElement("p"),m=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function Ha(v){const g=v.indexOf(":");return g<0?"":v.substr(0,g+1)}function $n(v){if(!v)return null;const g=Number(v);return isNaN(g)?null:g}class Br{constructor(g,m){this.providerId=g,this.signInMethod=m}toJSON(){return he("not implemented")}_getIdTokenResponse(g){return he("not implemented")}_linkToIdToken(g,m){return he("not implemented")}_getReauthenticationResolver(g){return he("not implemented")}}function ei(v,g){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,h.Z)(function*(v,g){return Lt(v,"POST","/v1/accounts:resetPassword",zt(v,g))})).apply(this,arguments)}function za(v,g){return dn.apply(this,arguments)}function dn(){return(dn=(0,h.Z)(function*(v,g){return Lt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function jd(v,g){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,h.Z)(function*(v,g){return Lt(v,"POST","/v1/accounts:update",zt(v,g))})).apply(this,arguments)}function As(){return(As=(0,h.Z)(function*(v,g){return kn(v,"POST","/v1/accounts:signInWithPassword",zt(v,g))})).apply(this,arguments)}function is(v,g){return xs.apply(this,arguments)}function xs(){return(xs=(0,h.Z)(function*(v,g){return Lt(v,"POST","/v1/accounts:sendOobCode",zt(v,g))})).apply(this,arguments)}function ji(v,g){return zn.apply(this,arguments)}function zn(){return(zn=(0,h.Z)(function*(v,g){return is(v,g)})).apply(this,arguments)}function $d(v,g){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,h.Z)(function*(v,g){return is(v,g)})).apply(this,arguments)}function ti(v,g){return eo.apply(this,arguments)}function eo(){return(eo=(0,h.Z)(function*(v,g){return is(v,g)})).apply(this,arguments)}function Wu(v,g){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,h.Z)(function*(v,g){return is(v,g)})).apply(this,arguments)}function qu(){return(qu=(0,h.Z)(function*(v,g){return kn(v,"POST","/v1/accounts:signInWithEmailLink",zt(v,g))})).apply(this,arguments)}function Zu(){return(Zu=(0,h.Z)(function*(v,g){return kn(v,"POST","/v1/accounts:signInWithEmailLink",zt(v,g))})).apply(this,arguments)}class Ko extends Br{constructor(g,m,E,x=null){super("password",E),this._email=g,this._password=m,this._tenantId=x}static _fromEmailAndPassword(g,m){return new Ko(g,m,"password")}static _fromEmailAndCode(g,m,E=null){return new Ko(g,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(g){var m=this;return(0,h.Z)(function*(){switch(m.signInMethod){case"password":return function qo(v,g){return As.apply(this,arguments)}(g,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Ur(v,g){return qu.apply(this,arguments)}(g,{email:m._email,oobCode:m._password});default:Xe(g,"internal-error")}})()}_linkToIdToken(g,m){var E=this;return(0,h.Z)(function*(){switch(E.signInMethod){case"password":return za(g,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Kf(v,g){return Zu.apply(this,arguments)}(g,{idToken:m,email:E._email,oobCode:E._password});default:Xe(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Ms(v,g){return ni.apply(this,arguments)}function ni(){return(ni=(0,h.Z)(function*(v,g){return kn(v,"POST","/v1/accounts:signInWithIdp",zt(v,g))})).apply(this,arguments)}class $i extends Br{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const m=new $i(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(m.idToken=g.idToken),g.accessToken&&(m.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(m.nonce=g.nonce),g.pendingToken&&(m.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(m.accessToken=g.oauthToken,m.secret=g.oauthTokenSecret):Xe("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:x}=m,N=(0,le._T)(m,["providerId","signInMethod"]);if(!E||!x)return null;const ne=new $i(E,x);return ne.idToken=N.idToken||void 0,ne.accessToken=N.accessToken||void 0,ne.secret=N.secret,ne.nonce=N.nonce,ne.pendingToken=N.pendingToken||null,ne}_getIdTokenResponse(g){return Ms(g,this.buildRequest())}_linkToIdToken(g,m){const E=this.buildRequest();return E.idToken=m,Ms(g,E)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Ms(g,m)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),g.postBody=(0,j.xO)(m)}return g}}function Qf(v,g){return ql.apply(this,arguments)}function ql(){return(ql=(0,h.Z)(function*(v,g){return Lt(v,"POST","/v1/accounts:sendVerificationCode",zt(v,g))})).apply(this,arguments)}function Yo(){return(Yo=(0,h.Z)(function*(v,g){return kn(v,"POST","/v1/accounts:signInWithPhoneNumber",zt(v,g))})).apply(this,arguments)}function Zl(){return(Zl=(0,h.Z)(function*(v,g){const m=yield kn(v,"POST","/v1/accounts:signInWithPhoneNumber",zt(v,g));if(m.temporaryProof)throw Un(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Jf={USER_NOT_FOUND:"user-not-found"};function Kl(){return(Kl=(0,h.Z)(function*(v,g){return kn(v,"POST","/v1/accounts:signInWithPhoneNumber",zt(v,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Jf)})).apply(this,arguments)}class no extends Br{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,m){return new no({verificationId:g,verificationCode:m})}static _fromTokenResponse(g,m){return new no({phoneNumber:g,temporaryProof:m})}_getIdTokenResponse(g){return function Xf(v,g){return Yo.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,m){return function to(v,g){return Zl.apply(this,arguments)}(g,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function ep(v,g){return Kl.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:m,verificationId:E,verificationCode:x}=this.params;return g&&m?{temporaryProof:g,phoneNumber:m}:{sessionInfo:E,code:x}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:m,verificationCode:E,phoneNumber:x,temporaryProof:N}=g;return E||m||x||N?new no({verificationId:m,verificationCode:E,phoneNumber:x,temporaryProof:N}):null}}class ro{constructor(g){var m,E,x,N,ne,Ae;const it=(0,j.zd)((0,j.pd)(g)),Et=null!==(m=it.apiKey)&&void 0!==m?m:null,Gt=null!==(E=it.oobCode)&&void 0!==E?E:null,Tn=function Yl(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=it.mode)&&void 0!==x?x:null);se(Et&&Gt&&Tn,"argument-error"),this.apiKey=Et,this.operation=Tn,this.code=Gt,this.continueUrl=null!==(N=it.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(ne=it.languageCode)&&void 0!==ne?ne:null,this.tenantId=null!==(Ae=it.tenantId)&&void 0!==Ae?Ae:null}static parseLink(g){const m=function Ql(v){const g=(0,j.zd)((0,j.pd)(v)).link,m=g?(0,j.zd)((0,j.pd)(g)).deep_link_id:null,E=(0,j.zd)((0,j.pd)(v)).deep_link_id;return(E?(0,j.zd)((0,j.pd)(E)).link:null)||E||m||g||v}(g);try{return new ro(m)}catch{return null}}}let Ga=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,E){return Ko._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const x=ro.parseLink(E);return se(x,"argument-error"),Ko._fromEmailAndCode(m,x.code,x.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class gr{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class io extends gr{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class ss extends io{static credentialFromJSON(g){const m="string"==typeof g?JSON.parse(g):g;return se("providerId"in m&&"signInMethod"in m,"argument-error"),$i._fromParams(m)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return se(g.idToken||g.accessToken,"argument-error"),$i._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return ss.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return ss.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:x,pendingToken:N,nonce:ne,providerId:Ae}=g;if(!E&&!x&&!m&&!N||!Ae)return null;try{return new ss(Ae)._credential({idToken:m,accessToken:E,nonce:ne,pendingToken:N})}catch{return null}}}let Xl=(()=>{class v extends io{constructor(){super("facebook.com")}static credential(m){return $i._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Wa=(()=>{class v extends io{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return $i._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:x}=m;if(!E&&!x)return null;try{return v.credential(E,x)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Ku=(()=>{class v extends io{constructor(){super("github.com")}static credential(m){return $i._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class so extends Br{constructor(g,m){super(g,g),this.pendingToken=m}_getIdTokenResponse(g){return Ms(g,this.buildRequest())}_linkToIdToken(g,m){const E=this.buildRequest();return E.idToken=m,Ms(g,E)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Ms(g,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:x,pendingToken:N}=m;return E&&x&&N&&E===x?new so(E,N):null}static _create(g,m){return new so(g,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ri extends gr{constructor(g){se(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return ri.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return ri.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const m=so.fromJSON(g);return se(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:m,providerId:E}=g;if(!m||!E)return null;try{return so._create(E,m)}catch{return null}}}let Hi=(()=>{class v extends io{constructor(){super("twitter.com")}static credential(m,E){return $i._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:x}=m;if(!E||!x)return null;try{return v.credential(E,x)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function jr(v,g){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,h.Z)(function*(v,g){return kn(v,"POST","/v1/accounts:signUp",zt(v,g))})).apply(this,arguments)}class ii{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,m,E,x=!1){return(0,h.Z)(function*(){const N=yield It._fromIdTokenResponse(g,E,x),ne=oo(E);return new ii({user:N,providerId:ne,_tokenResponse:E,operationType:m})})()}static _forOperation(g,m,E){return(0,h.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const x=oo(E);return new ii({user:g,providerId:x,_tokenResponse:E,operationType:m})})()}}function oo(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function tp(v){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,h.Z)(function*(v){var g;const m=wt(v);if(yield m._initializationPromise,null!==(g=m.currentUser)&&void 0!==g&&g.isAnonymous)return new ii({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield jr(m,{returnSecureToken:!0}),x=yield ii._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(x.user),x})).apply(this,arguments)}class Pn extends j.ZR{constructor(g,m,E,x){var N;super(m.code,m.message),this.operationType=E,this.user=x,Object.setPrototypeOf(this,Pn.prototype),this.customData={appName:g.name,tenantId:null!==(N=g.tenantId)&&void 0!==N?N:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,m,E,x){return new Pn(g,m,E,x)}}function tc(v,g,m,E){return("reauthenticate"===g?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Pn._fromErrorAndOperation(v,N,g,E):N})}function Hd(v){return new Set(v.map(({providerId:g})=>g).filter(g=>!!g))}function yi(v,g){return mr.apply(this,arguments)}function mr(){return(mr=(0,h.Z)(function*(v,g){const m=(0,j.m9)(v);yield Ci(!0,m,g);const{providerUserInfo:E}=yield Je(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[g]}),x=Hd(E||[]);return m.providerData=m.providerData.filter(N=>x.has(N.providerId)),x.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function qa(v,g){return Os.apply(this,arguments)}function Os(){return(Os=(0,h.Z)(function*(v,g,m=!1){const E=yield Tt(v,g._linkToIdToken(v.auth,yield v.getIdToken()),m);return ii._forOperation(v,"link",E)})).apply(this,arguments)}function Ci(v,g,m){return nn.apply(this,arguments)}function nn(){return(nn=(0,h.Z)(function*(v,g,m){yield xr(g);const x=!1===v?"provider-already-linked":"no-such-provider";se(Hd(g.providerData).has(m)===v,g.auth,x)})).apply(this,arguments)}function Qu(v,g){return os.apply(this,arguments)}function os(){return(os=(0,h.Z)(function*(v,g,m=!1){var E;const{auth:x}=v,N="reauthenticate";try{const ne=yield Tt(v,tc(x,N,g,v),m);se(ne.idToken,x,"internal-error");const Ae=mt(ne.idToken);se(Ae,x,"internal-error");const{sub:it}=Ae;return se(v.uid===it,x,"user-mismatch"),ii._forOperation(v,N,ne)}catch(ne){throw"auth/user-not-found"===(null===(E=ne)||void 0===E?void 0:E.code)&&Xe(x,"user-mismatch"),ne}})).apply(this,arguments)}function Xu(v,g){return si.apply(this,arguments)}function si(){return(si=(0,h.Z)(function*(v,g,m=!1){const E="signIn",x=yield tc(v,E,g),N=yield ii._fromIdTokenResponse(v,E,x);return m||(yield v._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Qo(v,g){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,h.Z)(function*(v,g){return Xu(wt(v),g)})).apply(this,arguments)}function Ot(v,g){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,h.Z)(function*(v,g){const m=(0,j.m9)(v);return yield Ci(!1,m,g.providerId),qa(m,g)})).apply(this,arguments)}function np(v,g){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,h.Z)(function*(v,g){return Qu((0,j.m9)(v),g)})).apply(this,arguments)}function nc(v,g){return ea.apply(this,arguments)}function ea(){return(ea=(0,h.Z)(function*(v,g){return kn(v,"POST","/v1/accounts:signInWithCustomToken",zt(v,g))})).apply(this,arguments)}function ks(v,g){return ta.apply(this,arguments)}function ta(){return(ta=(0,h.Z)(function*(v,g){const m=wt(v),E=yield nc(m,{token:g,returnSecureToken:!0}),x=yield ii._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(x.user),x})).apply(this,arguments)}class ao{constructor(g,m){this.factorId=g,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(g,m){return"phoneInfo"in m?Re._fromServerResponse(g,m):Xe(g,"internal-error")}}class Re extends ao{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,m){return new Re(m)}}function Wt(v,g,m){var E;se((null===(E=m.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),se(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),g.continueUrl=m.url,g.dynamicLinkDomain=m.dynamicLinkDomain,g.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(se(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),g.iOSBundleId=m.iOS.bundleId),m.android&&(se(m.android.packageName.length>0,v,"missing-android-pkg-name"),g.androidInstallApp=m.android.installApp,g.androidMinimumVersionCode=m.android.minimumVersion,g.androidPackageName=m.android.packageName)}function rp(v,g,m){return na.apply(this,arguments)}function na(){return(na=(0,h.Z)(function*(v,g,m){const E=(0,j.m9)(v),x={requestType:"PASSWORD_RESET",email:g};m&&Wt(E,x,m),yield $d(E,x)})).apply(this,arguments)}function Xn(v,g,m){return uo.apply(this,arguments)}function uo(){return(uo=(0,h.Z)(function*(v,g,m){yield ei((0,j.m9)(v),{oobCode:g,newPassword:m})})).apply(this,arguments)}function Za(v,g){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,h.Z)(function*(v,g){yield jd((0,j.m9)(v),{oobCode:g})})).apply(this,arguments)}function Ka(v,g){return lo.apply(this,arguments)}function lo(){return(lo=(0,h.Z)(function*(v,g){const m=(0,j.m9)(v),E=yield ei(m,{oobCode:g}),x=E.requestType;switch(se(x,m,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":se(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":se(E.mfaInfo,m,"internal-error");default:se(E.email,m,"internal-error")}let N=null;return E.mfaInfo&&(N=ao._fromServerResponse(wt(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:N},operation:x}})).apply(this,arguments)}function zd(v,g){return ra.apply(this,arguments)}function ra(){return(ra=(0,h.Z)(function*(v,g){const{data:m}=yield Ka((0,j.m9)(v),g);return m.email})).apply(this,arguments)}function ip(v,g,m){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,h.Z)(function*(v,g,m){const E=wt(v),x=yield jr(E,{returnSecureToken:!0,email:g,password:m}),N=yield ii._fromIdTokenResponse(E,"signIn",x);return yield E._updateCurrentUser(N.user),N})).apply(this,arguments)}function Jn(v,g,m){return Qo((0,j.m9)(v),Ga.credential(g,m))}function Ii(v,g,m){return ia.apply(this,arguments)}function ia(){return(ia=(0,h.Z)(function*(v,g,m){const E=(0,j.m9)(v),x={requestType:"EMAIL_SIGNIN",email:g};se(m.handleCodeInApp,E,"argument-error"),m&&Wt(E,x,m),yield ti(E,x)})).apply(this,arguments)}function sa(v,g){return"EMAIL_SIGNIN"===ro.parseLink(g)?.operation}function zi(v,g,m){return rc.apply(this,arguments)}function rc(){return(rc=(0,h.Z)(function*(v,g,m){const E=(0,j.m9)(v),x=Ga.credentialWithLink(g,m||Be());return se(x._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Qo(E,x)})).apply(this,arguments)}function Ju(v,g){return ic.apply(this,arguments)}function ic(){return(ic=(0,h.Z)(function*(v,g){return Lt(v,"POST","/v1/accounts:createAuthUri",zt(v,g))})).apply(this,arguments)}function Gd(v,g){return co.apply(this,arguments)}function co(){return(co=(0,h.Z)(function*(v,g){const E={identifier:g,continueUri:je()?Be():"http://localhost"},{signinMethods:x}=yield Ju((0,j.m9)(v),E);return x||[]})).apply(this,arguments)}function el(v,g){return oa.apply(this,arguments)}function oa(){return(oa=(0,h.Z)(function*(v,g){const m=(0,j.m9)(v),x={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};g&&Wt(m.auth,x,g);const{email:N}=yield ji(m.auth,x);N!==v.email&&(yield v.reload())})).apply(this,arguments)}function tl(v,g,m){return aa.apply(this,arguments)}function aa(){return(aa=(0,h.Z)(function*(v,g,m){const E=(0,j.m9)(v),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:g};m&&Wt(E.auth,N,m);const{email:ne}=yield Wu(E.auth,N);ne!==v.email&&(yield v.reload())})).apply(this,arguments)}function sc(v,g){return ho.apply(this,arguments)}function ho(){return(ho=(0,h.Z)(function*(v,g){return Lt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Wd(v,g){return ua.apply(this,arguments)}function ua(){return(ua=(0,h.Z)(function*(v,{displayName:g,photoURL:m}){if(void 0===g&&void 0===m)return;const E=(0,j.m9)(v),N={idToken:yield E.getIdToken(),displayName:g,photoUrl:m,returnSecureToken:!0},ne=yield Tt(E,sc(E.auth,N));E.displayName=ne.displayName||null,E.photoURL=ne.photoUrl||null;const Ae=E.providerData.find(({providerId:it})=>"password"===it);Ae&&(Ae.displayName=E.displayName,Ae.photoURL=E.photoURL),yield E._updateTokensIfNecessary(ne)})).apply(this,arguments)}function qd(v,g){return as((0,j.m9)(v),g,null)}function oc(v,g){return as((0,j.m9)(v),null,g)}function as(v,g,m){return us.apply(this,arguments)}function us(){return(us=(0,h.Z)(function*(v,g,m){const{auth:E}=v,N={idToken:yield v.getIdToken(),returnSecureToken:!0};g&&(N.email=g),m&&(N.password=m);const ne=yield Tt(v,za(E,N));yield v._updateTokensIfNecessary(ne,!0)})).apply(this,arguments)}class Mn{constructor(g,m,E={}){this.isNewUser=g,this.providerId=m,this.profile=E}}class Gi extends Mn{constructor(g,m,E,x){super(g,m,E),this.username=x}}class Rn extends Mn{constructor(g,m){super(g,"facebook.com",m)}}class uc extends Gi{constructor(g,m){super(g,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class nl extends Mn{constructor(g,m){super(g,"google.com",m)}}class Zd extends Gi{constructor(g,m,E){super(g,"twitter.com",m,E)}}function rl(v){const{user:g,_tokenResponse:m}=v;return g.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function ac(v){var g,m;if(!v)return null;const{providerId:E}=v,x=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},N=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&v?.idToken){const ne=null===(m=null===(g=mt(v.idToken))||void 0===g?void 0:g.firebase)||void 0===m?void 0:m.sign_in_provider;if(ne)return new Mn(N,"anonymous"!==ne&&"custom"!==ne?ne:null)}if(!E)return null;switch(E){case"facebook.com":return new Rn(N,x);case"github.com":return new uc(N,x);case"google.com":return new nl(N,x);case"twitter.com":return new Zd(N,x,v.screenName||null);case"custom":case"anonymous":return new Mn(N,null);default:return new Mn(N,E,x)}}(m)}class oi{constructor(g,m,E){this.type=g,this.credential=m,this.auth=E}static _fromIdtoken(g,m){return new oi("enroll",g,m)}static _fromMfaPendingCredential(g){return new oi("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var m,E;if(g?.multiFactorSession){if(null!==(m=g.multiFactorSession)&&void 0!==m&&m.pendingCredential)return oi._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(E=g.multiFactorSession)&&void 0!==E&&E.idToken)return oi._fromIdtoken(g.multiFactorSession.idToken)}return null}}class ol{constructor(g,m,E){this.session=g,this.hints=m,this.signInResolver=E}static _fromError(g,m){const E=wt(g),x=m.customData._serverResponse,N=(x.mfaInfo||[]).map(Ae=>ao._fromServerResponse(E,Ae));se(x.mfaPendingCredential,E,"internal-error");const ne=oi._fromMfaPendingCredential(x.mfaPendingCredential);return new ol(ne,N,function(){var Ae=(0,h.Z)(function*(it){const Et=yield it._process(E,ne);delete x.mfaInfo,delete x.mfaPendingCredential;const Gt=Object.assign(Object.assign({},x),{idToken:Et.idToken,refreshToken:Et.refreshToken});switch(m.operationType){case"signIn":const Tn=yield ii._fromIdTokenResponse(E,m.operationType,Gt);return yield E._updateCurrentUser(Tn.user),Tn;case"reauthenticate":return se(m.user,E,"internal-error"),ii._forOperation(m.user,m.operationType,Gt);default:Xe(E,"internal-error")}});return function(it){return Ae.apply(this,arguments)}}())}resolveSignIn(g){var m=this;return(0,h.Z)(function*(){return m.signInResolver(g)})()}}function dc(v,g){var m;const E=(0,j.m9)(v),x=g;return se(g.customData.operationType,E,"argument-error"),se(null===(m=x.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),ol._fromError(E,x)}function Vn(v,g){return Lt(v,"POST","/v2/accounts/mfaEnrollment:start",zt(v,g))}class Ja{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>ao._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new Ja(g)}getSession(){var g=this;return(0,h.Z)(function*(){return oi._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,m){var E=this;return(0,h.Z)(function*(){const x=g,N=yield E.getSession(),ne=yield Tt(E.user,x._process(E.user.auth,N,m));return yield E.user._updateTokensIfNecessary(ne),E.user.reload()})()}unenroll(g){var m=this;return(0,h.Z)(function*(){var E;const x="string"==typeof g?g:g.uid,N=yield m.user.getIdToken(),ne=yield Tt(m.user,function Xa(v,g){return Lt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",zt(v,g))}(m.user.auth,{idToken:N,mfaEnrollmentId:x}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Ae})=>Ae!==x),yield m.user._updateTokensIfNecessary(ne);try{yield m.user.reload()}catch(Ae){if("auth/user-token-expired"!==(null===(E=Ae)||void 0===E?void 0:E.code))throw Ae}})()}}const Kd=new WeakMap;function eu(v){const g=(0,j.m9)(v);return Kd.has(g)||Kd.set(g,Ja._fromUser(g)),Kd.get(g)}const Wi="__sak";class la{constructor(g,m){this.storageRetriever=g,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Wi,"1"),this.storage.removeItem(Wi),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,m){return this.storage.setItem(g,JSON.stringify(m)),Promise.resolve()}_get(g){const m=this.storage.getItem(g);return Promise.resolve(m?JSON.parse(m):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const er=(()=>{class v extends la{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function al(){const v=(0,j.z$)();return V(v)||Ve(v)}()&&function Bi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=cn(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const x=this.storage.getItem(E),N=this.localCache[E];x!==N&&m(E,N,x)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((Ae,it,Et)=>{this.notifyListeners(Ae,Et)});const x=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ae=this.storage.getItem(x);if(m.newValue!==Ae)null!==m.newValue?this.storage.setItem(x,m.newValue):this.storage.removeItem(x);else if(this.localCache[x]===m.newValue&&!E)return}const N=()=>{const Ae=this.storage.getItem(x);!E&&this.localCache[x]===Ae||this.notifyListeners(x,Ae)},ne=this.storage.getItem(x);!function Pt(){return(0,j.w1)()&&10===document.documentMode}()||ne===m.newValue||m.newValue===m.oldValue?N():setTimeout(N,10)}notifyListeners(m,E){this.localCache[m]=E;const x=this.listeners[m];if(x)for(const N of Array.from(x))N(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var x=()=>super._set,N=this;return(0,h.Z)(function*(){yield x().call(N,m,E),N.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,x=this;return(0,h.Z)(function*(){const N=yield E().call(x,m);return x.localCache[m]=JSON.stringify(N),N})()}_remove(m){var E=()=>super._remove,x=this;return(0,h.Z)(function*(){yield E().call(x,m),delete x.localCache[m]})()}}return v.type="LOCAL",v})(),ls=(()=>{class v extends la{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return v.type="SESSION",v})();let da=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(N=>N.isListeningto(m));if(E)return E;const x=new v(m);return this.receivers.push(x),x}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,h.Z)(function*(){const x=m,{eventId:N,eventType:ne,data:Ae}=x.data,it=E.handlersMap[ne];if(!it?.size)return;x.ports[0].postMessage({status:"ack",eventId:N,eventType:ne});const Et=Array.from(it).map(function(){var Tn=(0,h.Z)(function*(ai){return ai(x.origin,Ae)});return function(ai){return Tn.apply(this,arguments)}}()),Gt=yield function ul(v){return Promise.all(v.map(function(){var g=(0,h.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return g.apply(this,arguments)}}()))}(Et);x.ports[0].postMessage({status:"done",eventId:N,eventType:ne,response:Gt})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function mo(v="",g=10){let m="";for(let E=0;E<g;E++)m+=Math.floor(10*Math.random());return v+m}class Xd{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,m,E=50){var x=this;return(0,h.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let ne,Ae;return new Promise((it,Et)=>{const Gt=mo("",20);N.port1.start();const Tn=setTimeout(()=>{Et(new Error("unsupported_event"))},E);Ae={messageChannel:N,onMessage(ai){const hu=ai;if(hu.data.eventId===Gt)switch(hu.data.status){case"ack":clearTimeout(Tn),ne=setTimeout(()=>{Et(new Error("timeout"))},3e3);break;case"done":clearTimeout(ne),it(hu.data.response);break;default:clearTimeout(Tn),clearTimeout(ne),Et(new Error("invalid_response"))}}},x.handlers.add(Ae),N.port1.addEventListener("message",Ae.onMessage),x.target.postMessage({eventType:g,eventId:Gt,data:m},[N.port2])}).finally(()=>{Ae&&x.removeMessageHandler(Ae)})})()}}function Bn(){return window}function $r(){return typeof Bn().WorkerGlobalScope<"u"&&"function"==typeof Bn().importScripts}function qi(){return(qi=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ha="firebaseLocalStorageDb",fa="firebaseLocalStorage",yo="fbase_key";class _o{constructor(g){this.request=g}toPromise(){return new Promise((g,m)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function vo(v,g){return v.transaction([fa],g?"readwrite":"readonly").objectStore(fa)}function nu(){const v=indexedDB.open(ha,1);return new Promise((g,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(fa,{keyPath:yo})}catch(x){m(x)}}),v.addEventListener("success",(0,h.Z)(function*(){const E=v.result;E.objectStoreNames.contains(fa)?g(E):(E.close(),yield function gc(){const v=indexedDB.deleteDatabase(ha);return new _o(v).toPromise()}(),g(yield nu()))}))})}function pa(v,g,m){return Di.apply(this,arguments)}function Di(){return(Di=(0,h.Z)(function*(v,g,m){const E=vo(v,!0).put({[yo]:g,value:m});return new _o(E).toPromise()})).apply(this,arguments)}function wo(){return(wo=(0,h.Z)(function*(v,g){const m=vo(v,!1).get(g),E=yield new _o(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function ru(v,g){const m=vo(v,!0).delete(g);return new _o(m).toPromise()}const bo=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,h.Z)(function*(){return m.db||(m.db=yield nu()),m.db})()}_withRetries(m){var E=this;return(0,h.Z)(function*(){let x=0;for(;;)try{const N=yield E._openDb();return yield m(N)}catch(N){if(x++>3)throw N;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,h.Z)(function*(){return $r()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,h.Z)(function*(){m.receiver=da._getInstance(function tu(){return $r()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,h.Z)(function*(x,N){return{keyProcessed:(yield m._poll()).includes(N.key)}});return function(x,N){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,h.Z)(function*(x,N){return["keyChanged"]});return function(x,N){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,h.Z)(function*(){var E,x;if(m.activeServiceWorker=yield function pc(){return qi.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Xd(m.activeServiceWorker);const N=yield m.sender._send("ping",{},800);!N||(null===(E=N[0])||void 0===E?void 0:E.fulfilled)&&(null===(x=N[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,h.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function ll(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const m=yield nu();return yield pa(m,Wi,"1"),yield ru(m,Wi),!0}catch{}return!1})()}_withPendingWrite(m){var E=this;return(0,h.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var x=this;return(0,h.Z)(function*(){return x._withPendingWrite((0,h.Z)(function*(){return yield x._withRetries(N=>pa(N,m,E)),x.localCache[m]=E,x.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,h.Z)(function*(){const x=yield E._withRetries(N=>function Jd(v,g){return wo.apply(this,arguments)}(N,m));return E.localCache[m]=x,x})()}_remove(m){var E=this;return(0,h.Z)(function*(){return E._withPendingWrite((0,h.Z)(function*(){return yield E._withRetries(x=>ru(x,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,h.Z)(function*(){const E=yield m._withRetries(ne=>{const Ae=vo(ne,!1).getAll();return new _o(Ae).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const x=[],N=new Set;for(const{fbase_key:ne,value:Ae}of E)N.add(ne),JSON.stringify(m.localCache[ne])!==JSON.stringify(Ae)&&(m.notifyListeners(ne,Ae),x.push(ne));for(const ne of Object.keys(m.localCache))m.localCache[ne]&&!N.has(ne)&&(m.notifyListeners(ne,null),x.push(ne));return x})()}notifyListeners(m,E){this.localCache[m]=E;const x=this.listeners[m];if(x)for(const N of Array.from(x))N(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function eh(v,g){return Lt(v,"POST","/v2/accounts/mfaSignIn:start",zt(v,g))}function wr(){return(wr=(0,h.Z)(function*(v){return(yield Lt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Fs(v){return new Promise((g,m)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=g,E.onerror=x=>{const N=Ne("internal-error");N.customData=x,m(N)},E.type="text/javascript",E.charset="UTF-8",function Io(){var v,g;return null!==(g=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==g?g:document}().appendChild(E)})}function Do(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Si=1e12;class mc{constructor(g){this.auth=g,this.counter=Si,this._widgets=new Map}render(g,m){const E=this.counter;return this._widgets.set(E,new In(g,this.auth.name,m||{})),this.counter++,E}reset(g){var m;const E=g||Si;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(g){var m;return(null===(m=this._widgets.get(g||Si))||void 0===m?void 0:m.getResponse())||""}execute(g){var m=this;return(0,h.Z)(function*(){var E;return null===(E=m._widgets.get(g||Si))||void 0===E||E.execute(),""})()}}class In{constructor(g,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof g?document.getElementById(g):g;se(x,"argument-error",{appName:m}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function sp(v){const g=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<v;E++)g.push(m.charAt(Math.floor(Math.random()*m.length)));return g.join("")}(50);const{callback:g,"expired-callback":m}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const th=Do("rcb"),iw=new Ze(3e4,6e4);class Vm{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=Bn().grecaptcha)||void 0===g||!g.render)}load(g,m=""){return se(function nh(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),g,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Bn().grecaptcha):new Promise((E,x)=>{const N=Bn().setTimeout(()=>{x(Ne(g,"network-request-failed"))},iw.get());Bn()[th]=()=>{Bn().clearTimeout(N),delete Bn()[th];const Ae=Bn().grecaptcha;if(!Ae)return void x(Ne(g,"internal-error"));const it=Ae.render;Ae.render=(Et,Gt)=>{const Tn=it(Et,Gt);return this.counter++,Tn},this.hostLanguage=m,E(Ae)},Fs(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:th,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(N),x(Ne(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var m;return!(null===(m=Bn().grecaptcha)||void 0===m||!m.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class sw{load(g){return(0,h.Z)(function*(){return new mc(g)})()}clearedOneInstance(){}}const su="recaptcha",ow={theme:"light",type:"image"};class Bm{constructor(g,m=Object.assign({},ow),E){this.parameters=m,this.type=su,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=wt(E),this.isInvisible="invisible"===this.parameters.size,se(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof g?document.getElementById(g):g;se(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new sw:new Vm,this.validateStartingState()}verify(){var g=this;return(0,h.Z)(function*(){g.assertNotDestroyed();const m=yield g.render(),E=g.getAssertedRecaptcha();return E.getResponse(m)||new Promise(N=>{const ne=Ae=>{!Ae||(g.tokenChangeListeners.delete(ne),N(Ae))};g.tokenChangeListeners.add(ne),g.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){se(!this.parameters.sitekey,this.auth,"argument-error"),se(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),se(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof g)g(m);else if("string"==typeof g){const E=Bn()[g];"function"==typeof E&&E(m)}}}assertNotDestroyed(){se(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,h.Z)(function*(){if(yield g.init(),!g.widgetId){let m=g.container;if(!g.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}g.widgetId=g.getAssertedRecaptcha().render(m,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,h.Z)(function*(){se(je()&&!$r(),g.auth,"internal-error"),yield function pr(){let v=null;return new Promise(g=>{"complete"!==document.readyState?(v=()=>g(),window.addEventListener("load",v)):g()}).catch(g=>{throw v&&window.removeEventListener("load",v),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const m=yield function iu(v){return wr.apply(this,arguments)}(g.auth);se(m,g.auth,"internal-error"),g.parameters.sitekey=m})()}getAssertedRecaptcha(){return se(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class gn{constructor(g,m){this.verificationId=g,this.onConfirmation=m}confirm(g){const m=no._fromVerification(this.verificationId,g);return this.onConfirmation(m)}}function or(v,g,m){return hl.apply(this,arguments)}function hl(){return(hl=(0,h.Z)(function*(v,g,m){const E=wt(v),x=yield _n(E,g,(0,j.m9)(m));return new gn(x,N=>Qo(E,N))})).apply(this,arguments)}function rh(v,g,m){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,h.Z)(function*(v,g,m){const E=(0,j.m9)(v);yield Ci(!1,E,"phone");const x=yield _n(E.auth,g,(0,j.m9)(m));return new gn(x,N=>Ot(E,N))})).apply(this,arguments)}function Zi(v,g,m){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,h.Z)(function*(v,g,m){const E=(0,j.m9)(v),x=yield _n(E.auth,g,(0,j.m9)(m));return new gn(x,N=>np(E,N))})).apply(this,arguments)}function _n(v,g,m){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,h.Z)(function*(v,g,m){var E;const x=yield m.verify();try{let N;if(se("string"==typeof x,v,"argument-error"),se(m.type===su,v,"argument-error"),N="string"==typeof g?{phoneNumber:g}:g,"session"in N){const ne=N.session;if("phoneNumber"in N)return se("enroll"===ne.type,v,"internal-error"),(yield Vn(v,{idToken:ne.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{se("signin"===ne.type,v,"internal-error");const Ae=(null===(E=N.multiFactorHint)||void 0===E?void 0:E.uid)||N.multiFactorUid;return se(Ae,v,"missing-multi-factor-info"),(yield eh(v,{mfaPendingCredential:ne.credential,mfaEnrollmentId:Ae,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ne}=yield Qf(v,{phoneNumber:N.phoneNumber,recaptchaToken:x});return ne}}finally{m._reset()}})).apply(this,arguments)}function ih(v,g){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,h.Z)(function*(v,g){yield qa((0,j.m9)(v),g)})).apply(this,arguments)}let Dn=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=wt(m)}verifyPhoneNumber(m,E){return _n(this.auth,m,(0,j.m9)(E))}static credential(m,E){return no._fromVerification(m,E)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:x}=m;return E&&x?no._fromTokenResponse(E,x):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function ot(v,g){return g?ee(g):(se(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Er extends Br{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Ms(g,this._buildIdpRequest())}_linkToIdToken(g,m){return Ms(g,this._buildIdpRequest(m))}_getReauthenticationResolver(g){return Ms(g,this._buildIdpRequest())}_buildIdpRequest(g){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(m.idToken=g),m}}function Ki(v){return Xu(v.auth,new Er(v),v.bypassAuthState)}function on(v){const{auth:g,user:m}=v;return se(m,g,"internal-error"),Qu(m,new Er(v),v.bypassAuthState)}function fl(v){return tr.apply(this,arguments)}function tr(){return(tr=(0,h.Z)(function*(v){const{auth:g,user:m}=v;return se(m,g,"internal-error"),qa(m,new Er(v),v.bypassAuthState)})).apply(this,arguments)}class pt{constructor(g,m,E,x,N=!1){this.auth=g,this.resolver=E,this.user=x,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var g=this;return new Promise(function(){var m=(0,h.Z)(function*(E,x){g.pendingPromise={resolve:E,reject:x};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(N){g.reject(N)}});return function(E,x){return m.apply(this,arguments)}}())}onAuthEvent(g){var m=this;return(0,h.Z)(function*(){const{urlResponse:E,sessionId:x,postBody:N,tenantId:ne,error:Ae,type:it}=g;if(Ae)return void m.reject(Ae);const Et={auth:m.auth,requestUri:E,sessionId:x,tenantId:ne||void 0,postBody:N||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(it)(Et))}catch(Gt){m.reject(Gt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Ki;case"linkViaPopup":case"linkViaRedirect":return fl;case"reauthViaPopup":case"reauthViaRedirect":return on;default:Xe(this.auth,"internal-error")}}resolve(g){ve(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){ve(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ou=new Ze(2e3,1e4);function pl(v,g,m){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,h.Z)(function*(v,g,m){const E=wt(v);Ce(v,g,gr);const x=ot(E,m);return new ma(E,"signInViaPopup",g,x).executeNotNull()})).apply(this,arguments)}function gl(v,g,m){return ga.apply(this,arguments)}function ga(){return(ga=(0,h.Z)(function*(v,g,m){const E=(0,j.m9)(v);Ce(E.auth,g,gr);const x=ot(E.auth,m);return new ma(E.auth,"reauthViaPopup",g,x,E).executeNotNull()})).apply(this,arguments)}function op(v,g,m){return au.apply(this,arguments)}function au(){return(au=(0,h.Z)(function*(v,g,m){const E=(0,j.m9)(v);Ce(E.auth,g,gr);const x=ot(E.auth,m);return new ma(E.auth,"linkViaPopup",g,x,E).executeNotNull()})).apply(this,arguments)}let ma=(()=>{class v extends pt{constructor(m,E,x,N,ne){super(m,E,N,ne),this.provider=x,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,h.Z)(function*(){const E=yield m.execute();return se(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,h.Z)(function*(){ve(1===m.filter.length,"Popup operations only handle one event");const E=mo();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(x=>{m.reject(x)}),m.resolver._isIframeWebStorageSupported(m.auth,x=>{x||m.reject(Ne(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ne(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,x;this.pollId=null!==(x=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ne(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,ou.get())};m()}}return v.currentPopupAction=null,v})();const lu=new Map;class Ai extends pt{constructor(g,m,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,m=this;return(0,h.Z)(function*(){let E=lu.get(m.auth._key());if(!E){try{const N=(yield function ya(v,g){return xi.apply(this,arguments)}(m.resolver,m.auth))?yield g().call(m):null;E=()=>Promise.resolve(N)}catch(x){E=()=>Promise.reject(x)}lu.set(m.auth._key(),E)}return m.bypassAuthState||lu.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var m=()=>super.onAuthEvent,E=this;return(0,h.Z)(function*(){if("signInViaRedirect"===g.type)return m().call(E,g);if("unknown"!==g.type){if(g.eventId){const x=yield E.auth._redirectUserForId(g.eventId);if(x)return E.user=x,m().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function xi(){return(xi=(0,h.Z)(function*(v,g){const m=va(g),E=_a(v);if(!(yield E._isAvailable()))return!1;const x="true"===(yield E._get(m));return yield E._remove(m),x})).apply(this,arguments)}function Us(v,g){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,h.Z)(function*(v,g){return _a(v)._set(va(g),"true")})).apply(this,arguments)}function yc(){lu.clear()}function Qi(v,g){lu.set(v._key(),g)}function _a(v){return ee(v._redirectPersistence)}function va(v){return $("pendingRedirect",v.config.apiKey,v.name)}function _c(v,g,m){return function Nn(v,g,m){return js.apply(this,arguments)}(v,g,m)}function js(){return(js=(0,h.Z)(function*(v,g,m){const E=wt(v);Ce(v,g,gr);const x=ot(E,m);return yield Us(x,E),x._openRedirect(E,g,"signInViaRedirect")})).apply(this,arguments)}function ml(v,g,m){return function I(v,g,m){return D.apply(this,arguments)}(v,g,m)}function D(){return(D=(0,h.Z)(function*(v,g,m){const E=(0,j.m9)(v);Ce(E.auth,g,gr);const x=ot(E.auth,m);yield Us(x,E.auth);const N=yield Mt(E);return x._openRedirect(E.auth,g,"reauthViaRedirect",N)})).apply(this,arguments)}function R(v,g,m){return function B(v,g,m){return Q.apply(this,arguments)}(v,g,m)}function Q(){return(Q=(0,h.Z)(function*(v,g,m){const E=(0,j.m9)(v);Ce(E.auth,g,gr);const x=ot(E.auth,m);yield Ci(!1,E,g.providerId),yield Us(x,E.auth);const N=yield Mt(E);return x._openRedirect(E.auth,g,"linkViaRedirect",N)})).apply(this,arguments)}function de(v,g){return xe.apply(this,arguments)}function xe(){return(xe=(0,h.Z)(function*(v,g){return yield wt(v)._initializationPromise,qe(v,g,!1)})).apply(this,arguments)}function qe(v,g){return _t.apply(this,arguments)}function _t(){return(_t=(0,h.Z)(function*(v,g,m=!1){const E=wt(v),x=ot(E,g),ne=yield new Ai(E,x,m).execute();return ne&&!m&&(delete ne.user._redirectEventId,yield E._persistUserIfCurrent(ne.user),yield E._setRedirectUser(null,g)),ne})).apply(this,arguments)}function Mt(v){return ht.apply(this,arguments)}function ht(){return(ht=(0,h.Z)(function*(v){const g=mo(`${v.uid}:::`);return v._redirectEventId=g,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),g})).apply(this,arguments)}class Gn{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(m=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Ea(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wa(v);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=g,m=!0)),m}sendToConsumer(g,m){var E;if(g.error&&!wa(g)){const x=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(Ne(this.auth,x))}else m.onAuthEvent(g)}isEventForConsumer(g,m){const E=null===m.eventId||!!g.eventId&&g.eventId===m.eventId;return m.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(br(g))}saveEventToCache(g){this.cachedEventUids.add(br(g)),this.lastProcessedEventTime=Date.now()}}function br(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(g=>g).join("-")}function wa({type:v,error:g}){return"unknown"===v&&"auth/no-auth-event"===g?.code}function Hr(v){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,h.Z)(function*(v,g={}){return Lt(v,"GET","/v1/projects",g)})).apply(this,arguments)}const ba=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zr=/^https?/;function Gr(){return(Gr=(0,h.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:g}=yield Hr(v);for(const m of g)try{if(vc(m))return}catch{}Xe(v,"unauthorized-domain")})).apply(this,arguments)}function vc(v){const g=Be(),{protocol:m,hostname:E}=new URL(g);if(v.startsWith("chrome-extension://")){const ne=new URL(v);return""===ne.hostname&&""===E?"chrome-extension:"===m&&v.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===m&&ne.hostname===E}if(!zr.test(m))return!1;if(ba.test(v))return E===v;const x=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(E)}const aw=new Ze(3e4,6e4);function cu(){const v=Bn().___jsl;if(v?.H)for(const g of Object.keys(v.H))if(v.H[g].r=v.H[g].r||[],v.H[g].L=v.H[g].L||[],v.H[g].r=[...v.H[g].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let To=null;function yl(v){return To=To||function Um(v){return new Promise((g,m)=>{var E,x,N;function ne(){cu(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{cu(),m(Ne(v,"network-request-failed"))},timeout:aw.get()})}if(null!==(x=null===(E=Bn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==x&&x.Iframe)g(gapi.iframes.getContext());else{if(null===(N=Bn().gapi)||void 0===N||!N.load){const Ae=Do("iframefcb");return Bn()[Ae]=()=>{gapi.load?ne():m(Ne(v,"network-request-failed"))},Fs(`https://apis.google.com/js/api.js?onload=${Ae}`).catch(it=>m(it))}ne()}}).catch(g=>{throw To=null,g})}(v),To}const Ca=new Ze(5e3,15e3),wc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sh(v){const g=v.config;se(g.authDomain,v,"auth-domain-config-required");const m=g.emulator?un(g,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,E={apiKey:g.apiKey,appName:v.name,v:P.SDK_VERSION},x=uw.get(v.config.apiHost);x&&(E.eid=x);const N=v._getFrameworks();return N.length&&(E.fw=N.join(",")),`${m}?${(0,j.xO)(E).slice(1)}`}function ds(){return ds=(0,h.Z)(function*(v){const g=yield yl(v),m=Bn().gapi;return se(m,v,"internal-error"),g.open({where:document.body,url:sh(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wc,dontclear:!0},E=>new Promise(function(){var x=(0,h.Z)(function*(N,ne){yield E.restyle({setHideOnLeave:!1});const Ae=Ne(v,"network-request-failed"),it=Bn().setTimeout(()=>{ne(Ae)},Ca.get());function Et(){Bn().clearTimeout(it),N(E)}E.ping(Et).then(Et,()=>{ne(Ae)})});return function(N,ne){return x.apply(this,arguments)}}()))}),ds.apply(this,arguments)}const _l={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class uh{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ch(v,g,m,E,x,N){se(v.config.authDomain,v,"auth-domain-config-required"),se(v.config.apiKey,v,"invalid-api-key");const ne={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:E,v:P.SDK_VERSION,eventId:x};if(g instanceof gr){g.setDefaultLanguage(v.languageCode),ne.providerId=g.providerId||"",(0,j.xb)(g.getCustomParameters())||(ne.customParameters=JSON.stringify(g.getCustomParameters()));for(const[it,Et]of Object.entries(N||{}))ne[it]=Et}if(g instanceof io){const it=g.getScopes().filter(Et=>""!==Et);it.length>0&&(ne.scopes=it.join(","))}v.tenantId&&(ne.tid=v.tenantId);const Ae=ne;for(const it of Object.keys(Ae))void 0===Ae[it]&&delete Ae[it];return`${function Gm({config:v}){return v.emulator?un(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,j.xO)(Ae).slice(1)}`}const up="webStorageSupport",lp=class lw{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ls,this._completeRedirectFn=qe,this._overrideRedirectResult=Qi}_openPopup(g,m,E,x){var N=this;return(0,h.Z)(function*(){var ne;ve(null===(ne=N.eventManagers[g._key()])||void 0===ne?void 0:ne.manager,"_initialize() not called before _openPopup()");const Ae=ch(g,m,E,Be(),x);return function lh(v,g,m,E=500,x=600){const N=Math.max((window.screen.availHeight-x)/2,0).toString(),ne=Math.max((window.screen.availWidth-E)/2,0).toString();let Ae="";const it=Object.assign(Object.assign({},_l),{width:E.toString(),height:x.toString(),top:N,left:ne}),Et=(0,j.z$)().toLowerCase();m&&(Ae=re(Et)?"_blank":m),O(Et)&&(g=g||"http://localhost",it.scrollbars="yes");const Gt=Object.entries(it).reduce((ai,[hu,dh])=>`${ai}${hu}=${dh},`,"");if(function ln(v=(0,j.z$)()){var g;return Ve(v)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(Et)&&"_self"!==Ae)return function vl(v,g){const m=document.createElement("a");m.href=v,m.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(g||"",Ae),new uh(null);const Tn=window.open(g||"",Ae,Gt);se(Tn,v,"popup-blocked");try{Tn.focus()}catch{}return new uh(Tn)}(g,Ae,mo())})()}_openRedirect(g,m,E,x){var N=this;return(0,h.Z)(function*(){return yield N._originValidation(g),function fc(v){Bn().location.href=v}(ch(g,m,E,Be(),x)),new Promise(()=>{})})()}_initialize(g){const m=g._key();if(this.eventManagers[m]){const{manager:x,promise:N}=this.eventManagers[m];return x?Promise.resolve(x):(ve(N,"If manager is not set, promise should be"),N)}const E=this.initAndGetManager(g);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(g){var m=this;return(0,h.Z)(function*(){const E=yield function oh(v){return ds.apply(this,arguments)}(g),x=new Gn(g);return E.register("authEvent",N=>(se(N?.authEvent,g,"invalid-auth-event"),{status:x.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[g._key()]={manager:x},m.iframes[g._key()]=E,x})()}_isIframeWebStorageSupported(g,m){this.iframes[g._key()].send(up,{type:up},x=>{var N;const ne=null===(N=x?.[0])||void 0===N?void 0:N[up];void 0!==ne&&m(!!ne),Xe(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function $s(v){return Gr.apply(this,arguments)}(g)),this.originValidationPromises[m]}get _shouldInitProactively(){return cn()||V()||Ve()}};class cp extends class Wm{constructor(g){this.factorId=g}_process(g,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(g,m.credential,E);case"signin":return this._finalizeSignIn(g,m.credential);default:return he("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new cp(g)}_finalizeEnroll(g,m,E){return function Qa(v,g){return Lt(v,"POST","/v2/accounts/mfaEnrollment:finalize",zt(v,g))}(g,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,m){return function Co(v,g){return Lt(v,"POST","/v2/accounts/mfaSignIn:finalize",zt(v,g))}(g,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ao=(()=>{class v{constructor(){}static assertion(m){return cp._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var Ia="@firebase/auth";class VC{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var m=this;return(0,h.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const m=this.auth.onIdTokenChanged(E=>{var x;g((null===(x=E)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,m),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const m=this.internalListeners.get(g);!m||(this.internalListeners.delete(g),m(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const $C=(0,j.Pz)("authIdTokenMaxAge")||300;let dp=null;const cw=v=>function(){var g=(0,h.Z)(function*(m){const E=m&&(yield m.getIdTokenResult()),x=E&&((new Date).getTime()-Date.parse(E.issuedAtTime))/1e3;if(x&&x>$C)return;const N=E?.token;dp!==N&&(dp=N,yield fetch(v,{method:N?"POST":"DELETE",headers:N?{Authorization:`Bearer ${N}`}:{}}))});return function(m){return g.apply(this,arguments)}}();function dw(v=(0,P.getApp)()){const g=(0,P._getProvider)(v,"auth");if(g.isInitialized())return g.getImmediate();const m=function pe(v,g){const m=(0,P._getProvider)(v,"auth");if(m.isInitialized()){const x=m.getImmediate(),N=m.getOptions();if((0,j.vZ)(N,g??{}))return x;Xe(x,"already-initialized")}return m.initialize({options:g})}(v,{popupRedirectResolver:lp,persistence:[bo,er,ls]}),E=(0,j.Pz)("authTokenSyncURL");if(E){const N=cw(E);(function Ya(v,g,m){(0,j.m9)(v).beforeAuthStateChanged(g,m)})(m,N,()=>N(m.currentUser)),function sl(v,g,m,E){(0,j.m9)(v).onIdTokenChanged(g,m,E)}(m,ne=>N(ne))}const x=(0,j.q4)("auth");return x&&Ss(m,`http://${x}`),m}!function UC(v){(0,P._registerComponent)(new ye.wA("auth",(g,{options:m})=>{const E=g.getProvider("app").getImmediate(),x=g.getProvider("heartbeat"),{apiKey:N,authDomain:ne}=E.options;return((Ae,it)=>{se(N&&!N.includes(":"),"invalid-api-key",{appName:Ae.name}),se(!ne?.includes(":"),"argument-error",{appName:Ae.name});const Et={apiKey:N,authDomain:ne,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Cn(v)},Gt=new Js(Ae,it,Et);return function ae(v,g){const m=g?.persistence||[],E=(Array.isArray(m)?m:[m]).map(ee);g?.errorMap&&v._updateErrorMap(g.errorMap),v._initializeWithPersistence(E,g?.popupRedirectResolver)}(Gt,m),Gt})(E,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,m,E)=>{g.getProvider("auth-internal").initialize()})),(0,P._registerComponent)(new ye.wA("auth-internal",g=>{const m=wt(g.getProvider("auth").getImmediate());return new VC(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,P.registerVersion)(Ia,"0.20.9",function BC(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,P.registerVersion)(Ia,"0.20.9","esm2017")}("Browser")},2090:(dt,Se,F)=>{F.d(Se,{$s:()=>rt,BH:()=>$t,G6:()=>Ce,L:()=>fe,LL:()=>Jt,P0:()=>je,Pz:()=>tn,Sg:()=>Ze,UG:()=>Ie,US:()=>ye,ZB:()=>G,ZR:()=>wn,aH:()=>vt,b$:()=>ge,eu:()=>se,hl:()=>We,jU:()=>st,m9:()=>Yt,ne:()=>bn,pd:()=>Cs,q4:()=>Be,r3:()=>Ar,ru:()=>we,tV:()=>_e,uI:()=>Pe,vZ:()=>Je,w1:()=>Xe,xO:()=>yn,xb:()=>mi,z$:()=>$e,zI:()=>he,zd:()=>fr});const oe=function(W){const $=[];let Y=0;for(let U=0;U<W.length;U++){let O=W.charCodeAt(U);O<128?$[Y++]=O:O<2048?($[Y++]=O>>6|192,$[Y++]=63&O|128):55296==(64512&O)&&U+1<W.length&&56320==(64512&W.charCodeAt(U+1))?(O=65536+((1023&O)<<10)+(1023&W.charCodeAt(++U)),$[Y++]=O>>18|240,$[Y++]=O>>12&63|128,$[Y++]=O>>6&63|128,$[Y++]=63&O|128):($[Y++]=O>>12|224,$[Y++]=O>>6&63|128,$[Y++]=63&O|128)}return $},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,$){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,U=[];for(let O=0;O<W.length;O+=3){const V=W[O],re=O+1<W.length,Fe=re?W[O+1]:0,at=O+2<W.length,ut=at?W[O+2]:0;let xt=(15&Fe)<<2|ut>>6,ln=63&ut;at||(ln=64,re||(xt=64)),U.push(Y[V>>2],Y[(3&V)<<4|Fe>>4],Y[xt],Y[ln])}return U.join("")},encodeString(W,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(W):this.encodeByteArray(oe(W),$)},decodeString(W,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(W):function(W){const $=[];let Y=0,U=0;for(;Y<W.length;){const O=W[Y++];if(O<128)$[U++]=String.fromCharCode(O);else if(O>191&&O<224){const V=W[Y++];$[U++]=String.fromCharCode((31&O)<<6|63&V)}else if(O>239&&O<365){const at=((7&O)<<18|(63&W[Y++])<<12|(63&W[Y++])<<6|63&W[Y++])-65536;$[U++]=String.fromCharCode(55296+(at>>10)),$[U++]=String.fromCharCode(56320+(1023&at))}else{const V=W[Y++],re=W[Y++];$[U++]=String.fromCharCode((15&O)<<12|(63&V)<<6|63&re)}}return $.join("")}(this.decodeStringToByteArray(W,$))},decodeStringToByteArray(W,$){this.init_();const Y=$?this.charToByteMapWebSafe_:this.charToByteMap_,U=[];for(let O=0;O<W.length;){const V=Y[W.charAt(O++)],Fe=O<W.length?Y[W.charAt(O)]:0;++O;const ut=O<W.length?Y[W.charAt(O)]:64;++O;const Ve=O<W.length?Y[W.charAt(O)]:64;if(++O,null==V||null==Fe||null==ut||null==Ve)throw Error();U.push(V<<2|Fe>>4),64!==ut&&(U.push(Fe<<4&240|ut>>2),64!==Ve&&U.push(ut<<6&192|Ve))}return U},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}},fe=function(W){return function(W){const $=oe(W);return ye.encodeByteArray($,!0)}(W).replace(/\./g,"")},_e=function(W){try{return ye.decodeString(W,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function G(W,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return $}for(const Y in $)!$.hasOwnProperty(Y)||!J(Y)||(W[Y]=G(W[Y],$[Y]));return W}function J(W){return"__proto__"!==W}function $e(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Pe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function Ie(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function st(){return"object"==typeof self&&self.self===self}function we(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function ge(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Xe(){const W=$e();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function Ce(){return!Ie()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function We(){return"object"==typeof indexedDB}function se(){return new Promise((W,$)=>{try{let Y=!0;const U="validate-browser-context-for-indexeddb-analytics-module",O=self.indexedDB.open(U);O.onsuccess=()=>{O.result.close(),Y||self.indexedDB.deleteDatabase(U),W(!0)},O.onupgradeneeded=()=>{Y=!1},O.onerror=()=>{var V;$((null===(V=O.error)||void 0===V?void 0:V.message)||"")}}catch(Y){$(Y)}})}function he(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ae=()=>function ve(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const W=process.env.__FIREBASE_DEFAULTS__;return W?JSON.parse(W):void 0})()||(()=>{if(typeof document>"u")return;const W=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/),$=W&&_e(W[1]);return $&&JSON.parse($)})(),Be=W=>{var $,Y;return null===(Y=null===($=ae())||void 0===$?void 0:$.emulatorHosts)||void 0===Y?void 0:Y[W]},je=W=>{const $=Be(W);if(!$)return;const Y=$.lastIndexOf(":");if(Y<=0||Y+1===$.length)throw new Error(`Invalid host ${$} with no separate hostname and port!`);const U=parseInt($.substring(Y+1),10);return"["===$[0]?[$.substring(1,Y-1),U]:[$.substring(0,Y),U]},vt=()=>{var W;return null===(W=ae())||void 0===W?void 0:W.config},tn=W=>{var $;return null===($=ae())||void 0===$?void 0:$[`_${W}`]};class $t{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,Y)=>{this.resolve=$,this.reject=Y})}wrapCallback($){return(Y,U)=>{Y?this.reject(Y):this.resolve(U),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(Y):$(Y,U))}}}function Ze(W,$){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const U=$||"demo-project",O=W.iat||0,V=W.sub||W.user_id;if(!V)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const re=Object.assign({iss:`https://securetoken.google.com/${U}`,aud:U,iat:O,exp:O+3600,auth_time:O,sub:V,user_id:V,firebase:{sign_in_provider:"custom",identities:{}}},W);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(re)),""].join(".")}class wn extends Error{constructor($,Y,U){super(Y),this.code=$,this.customData=U,this.name="FirebaseError",Object.setPrototypeOf(this,wn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jt.prototype.create)}}class Jt{constructor($,Y,U){this.service=$,this.serviceName=Y,this.errors=U}create($,...Y){const U=Y[0]||{},O=`${this.service}/${$}`,V=this.errors[$],re=V?function en(W,$){return W.replace(zt,(Y,U)=>{const O=$[U];return null!=O?String(O):`<${U}?>`})}(V,U):"Error";return new wn(O,`${this.serviceName}: ${re} (${O}).`,U)}}const zt=/\{\$([^}]+)}/g;function Ar(W,$){return Object.prototype.hasOwnProperty.call(W,$)}function mi(W){for(const $ in W)if(Object.prototype.hasOwnProperty.call(W,$))return!1;return!0}function Je(W,$){if(W===$)return!0;const Y=Object.keys(W),U=Object.keys($);for(const O of Y){if(!U.includes(O))return!1;const V=W[O],re=$[O];if(Kn(V)&&Kn(re)){if(!Je(V,re))return!1}else if(V!==re)return!1}for(const O of U)if(!Y.includes(O))return!1;return!0}function Kn(W){return null!==W&&"object"==typeof W}function yn(W){const $=[];for(const[Y,U]of Object.entries(W))Array.isArray(U)?U.forEach(O=>{$.push(encodeURIComponent(Y)+"="+encodeURIComponent(O))}):$.push(encodeURIComponent(Y)+"="+encodeURIComponent(U));return $.length?"&"+$.join("&"):""}function fr(W){const $={};return W.replace(/^\?/,"").split("&").forEach(U=>{if(U){const[O,V]=U.split("=");$[decodeURIComponent(O)]=decodeURIComponent(V)}}),$}function Cs(W){const $=W.indexOf("?");if(!$)return"";const Y=W.indexOf("#",$);return W.substring($,Y>0?Y:void 0)}function bn(W,$){const Y=new pn(W,$);return Y.subscribe.bind(Y)}class pn{constructor($,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{$(this)}).catch(U=>{this.error(U)})}next($){this.forEachObserver(Y=>{Y.next($)})}error($){this.forEachObserver(Y=>{Y.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,Y,U){let O;if(void 0===$&&void 0===Y&&void 0===U)throw new Error("Missing Observer.");O=function yt(W,$){if("object"!=typeof W||null===W)return!1;for(const Y of $)if(Y in W&&"function"==typeof W[Y])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:Y,complete:U},void 0===O.next&&(O.next=Tt),void 0===O.error&&(O.error=Tt),void 0===O.complete&&(O.complete=Tt);const V=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?O.error(this.finalError):O.complete()}catch{}}),this.observers.push(O),V}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,$)}sendOne($,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{Y(this.observers[$])}catch(U){typeof console<"u"&&console.error&&console.error(U)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Tt(){}function rt(W,$=1e3,Y=2){const U=$*Math.pow(Y,W),O=Math.round(.5*U*(Math.random()-.5)*2);return Math.min(144e5,U+O)}function Yt(W){return W&&W._delegate?W._delegate:W}},9095:(dt,Se,F)=>{var h=F(4650);let j=null;function P(){return j}const ue=new h.OlP("DocumentToken");let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function _e(){return(0,h.LFG)(G)}()},providedIn:"platform"}),n})();const z=new h.OlP("Location Initialized");let G=(()=>{class n extends fe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){J()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){J()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function $e(){return new G((0,h.LFG)(ue))}()},providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function Pe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ie(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function st(n){return n&&"?"!==n[0]?"?"+n:n}let we=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(tt)},providedIn:"root"}),n})();const ge=new h.OlP("appBaseHref");let tt=(()=>{class n extends we{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Pe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+st(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+st(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+st(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fe),h.LFG(ge,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Xe=(()=>{class n extends we{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Pe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+st(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+st(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fe),h.LFG(ge,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ne=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Ie(We(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+st(r))}normalize(t){return n.stripTrailingSlash(function Ce(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,We(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+st(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+st(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=st,n.joinWithSlash=Pe,n.stripTrailingSlash=Ie,n.\u0275fac=function(t){return new(t||n)(h.LFG(we))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function ke(){return new Ne((0,h.LFG)(we))}()},providedIn:"root"}),n})();function We(n){return n.replace(/\/index.html$/,"")}function za(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}class As{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let is=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new As(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const p=r.get(u);r.move(p,c),xs(p,i)}});for(let i=0,u=r.length;i<u;i++){const p=r.get(i).context;p.index=i,p.count=u,p.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{xs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function xs(n,e){n.context.$implicit=e.item}let zn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new $d,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Qn("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Qn("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class $d{constructor(){this.$implicit=null,this.ngIf=null}}function Qn(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}let ec=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const ri="browser";function oo(n){return"server"===n}let tc=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new Hd((0,h.LFG)(ue),window)}),n})();class Hd{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function mr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=yi(this.window.history)||yi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function yi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Os{}class as extends class oc extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function le(n){j||(j=n)}(new as)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ac(){return us=us||document.querySelector("base"),us?us.getAttribute("href"):null}();return null==t?null:function Gi(n){Mn=Mn||document.createElement("a"),Mn.setAttribute("href",n);const e=Mn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){us=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return za(document.cookie,e)}}let Mn,us=null;const Rn=new h.OlP("TRANSITION_ID"),nl=[{provide:h.ip1,useFactory:function uc(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=P(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[Rn,ue,h.zs3],multi:!0}];let rl=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const il=new h.OlP("EventManagerPlugins");let sl=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(il),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Ya{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=P().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let fo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),po=(()=>{class n extends fo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(lc),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(lc))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function lc(n){P().remove(n)}const go={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},cc=/%COMP%/g;function Xa(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Xa(n,i,t):(i=i.replace(cc,n),t.push(i))}return t}function Ja(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let eu=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Wi(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new hc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case h.ifc.ShadowDom:return new Yd(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Xa(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(sl),h.LFG(po),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Wi{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(go[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(ca(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ca(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=go[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=go[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ja(r)):this.eventManager.addEventListener(e,t,Ja(r))}}function ca(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class hc extends Wi{constructor(e,t,r,i){super(e),this.component=r;const u=Xa(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Vn(n){return"_ngcontent-%COMP%".replace(cc,n)}(i+"-"+r.id),this.hostAttr=function Qa(n){return"_nghost-%COMP%".replace(cc,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Yd extends Wi{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Xa(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const p=document.createElement("style");p.textContent=u[c],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let er=(()=>{class n extends Ya{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Qd=["alt","control","meta","shift"],ls={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ul={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let da=(()=>{class n extends Ya{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="",p=r.indexOf("code");if(p>-1&&(r.splice(p,1),c="code."),Qd.forEach(b=>{const T=r.indexOf(b);T>-1&&(r.splice(T,1),c+=b+".")}),c+=u,0!=r.length||0===u.length)return null;const _={};return _.domEventName=i,_.fullKey=c,_}static matchEventFullKeyCode(t,r){let i=ls[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(i=t.code,u="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Qd.forEach(c=>{c!==i&&(0,ul[c])(t)&&(u+=c+".")}),u+=i,u===r)}static eventCallback(t,r,i){return u=>{n.matchEventFullKeyCode(u,t)&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ha=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:ri},{provide:h.g9A,useValue:function pc(){as.makeCurrent()},multi:!0},{provide:ue,useFactory:function ll(){return(0,h.RDi)(document),document},deps:[]}]),Ns=new h.OlP(""),fa=[{provide:h.rWj,useClass:class Zd{addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const p=function(_){c=c||_,u--,0==u&&r(c)};i.forEach(function(_){_.whenStable(p)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],yo=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function qi(){return new h.qLn},deps:[]},{provide:il,useClass:er,multi:!0,deps:[ue,h.R0b,h.Lbi]},{provide:il,useClass:da,multi:!0,deps:[ue]},{provide:eu,useClass:eu,deps:[sl,po,h.AFp]},{provide:h.FYo,useExisting:eu},{provide:fo,useExisting:po},{provide:po,useClass:po,deps:[ue]},{provide:sl,useClass:sl,deps:[il,h.R0b]},{provide:Os,useClass:rl,deps:[]},[]];let _o=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:Rn,useExisting:h.AFp},nl]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ns,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...yo,...fa],imports:[ec,h.hGG]}),n})(),Di=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function pa(){return new Di((0,h.LFG)(ue))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var gn=F(7579);class or extends gn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}let hl=(()=>{class n{constructor(){this.actualFontSize=new or(10)}getFontSize(){return this.actualFontSize.asObservable()}onResizeFont(t){this.actualFontSize.next(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ls(n){return Array.isArray(n)?n:[n]}function _n(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Ti(n){return n instanceof h.SBq?n.nativeElement:n}var Vs=F(3269),Dn=F(8996);function ot(...n){const e=(0,Vs.yG)(n);return(0,Dn.D)(n,e)}var Er=F(9751),Ki=F(8421),on=F(5577),fl=F(1144),tr=F(576),pt=F(4004);const{isArray:ou}=Array;function Bs(n){return(0,pt.U)(e=>function pl(n,e){return ou(e)?n(...e):n(e)}(n,e))}const gl=["addListener","removeListener"],ga=["addEventListener","removeEventListener"],op=["on","off"];function au(n,e,t,r){if((0,tr.m)(t)&&(r=t,t=void 0),r)return au(n,e,t).pipe(Bs(r));const[i,u]=function Ai(n){return(0,tr.m)(n.addEventListener)&&(0,tr.m)(n.removeEventListener)}(n)?ga.map(c=>p=>n[c](e,p,t)):function uu(n){return(0,tr.m)(n.addListener)&&(0,tr.m)(n.removeListener)}(n)?gl.map(ma(n,e)):function lu(n){return(0,tr.m)(n.on)&&(0,tr.m)(n.off)}(n)?op.map(ma(n,e)):[];if(!i&&(0,fl.z)(n))return(0,on.z)(c=>au(c,e,t))((0,Ki.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Er.y(c=>{const p=(..._)=>c.next(1<_.length?_:_[0]);return i(p),()=>u(p)})}function ma(n,e){return t=>r=>n[t](e,r)}var ya=F(4408),xi=F(727);const Us={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Us;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(u=>{t=void 0,n(u)});return new xi.w0(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=Us;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Us;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var yc=F(7565);new class Qi extends yc.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class Yi extends ya.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Us.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(Us.cancelAnimationFrame(t),e._scheduled=void 0)}});let Nn,_c=1;const js={};function ml(n){return n in js&&(delete js[n],!0)}const I={setImmediate(n){const e=_c++;return js[e]=!0,Nn||(Nn=Promise.resolve()),Nn.then(()=>ml(e)&&n()),e},clearImmediate(n){ml(n)}},{setImmediate:R,clearImmediate:B}=I,Q={setImmediate(...n){const{delegate:e}=Q;return(e?.setImmediate||R)(...n)},clearImmediate(n){const{delegate:e}=Q;return(e?.clearImmediate||B)(n)},delegate:void 0};new class xe extends yc.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class de extends ya.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Q.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(Q.clearImmediate(t),e._scheduled=void 0)}});var Mt=F(4986),ht=F(4482),Qe=F(5403),br=F(3532);function Hr(n,e=Mt.z){return function Gn(n){return(0,ht.e)((e,t)=>{let r=!1,i=null,u=null,c=!1;const p=()=>{if(u?.unsubscribe(),u=null,r){r=!1;const b=i;i=null,t.next(b)}c&&t.complete()},_=()=>{u=null,c&&t.complete()};e.subscribe((0,Qe.x)(t,b=>{r=!0,i=b,u||(0,Ki.Xf)(n(b)).subscribe(u=(0,Qe.x)(t,p,_))},()=>{c=!0,(!r||!u||u.closed)&&t.complete()}))})}(()=>function Ea(n=0,e,t=Mt.P){let r=-1;return null!=e&&((0,br.K)(e)?t=e:r=e),new Er.y(i=>{let u=function wa(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;u<0&&(u=0);let c=0;return t.schedule(function(){i.closed||(i.next(c++),0<=r?this.schedule(void 0,r):i.complete())},u)})}(n,e))}function Wn(n,e){return(0,ht.e)((t,r)=>{let i=0;t.subscribe((0,Qe.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}let ba;try{ba=typeof Intl<"u"&&Intl.v8BreakIterator}catch{ba=!1}let cu,Ca,wc,zr=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function ii(n){return n===ri}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!ba)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.Lbi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function To(n){return function Um(){if(null==cu&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>cu=!0}))}finally{cu=cu||!1}return cu}()?n:!!n.capture}function ap(){if(null==Ca){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Ca=!1,Ca;if("scrollBehavior"in document.documentElement.style)Ca=!0;else{const n=Element.prototype.scrollTo;Ca=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Ca}function oh(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function ds(n){return n.composedPath?n.composedPath()[0]:n.target}function _l(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const ah=new h.OlP("cdk-dir-doc",{providedIn:"root",factory:function du(){return(0,h.f3M)(ue)}}),jm=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let uh=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new h.vpe,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function $m(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?jm.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ah,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),Wm=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new gn.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Er.y(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(Hr(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ot()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(Wn(u=>!u||i.indexOf(u)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,u)=>{this._scrollableContainsElement(u,t)&&r.push(u)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=Ti(r),u=t.getElementRef().nativeElement;do{if(i==u)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>au(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.R0b),h.LFG(zr),h.LFG(ue,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ia=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new gn.x,this._changeListener=u=>{this._change.next(u)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const u=this._getWindow();u.addEventListener("resize",this._changeListener),u.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,u=i.getBoundingClientRect();return{top:-u.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-u.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(Hr(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(zr),h.LFG(h.R0b),h.LFG(ue,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),v=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),g=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[vl,v,vl,v]}),n})();class it{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class Et extends it{constructor(e,t,r,i){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i}}class Gt extends it{constructor(e,t,r,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class Tn extends it{constructor(e){super(),this.element=e instanceof h.SBq?e.nativeElement:e}}class ai{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof Et?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof Gt?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof Tn?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class dh extends ai{constructor(e,t,r,i,u){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=c=>{const p=c.element,_=this._document.createComment("dom-portal");p.parentNode.insertBefore(_,p),this.outletElement.appendChild(p),this._attachedPortal=c,super.setDisposeFn(()=>{_.parentNode&&_.parentNode.replaceChild(p,_)})},this._document=u}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector||h.zs3.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let hh=(()=>{class n extends ai{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new h.vpe,this.attachDomPortal=u=>{const c=u.element,p=this._document.createComment("dom-portal");u.setAttachedHost(this),c.parentNode.insertBefore(p,c),this._getRootNode().appendChild(c),this._attachedPortal=u,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(c,p)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,u=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),c=r.createComponent(u,r.length,t.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=t,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h._Vd),h.Y36(h.s_b),h.Y36(ue))},n.\u0275dir=h.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[h.qOj]}),n})(),wl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();var bc=F(6451),hs=F(515);function xo(n){return n<=0?()=>hs.E:(0,ht.e)((e,t)=>{let r=0;e.subscribe((0,Qe.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}var qn=F(5032);function fh(n){return(0,ht.e)((e,t)=>{(0,Ki.Xf)(n).subscribe((0,Qe.x)(t,()=>t.complete(),qn.Z)),!t.closed&&e.subscribe(t)})}const hw=ap();class Km{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=_n(-this._previousScrollPosition.left),e.style.top=_n(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,u=r.scrollBehavior||"",c=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),hw&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),hw&&(r.scrollBehavior=u,i.scrollBehavior=c)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class zC{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class fw{enable(){}disable(){}attach(){}}function Ym(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function pw(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class GC{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();Ym(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let mx=(()=>{class n{constructor(t,r,i,u){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new fw,this.close=c=>new zC(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new Km(this._viewportRuler,this._document),this.reposition=c=>new GC(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=u}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Wm),h.LFG(Ia),h.LFG(h.R0b),h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class WC{constructor(e){if(this.scrollStrategy=new fw,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class mw{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let yw=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_w=(()=>{class n extends yw{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const u=this._attachedOverlays;for(let c=u.length-1;c>-1;c--)if(u[c]._keydownEvents.observers.length>0){const p=u[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>p.next(i)):p.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue),h.LFG(h.R0b,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vw=(()=>{class n extends yw{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=u=>{this._pointerDownEventTarget=ds(u)},this._clickListener=u=>{const c=ds(u),p="click"===u.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;const _=this._attachedOverlays.slice();for(let b=_.length-1;b>-1;b--){const T=_[b];if(T._outsidePointerEvents.observers.length<1||!T.hasAttached())continue;if(T.overlayElement.contains(c)||T.overlayElement.contains(p))break;const M=T._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>M.next(u)):M.next(u)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue),h.LFG(zr),h.LFG(h.R0b,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Cc=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||_l()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let u=0;u<i.length;u++)i[u].remove()}const r=this._document.createElement("div");r.classList.add(t),_l()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue),h.LFG(zr))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class ww{constructor(e,t,r,i,u,c,p,_,b,T=!1){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=u,this._keyboardDispatcher=c,this._document=p,this._location=_,this._outsideClickDispatcher=b,this._animationsDisabled=T,this._backdropElement=null,this._backdropClick=new gn.x,this._attachments=new gn.x,this._detachments=new gn.x,this._locationChanges=xi.w0.EMPTY,this._backdropClickHandler=M=>this._backdropClick.next(M),this._backdropTransitionendHandler=M=>{this._disposeBackdrop(M.target)},this._keydownEvents=new gn.x,this._outsidePointerEvents=new gn.x,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(xo(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=_n(this._config.width),e.height=_n(this._config.height),e.minWidth=_n(this._config.minWidth),e.minHeight=_n(this._config.minHeight),e.maxWidth=_n(this._config.maxWidth),e.maxHeight=_n(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,r){const i=Ls(t||[]).filter(u=>!!u);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(fh((0,bc.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Ew="cdk-overlay-connected-position-bounding-box",Qm=/([A-Za-z%]+)$/;class bw{constructor(e,t,r,i,u){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=u,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new gn.x,this._resizeSubscription=xi.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(Ew),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,u=[];let c;for(let p of this._preferredPositions){let _=this._getOriginPoint(e,i,p),b=this._getOverlayPoint(_,t,p),T=this._getOverlayFit(b,t,r,p);if(T.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(p,_);this._canFitWithFlexibleDimensions(T,b,r)?u.push({position:p,origin:_,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(_,p)}):(!c||c.overlayFit.visibleArea<T.visibleArea)&&(c={overlayFit:T,overlayPoint:b,originPoint:_,position:p,overlayRect:t})}if(u.length){let p=null,_=-1;for(const b of u){const T=b.boundingBoxRect.width*b.boundingBoxRect.height*(b.position.weight||1);T>_&&(_=T,p=b)}return this._isPushed=!1,void this._applyPosition(p.position,p.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(c.position,c.originPoint);this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&fu(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Ew),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,u;if("center"==r.originX)i=e.left+e.width/2;else{const c=this._isRtl()?e.right:e.left,p=this._isRtl()?e.left:e.right;i="start"==r.originX?c:p}return t.left<0&&(i-=t.left),u="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(u-=t.top),{x:i,y:u}}_getOverlayPoint(e,t,r){let i,u;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,u="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+u}}_getOverlayFit(e,t,r,i){const u=Cw(t);let{x:c,y:p}=e,_=this._getOffset(i,"x"),b=this._getOffset(i,"y");_&&(c+=_),b&&(p+=b);let H=0-p,K=p+u.height-r.height,te=this._subtractOverflows(u.width,0-c,c+u.width-r.width),Me=this._subtractOverflows(u.height,H,K),Ue=te*Me;return{visibleArea:Ue,isCompletelyWithinViewport:u.width*u.height===Ue,fitsInViewportVertically:Me===u.height,fitsInViewportHorizontally:te==u.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,u=r.right-t.x,c=pu(this._overlayRef.getConfig().minHeight),p=pu(this._overlayRef.getConfig().minWidth),b=e.fitsInViewportHorizontally||null!=p&&p<=u;return(e.fitsInViewportVertically||null!=c&&c<=i)&&b}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=Cw(t),u=this._viewportRect,c=Math.max(e.x+i.width-u.width,0),p=Math.max(e.y+i.height-u.height,0),_=Math.max(u.top-r.top-e.y,0),b=Math.max(u.left-r.left-e.x,0);let T=0,M=0;return T=i.width<=u.width?b||-c:e.x<this._viewportMargin?u.left-r.left-e.x:0,M=i.height<=u.height?_||-p:e.y<this._viewportMargin?u.top-r.top-e.y:0,this._previousPushAmount={x:T,y:M},{x:e.x+T,y:e.y+M}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new mw(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let u=0;u<t.length;u++)t[u].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let u,c,p,T,M,H;if("top"===t.overlayY)c=e.y,u=r.height-c+this._viewportMargin;else if("bottom"===t.overlayY)p=r.height-e.y+2*this._viewportMargin,u=r.height-p+this._viewportMargin;else{const K=Math.min(r.bottom-e.y+r.top,e.y),te=this._lastBoundingBoxSize.height;u=2*K,c=e.y-K,u>te&&!this._isInitialRender&&!this._growAfterOpen&&(c=e.y-te/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)H=r.width-e.x+this._viewportMargin,T=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)M=e.x,T=r.right-e.x;else{const K=Math.min(r.right-e.x+r.left,e.x),te=this._lastBoundingBoxSize.width;T=2*K,M=e.x-K,T>te&&!this._isInitialRender&&!this._growAfterOpen&&(M=e.x-te/2)}return{top:c,left:M,bottom:p,right:H,width:T,height:u}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const u=this._overlayRef.getConfig().maxHeight,c=this._overlayRef.getConfig().maxWidth;i.height=_n(r.height),i.top=_n(r.top),i.bottom=_n(r.bottom),i.width=_n(r.width),i.left=_n(r.left),i.right=_n(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",u&&(i.maxHeight=_n(u)),c&&(i.maxWidth=_n(c))}this._lastBoundingBoxSize=r,fu(this._boundingBox.style,i)}_resetBoundingBoxStyles(){fu(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){fu(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),u=this._hasFlexibleDimensions,c=this._overlayRef.getConfig();if(i){const T=this._viewportRuler.getViewportScrollPosition();fu(r,this._getExactOverlayY(t,e,T)),fu(r,this._getExactOverlayX(t,e,T))}else r.position="static";let p="",_=this._getOffset(t,"x"),b=this._getOffset(t,"y");_&&(p+=`translateX(${_}px) `),b&&(p+=`translateY(${b}px)`),r.transform=p.trim(),c.maxHeight&&(i?r.maxHeight=_n(c.maxHeight):u&&(r.maxHeight="")),c.maxWidth&&(i?r.maxWidth=_n(c.maxWidth):u&&(r.maxWidth="")),fu(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},u=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(u=this._pushOverlayOnScreen(u,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(u.y+this._overlayRect.height)+"px":i.top=_n(u.y),i}_getExactOverlayX(e,t,r){let c,i={left:"",right:""},u=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(u=this._pushOverlayOnScreen(u,this._overlayRect,r)),c=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===c?i.right=this._document.documentElement.clientWidth-(u.x+this._overlayRect.width)+"px":i.left=_n(u.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:pw(e,r),isOriginOutsideView:Ym(e,r),isOverlayClipped:pw(t,r),isOverlayOutsideView:Ym(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?e.offsetX??this._offsetX:e.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Ls(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof h.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function fu(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function pu(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(Qm);return t&&"px"!==t?null:parseFloat(e)}return n||null}function Cw(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const Dw="cdk-global-overlay-wrapper";class Jm{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(Dw),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:u,maxWidth:c,maxHeight:p}=r,_=!("100%"!==i&&"100vw"!==i||c&&"100%"!==c&&"100vw"!==c),b=!("100%"!==u&&"100vh"!==u||p&&"100%"!==p&&"100vh"!==p),T=this._xPosition,M=this._xOffset,H="rtl"===this._overlayRef.getConfig().direction;let K="",te="",Me="";_?Me="flex-start":"center"===T?(Me="center",H?te=M:K=M):H?"left"===T||"end"===T?(Me="flex-end",K=M):("right"===T||"start"===T)&&(Me="flex-start",te=M):"left"===T||"start"===T?(Me="flex-start",K=M):("right"===T||"end"===T)&&(Me="flex-end",te=M),e.position=this._cssPosition,e.marginLeft=_?"0":K,e.marginTop=b?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=_?"0":te,t.justifyContent=Me,t.alignItems=b?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(Dw),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let mp=(()=>{class n{constructor(t,r,i,u){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=u}global(){return new Jm}flexibleConnectedTo(t){return new bw(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ia),h.LFG(ue),h.LFG(zr),h.LFG(Cc))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),El=0,ph=(()=>{class n{constructor(t,r,i,u,c,p,_,b,T,M,H,K){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=u,this._keyboardDispatcher=c,this._injector=p,this._ngZone=_,this._document=b,this._directionality=T,this._location=M,this._outsideClickDispatcher=H,this._animationsModuleType=K}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),u=this._createPortalOutlet(i),c=new WC(t);return c.direction=c.direction||this._directionality.value,new ww(u,r,i,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+El++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(h.z2F)),new dh(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(mx),h.LFG(Cc),h.LFG(h._Vd),h.LFG(mp),h.LFG(_w),h.LFG(h.zs3),h.LFG(h.R0b),h.LFG(ue),h.LFG(uh),h.LFG(Ne),h.LFG(vw),h.LFG(h.QbO,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const QC={provide:new h.OlP("cdk-connected-overlay-scroll-strategy"),deps:[ph],useFactory:function Ic(n){return()=>n.scrollStrategies.reposition()}};let XC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[ph,QC],imports:[vl,wl,g,g]}),n})();const Dc=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:eI}=Array,{getPrototypeOf:Tw,prototype:tI,keys:Aw}=Object;function nI(n){if(1===n.length){const e=n[0];if(eI(e))return{args:e,keys:null};if(function rI(n){return n&&"object"==typeof n&&Tw(n)===tI}(e)){const t=Aw(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Da=F(4671);function xw(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Sc=F(9672);function gu(...n){const e=(0,Vs.yG)(n),t=(0,Vs.jO)(n),{args:r,keys:i}=nI(n);if(0===r.length)return(0,Dn.D)([],e);const u=new Er.y(function iI(n,e,t=Da.y){return r=>{sI(e,()=>{const{length:i}=n,u=new Array(i);let c=i,p=i;for(let _=0;_<i;_++)sI(e,()=>{const b=(0,Dn.D)(n[_],e);let T=!1;b.subscribe((0,Qe.x)(r,M=>{u[_]=M,T||(T=!0,p--),p||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>xw(i,c):Da.y));return t?u.pipe(Bs(t)):u}function sI(n,e,t){n?(0,Sc.f)(t,n,e):e()}var Tc=F(8189);function yp(...n){return function oI(){return(0,Tc.J)(1)}()((0,Dn.D)(n,(0,Vs.yG)(n)))}function ey(n){return new Er.y(e=>{(0,Ki.Xf)(n()).subscribe(e)})}var Mw=F(9635);function bl(n,e){const t=(0,tr.m)(n)?n:()=>n,r=i=>i.error(t());return new Er.y(e?i=>e.schedule(r,0,i):r)}function gh(){return(0,ht.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Qe.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Rw extends Er.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ht.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new xi.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Qe.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=xi.w0.EMPTY)}return e}refCount(){return gh()(this)}}function Or(n,e){return(0,ht.e)((t,r)=>{let i=null,u=0,c=!1;const p=()=>c&&!i&&r.complete();t.subscribe((0,Qe.x)(r,_=>{i?.unsubscribe();let b=0;const T=u++;(0,Ki.Xf)(n(_,T)).subscribe(i=(0,Qe.x)(r,M=>r.next(e?e(_,M,T,b++):M),()=>{i=null,p()}))},()=>{c=!0,p()}))})}function mu(...n){const e=(0,Vs.yG)(n);return(0,ht.e)((t,r)=>{(e?yp(n,t,e):yp(n,t)).subscribe(r)})}function ty(n){return(0,ht.e)((e,t)=>{let r=!1;e.subscribe((0,Qe.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function aI(n=ny){return(0,ht.e)((e,t)=>{let r=!1;e.subscribe((0,Qe.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function ny(){return new Dc}function yu(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Wn((i,u)=>n(i,u,r)):Da.y,xo(1),t?ty(e):aI(()=>new Dc))}function Cl(n,e){return(0,tr.m)(e)?(0,on.z)(n,e,1):(0,on.z)(n,1)}var vi=F(8505);function _u(n){return(0,ht.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,Qe.x)(t,void 0,void 0,c=>{u=(0,Ki.Xf)(n(c,_u(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}function vx(n,e,t,r,i){return(u,c)=>{let p=t,_=e,b=0;u.subscribe((0,Qe.x)(c,T=>{const M=b++;_=p?n(_,T,M):(p=!0,T),r&&c.next(_)},i&&(()=>{p&&c.next(_),c.complete()})))}}function mh(n,e){return(0,ht.e)(vx(n,e,arguments.length>=2,!0))}function _p(n){return n<=0?()=>hs.E:(0,ht.e)((e,t)=>{let r=[];e.subscribe((0,Qe.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function vp(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Wn((i,u)=>n(i,u,r)):Da.y,_p(1),t?ty(e):aI(()=>new Dc))}function wp(n){return(0,ht.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const qt="primary",yh=Symbol("RouteTitle");class ry{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Mo(n){return new ry(n)}function uI(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],p=n[u];if(c.startsWith(":"))i[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ro(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!iy(n[i],e[i]))return!1;return!0}function iy(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function Pw(n){return Array.prototype.concat.apply([],n)}function Nw(n){return n.length>0?n[n.length-1]:null}function Wr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Oo(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,Dn.D)(Promise.resolve(n)):ot(n)}const dI={exact:function ui(n,e,t){if(!vu(n.segments,e.segments)||!Cr(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ui(n.children[r],e.children[r],t))return!1;return!0},subset:uy},oy={exact:function hI(n,e){return Ro(n,e)},subset:function ay(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>iy(n[t],e[t]))},ignored:()=>!0};function Fw(n,e,t){return dI[t.paths](n.root,e.root,t.matrixParams)&&oy[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function uy(n,e,t){return Ep(n,e,e.segments,t)}function Ep(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!vu(i,t)||e.hasChildren()||!Cr(i,t,r))}if(n.segments.length===t.length){if(!vu(n.segments,t)||!Cr(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!uy(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(vu(n.segments,i)&&Cr(n.segments,i,r)&&n.children[qt])&&Ep(n.children[qt],e,u,r)}}function Cr(n,e,t){return e.every((r,i)=>oy[t](n[i].parameters,r.parameters))}class Hs{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Mo(this.queryParams)),this._queryParamMap}toString(){return Lw.serialize(this)}}class Qt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Wr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bp(this)}}class _h{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Mo(this.parameters)),this._parameterMap}toString(){return Uw(this)}}function vu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let ly=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new cy},providedIn:"root"}),n})();class cy{parse(e){const t=new $w(e);return new Hs(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${vh(e.root,!0)}`,r=function bx(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Cp(t)}=${Cp(i)}`).join("&"):`${Cp(t)}=${Cp(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function gI(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Lw=new cy;function bp(n){return n.segments.map(e=>Uw(e)).join("/")}function vh(n,e){if(!n.hasChildren())return bp(n);if(e){const t=n.children[qt]?vh(n.children[qt],!1):"",r=[];return Wr(n.children,(i,u)=>{u!==qt&&r.push(`${u}:${vh(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function pI(n,e){let t=[];return Wr(n.children,(r,i)=>{i===qt&&(t=t.concat(e(r,i)))}),Wr(n.children,(r,i)=>{i!==qt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===qt?[vh(n.children[qt],!1)]:[`${i}:${vh(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[qt]?`${bp(n)}/${t[0]}`:`${bp(n)}/(${t.join("//")})`}}function Vw(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Cp(n){return Vw(n).replace(/%3B/gi,";")}function wu(n){return Vw(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fs(n){return decodeURIComponent(n)}function Bw(n){return fs(n.replace(/\+/g,"%20"))}function Uw(n){return`${wu(n.path)}${function Ex(n){return Object.keys(n).map(e=>`;${wu(e)}=${wu(n[e])}`).join("")}(n.parameters)}`}const jw=/^[^\/()?;=#]+/;function dy(n){const e=n.match(jw);return e?e[0]:""}const ko=/^[^=?&#]+/,fy=/^[^&#]+/;class $w{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qt([],{}):new Qt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[qt]=new Qt(e,t)),r}parseSegment(){const e=dy(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,!1);return this.capture(e),new _h(fs(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=dy(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=dy(this.remaining);i&&(r=i,this.capture(r))}e[fs(t)]=fs(r)}parseQueryParam(e){const t=function hy(n){const e=n.match(ko);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function mI(n){const e=n.match(fy);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Bw(t),u=Bw(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=dy(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new h.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=qt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[qt]:new Qt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,!1)}}function py(n){return n.segments.length>0?new Qt([],{[qt]:n}):n}function Eu(n){const e={};for(const r of Object.keys(n.children)){const u=Eu(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function yI(n){if(1===n.numberOfChildren&&n.children[qt]){const e=n.children[qt];return new Qt(n.segments.concat(e.segments),e.children)}return n}(new Qt(n.segments,e))}function Il(n){return n instanceof Hs}function Ac(n,e,t,r,i){if(0===t.length)return Mc(e.root,e.root,e.root,r,i);const u=function Ww(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Gw(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return Wr(u.outlets,(_,b)=>{p[b]="string"==typeof _?_.split("/"):_}),[...i,{outlets:p}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((p,_)=>{0==_&&"."===p||(0==_&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,u]},[]);return new Gw(t,e,r)}(t);return u.toRoot()?Mc(e.root,e.root,new Qt([],{}),r,i):function c(_){const b=function vI(n,e,t,r){if(n.isAbsolute)return new Rc(e.root,!0,0);if(-1===r)return new Rc(t,t===e.root,0);return function qw(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new h.vHH(4005,!1);i=r.segments.length}return new Rc(r,!1,i-u)}(t,r+(Dl(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,_),T=b.processChildren?Oc(b.segmentGroup,b.index,u.commands):Eh(b.segmentGroup,b.index,u.commands);return Mc(e.root,b.segmentGroup,T,r,i)}(n.snapshot?._lastPathIndex)}function Dl(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function xc(n){return"object"==typeof n&&null!=n&&n.outlets}function Mc(n,e,t,r,i){let c,u={};r&&Wr(r,(_,b)=>{u[b]=Array.isArray(_)?_.map(T=>`${T}`):`${_}`}),c=n===e?t:Ip(n,e,t);const p=py(Eu(c));return new Hs(p,u,i)}function Ip(n,e,t){const r={};return Wr(n.children,(i,u)=>{r[u]=i===e?t:Ip(i,e,t)}),new Qt(n.segments,r)}class Gw{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Dl(r[0]))throw new h.vHH(4003,!1);const i=r.find(xc);if(i&&i!==Nw(r))throw new h.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Rc{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Eh(n,e,t){if(n||(n=new Qt([],{})),0===n.segments.length&&n.hasChildren())return Oc(n,e,t);const r=function gy(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],p=t[r];if(xc(p))break;const _=`${p}`,b=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&b&&"object"==typeof b&&void 0===b.outlets){if(!_y(_,b,c))return u;r+=2}else{if(!_y(_,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Qt(n.segments.slice(0,r.pathIndex),{});return u.children[qt]=new Qt(n.segments.slice(r.pathIndex),n.children),Oc(u,0,i)}return r.match&&0===i.length?new Qt(n.segments,{}):r.match&&!n.hasChildren()?my(n,e,t):r.match?Oc(n,0,i):my(n,e,t)}function Oc(n,e,t){if(0===t.length)return new Qt(n.segments,{});{const r=function Zw(n){return xc(n[0])?n[0].outlets:{[qt]:n}}(t),i={};return Wr(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=Eh(n.children[c],e,u))}),Wr(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new Qt(n.segments,i)}}function my(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(xc(u)){const _=wI(u.outlets);return new Qt(r,_)}if(0===i&&Dl(t[0])){r.push(new _h(n.segments[e].path,yy(t[0]))),i++;continue}const c=xc(u)?u.outlets[qt]:`${u}`,p=i<t.length-1?t[i+1]:null;c&&p&&Dl(p)?(r.push(new _h(c,yy(p))),i+=2):(r.push(new _h(c,{})),i++)}return new Qt(r,{})}function wI(n){const e={};return Wr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=my(new Qt([],{}),0,t))}),e}function yy(n){const e={};return Wr(n,(t,r)=>e[r]=`${t}`),e}function _y(n,e,t){return n==t.path&&Ro(e,t.parameters)}class wi{constructor(e,t){this.id=e,this.url=t}}class Dp extends wi{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class bu extends wi{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Sp extends wi{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class EI extends wi{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Tp extends wi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bI extends wi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kw extends wi{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Yw extends wi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qw extends wi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vy{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Xw{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ap{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xp{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jw{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wy{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ey{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class kc{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Cy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Cy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Mp(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Mp(e,this._root).map(t=>t.value)}}function Cy(n,e){if(n===e.value)return e;for(const t of e.children){const r=Cy(n,t);if(r)return r}return null}function Mp(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Mp(n,t);if(r.length)return r.unshift(e),r}return[]}class Sa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Pc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Iy extends kc{constructor(e,t){super(e),this.snapshot=t,Sy(this,e)}toString(){return this.snapshot.toString()}}function Rp(n,e){const t=function eE(n,e){const c=new bh([],{},{},"",{},qt,e,null,n.root,-1,{});return new tE("",new Sa(c,[]))}(n,e),r=new or([new _h("",{})]),i=new or({}),u=new or({}),c=new or({}),p=new or(""),_=new Sl(r,i,c,p,u,qt,e,t.root);return _.snapshot=t.root,new Iy(new Sa(_,[]),t)}class Sl{constructor(e,t,r,i,u,c,p,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this.title=this.data?.pipe((0,pt.U)(b=>b[yh]))??ot(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pt.U)(e=>Mo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pt.U)(e=>Mo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Dy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function CI(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class bh{constructor(e,t,r,i,u,c,p,_,b,T,M,H){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this.title=this.data?.[yh],this.routeConfig=_,this._urlSegment=b,this._lastPathIndex=T,this._correctedLastPathIndex=H??T,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Mo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Mo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class tE extends kc{constructor(e,t){super(t),this.url=e,Sy(this,t)}toString(){return ps(this._root)}}function Sy(n,e){e.value._routerState=n,e.children.forEach(t=>Sy(n,t))}function ps(n){const e=n.children.length>0?` { ${n.children.map(ps).join(", ")} } `:"";return`${n.value}${e}`}function Ty(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ro(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ro(e.params,t.params)||n.params.next(t.params),function lI(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ro(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ro(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Op(n,e){const t=Ro(n.params,e.params)&&function fI(n,e){return vu(n,e)&&n.every((t,r)=>Ro(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Op(n.parent,e.parent))}function Ch(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function DI(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ch(n,r,i);return Ch(n,r)})}(n,e,t);return new Sa(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(p=>Ch(n,p)),c}}const r=function SI(n){return new Sl(new or(n.url),new or(n.params),new or(n.queryParams),new or(n.fragment),new or(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>Ch(n,u));return new Sa(r,i)}}const kp="ngNavigationCancelingError";function nE(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Il(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=rE(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function rE(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[kp]=!0,r.cancellationCode=e,t&&(r.url=t),r}function iE(n){return Vt(n)&&Il(n.url)}function Vt(n){return n&&n[kp]}class sE{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Nc,this.attachRef=null}}let Nc=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new sE,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ih=!1;let Ay=(()=>{class n{constructor(t,r,i,u,c){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=i||qt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,Ih);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,Ih);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,Ih);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,Ih);this._activatedRoute=t;const i=this.location,c=t._futureSnapshot.component,p=this.parentContexts.getOrCreateContext(this.name).children,_=new TI(t,p,i.injector);if(r&&function oE(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(c);this.activated=i.createComponent(b,i.length,_)}else this.activated=i.createComponent(c,{index:i.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Nc),h.Y36(h.s_b),h.$8M("name"),h.Y36(h.sBO),h.Y36(h.lqb))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class TI{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Sl?this.route:e===Nc?this.childContexts:this.parent.get(e,t)}}let xy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[Ay],encapsulation:2}),n})();function My(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Dh(n){const e=n.children&&n.children.map(Dh),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==qt&&(t.component=xy),t}function gs(n){return n.outlet||qt}function MI(n,e){const t=n.filter(r=>gs(r)===e);return t.push(...n.filter(r=>gs(r)!==e)),t}function Np(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class RI{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ty(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Pc(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),Wr(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Pc(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Pc(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Pc(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new wy(u.value.snapshot))}),e.children.length&&this.forwardEvent(new xp(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(Ty(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),Ty(p.route.value),this.activateChildRoutes(e,null,c.children)}else{const p=Np(i.snapshot),_=p?.get(h._Vd)??null;c.attachRef=null,c.route=i,c.resolver=_,c.injector=p,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class Oy{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ky{constructor(e,t){this.component=e,this.route=t}}function OI(n,e,t){const r=n._root;return Vc(r,e?e._root:null,t,[r.value])}function Lc(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function Vc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=Pc(e);return n.children.forEach(c=>{(function Fp(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const _=function kI(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!vu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!vu(n.url,e.url)||!Ro(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Op(n,e)||!Ro(n.queryParams,e.queryParams);default:return!Op(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new Oy(r)):(u.data=c.data,u._resolvedData=c._resolvedData),Vc(n,e,u.component?p?p.children:null:t,r,i),_&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new ky(p.outlet.component,c))}else c&&Bc(e,p,i),i.canActivateChecks.push(new Oy(r)),Vc(n,null,u.component?p?p.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),Wr(u,(c,p)=>Bc(c,t.getContext(p),i)),i}function Bc(n,e,t){const r=Pc(n),i=n.value;Wr(r,(u,c)=>{Bc(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new ky(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Sh(n){return"function"==typeof n}function Th(n){return n instanceof Dc||"EmptyError"===n?.name}const Py=Symbol("INITIAL_VALUE");function Cu(){return Or(n=>gu(n.map(e=>e.pipe(xo(1),mu(Py)))).pipe((0,pt.U)(e=>{for(const t of e)if(!0!==t){if(t===Py)return Py;if(!1===t||t instanceof Hs)return t}return!0}),Wn(e=>e!==Py),xo(1)))}function Vp(n){return(0,Mw.z)((0,vi.b)(e=>{if(Il(e))throw nE(0,e)}),(0,pt.U)(e=>!0===e))}const Ah={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ny(n,e,t,r,i){const u=xh(n,e,t);return u.matched?function Ta(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?ot(i.map(c=>{const p=Lc(c,n);return Oo(function VI(n){return n&&Sh(n.canMatch)}(p)?p.canMatch(e,t):n.runInContext(()=>p(e,t)))})).pipe(Cu(),Vp()):ot(!0)}(r=My(e,r),e,t).pipe((0,pt.U)(c=>!0===c?u:{...Ah})):ot(u)}function xh(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Ah}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||uI)(t,n,e);if(!i)return{...Ah};const u={};Wr(i.posParams,(p,_)=>{u[_]=p.path});const c=i.consumed.length>0?{...u,...i.consumed[i.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function Fy(n,e,t,r,i="corrected"){if(t.length>0&&function Bp(n,e,t){return t.some(r=>jc(n,e,r)&&gs(r)!==qt)}(n,t,r)){const c=new Qt(e,function Ax(n,e,t,r){const i={};i[qt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&gs(u)!==qt){const c=new Qt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[gs(u)]=c}return i}(n,e,r,new Qt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function Up(n,e,t){return t.some(r=>jc(n,e,r))}(n,t,r)){const c=new Qt(n.segments,function hE(n,e,t,r,i,u){const c={};for(const p of r)if(jc(n,t,p)&&!i[gs(p)]){const _=new Qt([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[gs(p)]=_}return{...i,...c}}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new Qt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function jc(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function jp(n,e,t,r){return!!(gs(n)===r||r!==qt&&jc(e,t,n))&&("**"===n.path||xh(e,n,t).matched)}function $p(n,e,t){return 0===e.length&&!n.children[t]}const Ly=!1;class Hp{constructor(e){this.segmentGroup=e||null}}class fE{constructor(e){this.urlTree=e}}function Mh(n){return bl(new Hp(n))}function pE(n){return bl(new fE(n))}class Mx{constructor(e,t,r,i,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0}apply(){const e=Fy(this.urlTree.root,[],[],this.config).segmentGroup,t=new Qt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,qt).pipe((0,pt.U)(u=>this.createUrlTree(Eu(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(_u(u=>{if(u instanceof fE)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Hp?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,qt).pipe((0,pt.U)(i=>this.createUrlTree(Eu(i),e.queryParams,e.fragment))).pipe(_u(i=>{throw i instanceof Hp?this.noMatchError(i):i}))}noMatchError(e){return new h.vHH(4002,Ly)}createUrlTree(e,t,r){const i=py(e);return new Hs(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,pt.U)(u=>new Qt([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,Dn.D)(i).pipe(Cl(u=>{const c=r.children[u],p=MI(t,u);return this.expandSegmentGroup(e,p,c,u).pipe((0,pt.U)(_=>({segment:_,outlet:u})))}),mh((u,c)=>(u[c.outlet]=c.segment,u),{}),vp())}expandSegment(e,t,r,i,u,c){return(0,Dn.D)(r).pipe(Cl(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,u,c).pipe(_u(b=>{if(b instanceof Hp)return ot(null);throw b}))),yu(p=>!!p),_u((p,_)=>{if(Th(p))return $p(t,i,u)?ot(new Qt([],{})):Mh(t);throw p}))}expandSegmentAgainstRoute(e,t,r,i,u,c,p){return jp(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):Mh(t):Mh(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?pE(u):this.lineralizeSegments(r,u).pipe((0,on.z)(c=>{const p=new Qt(c,{});return this.expandSegment(e,p,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:p,consumedSegments:_,remainingSegments:b,positionalParamSegments:T}=xh(t,i,u);if(!p)return Mh(t);const M=this.applyRedirectCommands(_,i.redirectTo,T);return i.redirectTo.startsWith("/")?pE(M):this.lineralizeSegments(i,M).pipe((0,on.z)(H=>this.expandSegment(e,t,r,H.concat(b),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){return"**"===r.path?(e=My(r,e),r.loadChildren?(r._loadedRoutes?ot({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,pt.U)(p=>(r._loadedRoutes=p.routes,r._loadedInjector=p.injector,new Qt(i,{})))):ot(new Qt(i,{}))):Ny(t,r,i,e).pipe(Or(({matched:c,consumedSegments:p,remainingSegments:_})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe((0,on.z)(T=>{const M=T.injector??e,H=T.routes,{segmentGroup:K,slicedSegments:te}=Fy(t,p,_,H),Me=new Qt(K.segments,K.children);if(0===te.length&&Me.hasChildren())return this.expandChildren(M,H,Me).pipe((0,pt.U)(Ut=>new Qt(p,Ut)));if(0===H.length&&0===te.length)return ot(new Qt(p,{}));const Ue=gs(r)===u;return this.expandSegment(M,Me,H,te,Ue?qt:u,!0).pipe((0,pt.U)(Nt=>new Qt(p.concat(Nt.segments),Nt.children)))})):Mh(t)))}getChildConfig(e,t,r){return t.children?ot({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ot({routes:t._loadedRoutes,injector:t._loadedInjector}):function jI(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?ot(!0):ot(i.map(c=>{const p=Lc(c,n);return Oo(function NI(n){return n&&Sh(n.canLoad)}(p)?p.canLoad(e,t):n.runInContext(()=>p(e,t)))})).pipe(Cu(),Vp())}(e,t,r).pipe((0,on.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,vi.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function xx(n){return bl(rE(Ly,3))}())):ot({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ot(r);if(i.numberOfChildren>1||!i.children[qt])return bl(new h.vHH(4e3,Ly));i=i.children[qt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new Hs(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Wr(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[u]=t[p]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return Wr(t.children,(p,_)=>{c[_]=this.createSegmentGroup(e,p,r,i)}),new Qt(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new h.vHH(4001,Ly);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class HI{}class Ox{constructor(e,t,r,i,u,c,p,_){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=u,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=p,this.urlSerializer=_}recognize(){const e=Fy(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,qt).pipe((0,pt.U)(t=>{if(null===t)return null;const r=new bh([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},qt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Sa(r,t),u=new tE(this.url,i);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=Dy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Dn.D)(Object.keys(r.children)).pipe(Cl(i=>{const u=r.children[i],c=MI(t,i);return this.processSegmentGroup(e,c,u,i)}),mh((i,u)=>i&&u?(i.push(...u),i):null),function Ow(n,e=!1){return(0,ht.e)((t,r)=>{let i=0;t.subscribe((0,Qe.x)(r,u=>{const c=n(u,i++);(c||e)&&r.next(u),!c&&r.complete()}))})}(i=>null!==i),ty(null),vp(),(0,pt.U)(i=>{if(null===i)return null;const u=zI(i);return function kx(n){n.sort((e,t)=>e.value.outlet===qt?-1:t.value.outlet===qt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,i,u){return(0,Dn.D)(t).pipe(Cl(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,u)),yu(c=>!!c),_u(c=>{if(Th(c))return $p(r,i,u)?ot([]):ot(null);throw c}))}processSegmentAgainstRoute(e,t,r,i,u){if(t.redirectTo||!jp(t,r,i,u))return ot(null);let c;if("**"===t.path){const p=i.length>0?Nw(i).parameters:{},_=WI(r)+i.length;c=ot({snapshot:new bh(i,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Aa(t),gs(t),t.component??t._loadedComponent??null,t,GI(r),_,zp(t),_),consumedSegments:[],remainingSegments:[]})}else c=Ny(r,t,i,e).pipe((0,pt.U)(({matched:p,consumedSegments:_,remainingSegments:b,parameters:T})=>{if(!p)return null;const M=WI(r)+_.length;return{snapshot:new bh(_,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Aa(t),gs(t),t.component??t._loadedComponent??null,t,GI(r),M,zp(t),M),consumedSegments:_,remainingSegments:b}}));return c.pipe(Or(p=>{if(null===p)return ot(null);const{snapshot:_,consumedSegments:b,remainingSegments:T}=p;e=t._injector??e;const M=t._loadedInjector??e,H=function Px(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:K,slicedSegments:te}=Fy(r,b,T,H.filter(Ue=>void 0===Ue.redirectTo),this.relativeLinkResolution);if(0===te.length&&K.hasChildren())return this.processChildren(M,H,K).pipe((0,pt.U)(Ue=>null===Ue?null:[new Sa(_,Ue)]));if(0===H.length&&0===te.length)return ot([new Sa(_,[])]);const Me=gs(t)===u;return this.processSegment(M,H,K,te,Me?qt:u).pipe((0,pt.U)(Ue=>null===Ue?null:[new Sa(_,Ue)]))}))}}function Nx(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function zI(n){const e=[],t=new Set;for(const r of n){if(!Nx(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=zI(r.children);e.push(new Sa(r.value,i))}return e.filter(r=>!t.has(r))}function GI(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function WI(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Aa(n){return n.data||{}}function zp(n){return n.resolve||{}}function xa(n){return"string"==typeof n.title||null===n.title}function Gp(n){return Or(e=>{const t=n(e);return t?(0,Dn.D)(t).pipe((0,pt.U)(()=>e)):ot(e)})}let vE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(u=>u.outlet===qt);return r}getResolvedTitleForRoute(t){return t.data[yh]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(wE)},providedIn:"root"}),n})(),wE=(()=>{class n extends vE{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Di))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class QI{}class Wp extends class XI{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Hc=new h.OlP("",{providedIn:"root",factory:()=>({})}),Oh=new h.OlP("ROUTES");let zc=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ot(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Oo(t.loadComponent()).pipe((0,vi.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),wp(()=>{this.componentLoaders.delete(t)})),i=new Rw(r,()=>new gn.x).pipe(gh());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ot({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,pt.U)(p=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,b,T=!1;Array.isArray(p)?b=p:(_=p.create(t).injector,b=Pw(_.get(Oh,[],h.XFs.Self|h.XFs.Optional)));return{routes:b.map(Dh),injector:_}}),wp(()=>{this.childrenLoaders.delete(r)})),c=new Rw(u,()=>new gn.x).pipe(gh());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return Oo(t()).pipe((0,on.z)(r=>r instanceof h.YKP||Array.isArray(r)?ot(r):(0,Dn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3),h.LFG(h.Sil))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class EE{}class bE{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function jy(n){throw n}function CE(n,e,t){return e.parse("/")}const $y={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},JI={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function IE(){const n=(0,h.f3M)(ly),e=(0,h.f3M)(Nc),t=(0,h.f3M)(Ne),r=(0,h.f3M)(h.zs3),i=(0,h.f3M)(h.Sil),u=(0,h.f3M)(Oh,{optional:!0})??[],c=(0,h.f3M)(Hc,{optional:!0})??{},p=(0,h.f3M)(wE),_=(0,h.f3M)(vE,{optional:!0}),b=(0,h.f3M)(EE,{optional:!0}),T=(0,h.f3M)(QI,{optional:!0}),M=new ar(null,n,e,t,r,i,Pw(u));return b&&(M.urlHandlingStrategy=b),T&&(M.routeReuseStrategy=T),M.titleStrategy=_??p,function Lx(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,M),M}let ar=(()=>{class n{constructor(t,r,i,u,c,p,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new gn.x,this.errorHandler=jy,this.malformedUriErrorHandler=CE,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ot(void 0),this.urlHandlingStrategy=new bE,this.routeReuseStrategy=new Wp,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(zc),this.configLoader.onLoadEndListener=H=>this.triggerEvent(new Xw(H)),this.configLoader.onLoadStartListener=H=>this.triggerEvent(new vy(H)),this.ngModule=c.get(h.h0i),this.console=c.get(h.c2e);const M=c.get(h.R0b);this.isNgZoneEnabled=M instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function cI(){return new Hs(new Qt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Rp(this.currentUrlTree,this.rootComponentType),this.transitions=new or({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Wn(i=>0!==i.id),(0,pt.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Or(i=>{let u=!1,c=!1;return ot(i).pipe((0,vi.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.rawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Or(p=>{const _=this.browserUrlTree.toString(),b=!this.navigated||p.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return Hy(p.source)&&(this.browserUrlTree=p.extractedUrl),ot(p).pipe(Or(M=>{const H=this.transitions.getValue();return r.next(new Dp(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),H!==this.transitions.getValue()?hs.E:Promise.resolve(M)}),function mE(n,e,t,r){return Or(i=>function $I(n,e,t,r,i){return new Mx(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,pt.U)(u=>({...i,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,vi.b)(M=>{this.currentNavigation={...this.currentNavigation,finalUrl:M.urlAfterRedirects},i.urlAfterRedirects=M.urlAfterRedirects}),function ZI(n,e,t,r,i,u){return(0,on.z)(c=>function Rx(n,e,t,r,i,u,c="emptyOnly",p="legacy"){return new Ox(n,e,t,r,i,c,p,u).recognize().pipe(Or(_=>null===_?function Vy(n){return new Er.y(e=>e.error(n))}(new HI):ot(_)))}(n,e,t,c.urlAfterRedirects,r.serialize(c.urlAfterRedirects),r,i,u).pipe((0,pt.U)(p=>({...c,targetSnapshot:p}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,vi.b)(M=>{if(i.targetSnapshot=M.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const K=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl(K,M)}this.browserUrlTree=M.urlAfterRedirects}const H=new Tp(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(H)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:H,extractedUrl:K,source:te,restoredState:Me,extras:Ue}=p,gt=new Dp(H,this.serializeUrl(K),te,Me);r.next(gt);const Nt=Rp(K,this.rootComponentType).snapshot;return ot(i={...p,targetSnapshot:Nt,urlAfterRedirects:K,extras:{...Ue,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=p.rawUrl,p.resolve(null),hs.E}),(0,vi.b)(p=>{const _=new bI(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),(0,pt.U)(p=>i={...p,guards:OI(p.targetSnapshot,p.currentSnapshot,this.rootContexts)}),function UI(n,e){return(0,on.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?ot({...t,guardsResult:!0}):function Tx(n,e,t,r){return(0,Dn.D)(n).pipe((0,on.z)(i=>function dE(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?ot(u.map(p=>{const _=Np(e)??i,b=Lc(p,_);return Oo(function aE(n){return n&&Sh(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):_.runInContext(()=>b(n,e,t,r))).pipe(yu())})).pipe(Cu()):ot(!0)}(i.component,i.route,t,e,r)),yu(i=>!0!==i,!0))}(c,r,i,n).pipe((0,on.z)(p=>p&&function PI(n){return"boolean"==typeof n}(p)?function Uc(n,e,t,r){return(0,Dn.D)(e).pipe(Cl(i=>yp(function cE(n,e){return null!==n&&e&&e(new Ap(n)),ot(!0)}(i.route.parent,r),function lE(n,e){return null!==n&&e&&e(new Jw(n)),ot(!0)}(i.route,r),function zs(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function Fc(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>ey(()=>ot(c.guards.map(_=>{const b=Np(c.node)??t,T=Lc(_,b);return Oo(function LI(n){return n&&Sh(n.canActivateChild)}(T)?T.canActivateChild(r,n):b.runInContext(()=>T(r,n))).pipe(yu())})).pipe(Cu())));return ot(u).pipe(Cu())}(n,i.path,t),function Lp(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ot(!0);const i=r.map(u=>ey(()=>{const c=Np(e)??t,p=Lc(u,c);return Oo(function FI(n){return n&&Sh(n.canActivate)}(p)?p.canActivate(e,n):c.runInContext(()=>p(e,n))).pipe(yu())}));return ot(i).pipe(Cu())}(n,i.route,t))),yu(i=>!0!==i,!0))}(r,u,n,e):ot(p)),(0,pt.U)(p=>({...t,guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,vi.b)(p=>{if(i.guardsResult=p.guardsResult,Il(p.guardsResult))throw nE(0,p.guardsResult);const _=new Kw(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(_)}),Wn(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",3),!1)),Gp(p=>{if(p.guards.canActivateChecks.length)return ot(p).pipe((0,vi.b)(_=>{const b=new Yw(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}),Or(_=>{let b=!1;return ot(_).pipe(function yE(n,e){return(0,on.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ot(t);let u=0;return(0,Dn.D)(i).pipe(Cl(c=>function By(n,e,t,r){const i=n.routeConfig,u=n._resolve;return void 0!==i?.title&&!xa(i)&&(u[yh]=i.title),function _E(n,e,t,r){const i=function Uy(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return ot({});const u={};return(0,Dn.D)(i).pipe((0,on.z)(c=>function KI(n,e,t,r){const i=Np(e)??r,u=Lc(n,i);return Oo(u.resolve?u.resolve(e,t):i.runInContext(()=>u(e,t)))}(n[c],e,t,r).pipe(yu(),(0,vi.b)(p=>{u[c]=p}))),_p(1),function kw(n){return(0,pt.U)(()=>n)}(u),_u(c=>Th(c)?hs.E:bl(c)))}(u,n,e,r).pipe((0,pt.U)(c=>(n._resolvedData=c,n.data=Dy(n,t).resolve,i&&xa(i)&&(n.data[yh]=i.title),null)))}(c.route,r,n,e)),(0,vi.b)(()=>u++),_p(1),(0,on.z)(c=>u===i.length?ot(t):hs.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,vi.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(_),this.cancelNavigationTransition(_,"",2))}}))}),(0,vi.b)(_=>{const b=new Qw(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}))}),Gp(p=>{const _=b=>{const T=[];b.routeConfig?.loadComponent&&!b.routeConfig._loadedComponent&&T.push(this.configLoader.loadComponent(b.routeConfig).pipe((0,vi.b)(M=>{b.component=M}),(0,pt.U)(()=>{})));for(const M of b.children)T.push(..._(M));return T};return gu(_(p.targetSnapshot.root)).pipe(ty(),xo(1))}),Gp(()=>this.afterPreactivation()),(0,pt.U)(p=>{const _=function II(n,e,t){const r=Ch(n,e._root,t?t._root:void 0);return new Iy(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return i={...p,targetRouterState:_}}),(0,vi.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,pt.U)(r=>(new RI(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,vi.b)({next(){u=!0},complete(){u=!0}}),wp(()=>{u||c||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),_u(p=>{if(c=!0,Vt(p)){iE(p)||(this.navigated=!0,this.restoreHistory(i,!0));const _=new Sp(i.id,this.serializeUrl(i.extractedUrl),p.message,p.cancellationCode);if(r.next(_),iE(p)){const b=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),T={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Hy(i.source)};this.scheduleNavigation(b,"imperative",null,T,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new EI(i.id,this.serializeUrl(i.extractedUrl),p,i.targetSnapshot??void 0);r.next(_);try{i.resolve(this.errorHandler(p))}catch(b){i.reject(b)}}return hs.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const p={...u};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(i.state=p)}const c=this.parseUrl(t.url);this.scheduleNavigation(c,r,u,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Dh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:p,preserveFragment:_}=r,b=i||this.routerState.root,T=_?this.currentUrlTree.fragment:c;let M=null;switch(p){case"merge":M={...this.currentUrlTree.queryParams,...u};break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),Ac(b,this.currentUrlTree,t,M,T??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Il(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function eD(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new h.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...$y}:!1===r?{...JI}:r,Il(t))return Fw(this.currentUrlTree,t,i);const u=this.parseUrl(t);return Fw(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new bu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,c){if(this.disposed)return Promise.resolve(!1);let p,_,b;c?(p=c.resolve,_=c.reject,b=c.promise):b=new Promise((H,K)=>{p=H,_=K});const T=++this.navigationId;let M;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),M=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):M=0,this.setTransition({id:T,targetPageId:M,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:p,reject:_,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(H=>Promise.reject(H))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const u=new Sp(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:function(){return IE()},providedIn:"root"}),n})();function Hy(n){return"imperative"!==n}class SE{}let Gy=(()=>{class n{constructor(t,r,i,u,c){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Wn(t=>t instanceof bu),Cl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,h.MMx)(u.providers,t,`Route: ${u.path}`));const c=u._injector??t,p=u._loadedInjector??c;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?i.push(this.preloadConfig(c,u)):(u.children||u._loadedRoutes)&&i.push(this.processRoutes(p,u.children??u._loadedRoutes))}return(0,Dn.D)(i).pipe((0,Tc.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ot(null);const u=i.pipe((0,on.z)(c=>null===c?ot(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,Dn.D)([u,c]).pipe((0,Tc.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ar),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(SE),h.LFG(zc))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Zp=new h.OlP("");let TE=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Dp?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof bu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ey&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Ey(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Wc(n,e){return{\u0275kind:n,\u0275providers:e}}function Yp(n){return[{provide:Oh,multi:!0,useValue:n}]}function AE(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(ar),i=n.get(qy);1===n.get(Qp)&&r.initialNavigation(),n.get(xE,null,h.XFs.Optional)?.setUpPreloading(),n.get(Zp,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const qy=new h.OlP("",{factory:()=>new gn.x}),Qp=new h.OlP("",{providedIn:"root",factory:()=>1});const xE=new h.OlP("");function nD(n){return Wc(0,[{provide:xE,useExisting:Gy},{provide:SE,useExisting:n}])}const ME=new h.OlP("ROUTER_FORROOT_GUARD"),rD=[Ne,{provide:ly,useClass:cy},{provide:ar,useFactory:IE},Nc,{provide:Sl,useFactory:function Wy(n){return n.routerState.root},deps:[ar]},zc];function Ky(){return new h.PXZ("Router",ar)}let RE=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[rD,[],Yp(t),{provide:ME,useFactory:Jp,deps:[[ar,new h.FiY,new h.tp0]]},{provide:Hc,useValue:r||{}},r?.useHash?{provide:we,useClass:Xe}:{provide:we,useClass:tt},{provide:Zp,useFactory:()=>{const n=(0,h.f3M)(ar),e=(0,h.f3M)(tc),t=(0,h.f3M)(Hc);return t.scrollOffset&&e.setOffset(t.scrollOffset),new TE(n,e,t)}},r?.preloadingStrategy?nD(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:Ky},r?.initialNavigation?$x(r):[],[{provide:eg,useFactory:AE},{provide:h.tb,multi:!0,useExisting:eg}]]}}static forChild(t){return{ngModule:n,providers:[Yp(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ME,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[xy]}),n})();function Jp(n){return"guarded"}function $x(n){return["disabled"===n.initialNavigation?Wc(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(ar);return()=>{e.setUpLocationChangeListener()}}},{provide:Qp,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Wc(2,[{provide:Qp,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(z,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const c=e.get(ar),p=e.get(qy);(function i(u){e.get(ar).events.pipe(Wn(p=>p instanceof bu||p instanceof Sp||p instanceof EI),(0,pt.U)(p=>p instanceof bu||p instanceof Sp&&(0===p.code||1===p.code)&&null),Wn(p=>null!==p),xo(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),c.afterPreactivation=()=>(u(!0),r||p.closed?ot(void 0):p),c.initialNavigation()}))}}]).\u0275providers:[]]}const eg=new h.OlP("");let OE=(()=>{class n{constructor(t,r,i){this.appService=t,this.elementRef=r,this.overlayContainer=i,this.title="wsiizChat",this.overlayContainer.getContainerElement(),this.appService.getFontSize().subscribe(c=>{document.body.style.fontSize=`${c}px`})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(hl),h.Y36(h.SBq),h.Y36(Cc))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:6,vars:0,consts:[[1,"d-flex","flex-column","h-100"],[1,"d-flex","flex-column","justify-content-center","align-content-between","flex-grow-1","gap-5"],[1,"text-center","header"],["src","https://wsiz.edu.pl/wp-content/uploads/2020/10/logo_wsiiz-2.svg","alt","Wy\u017csza Szko\u0142a Informatyki i Zarz\u0105dzania",1,"mb-5"],[1,"w-100"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2),h._UZ(3,"img",3),h.qZA(),h.TgZ(4,"div",4),h._UZ(5,"router-outlet"),h.qZA()()())},dependencies:[Ay],styles:[".credits[_ngcontent-%COMP%]{font-size:.8rem}"]}),n})();var Ma=F(5867),hn=F(5813);class Iu{constructor(e){return e}}class Gs{constructor(){return(0,Ma.C6)()}}const xl=new h.OlP("angularfire2._apps"),oD={provide:Iu,useFactory:function tg(n){return n&&1===n.length?n[0]:new Iu((0,Ma.Mq)())},deps:[[new h.FiY,xl]]},Xy={provide:Gs,deps:[[new h.FiY,xl]]};function kE(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Iu(r)}}let aD=(()=>{class n{constructor(t){(0,Ma.KN)("angularfire",hn.q4.full,"core"),(0,Ma.KN)("angularfire",hn.q4.full,"app"),(0,Ma.KN)("angular",h.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.Lbi))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[oD,Xy]}),n})();function uD(n,...e){return{ngModule:aD,providers:[{provide:xl,useFactory:kE(n),multi:!0,deps:[h.R0b,h.zs3,hn.HU,...e]}]}}const lD=(0,hn.u3)(Ma.ZF,!0),Jy={firebaseConfig:{apiKey:"AIzaSyCSL-6cNS6YvIhRpAUYPUf0FzynthNEDT8",authDomain:"wsiizchat.firebaseapp.com",projectId:"wsiizchat",storageBucket:"wsiizchat.appspot.com",messagingSenderId:"8767642613",appId:"1:8767642613:web:e940db1aed9fad26e99ebc"},production:!0};var Ee=F(5861),Ws=F(9681),rg=F(4859),rn=F(2090),Du=F(1877);const PE=new Map,cD={activated:!1,tokenObservers:[]},dD={initialized:!1,enabled:!1};function kr(n){return PE.get(n)||cD}function ms(n,e){PE.set(n,e)}function Ml(){return dD}class fD{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new rn.BH,yield function No(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new rn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const vn=new rn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Fh(n){if(!kr(n).activated)throw vn.create("use-before-activation",{appName:n.name})}function Su(n,e){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,Ee.Z)(function*({url:n,body:e},t){var r,i;const u={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const K=yield c.getHeartbeatsHeader();K&&(u["X-Firebase-Client"]=K)}const p={method:"POST",body:JSON.stringify(e),headers:u};let _,b;try{_=yield fetch(n,p)}catch(K){throw vn.create("fetch-network-error",{originalErrorMessage:null===(r=K)||void 0===r?void 0:r.message})}if(200!==_.status)throw vn.create("fetch-status-error",{httpStatus:_.status});try{b=yield _.json()}catch(K){throw vn.create("fetch-parse-error",{originalErrorMessage:null===(i=K)||void 0===i?void 0:i.message})}const T=b.ttl.match(/^([\d.]+)(s)$/);if(!T||!T[2]||isNaN(Number(T[1])))throw vn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${b.ttl}`});const M=1e3*Number(T[1]),H=Date.now();return{token:b.token,expireTimeMillis:H+M,issuedAtTimeMillis:H}})).apply(this,arguments)}function Yc(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Lo="firebase-app-check-store";let Lh=null;function t_(){return Lh||(Lh=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var u;e(vn.create("storage-open",{originalErrorMessage:null===(u=i.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Lo,{keyPath:"compositeKey"})}}catch(r){e(vn.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Lh)}function ig(){return(ig=(0,Ee.Z)(function*(n,e){const r=(yield t_()).transaction(Lo,"readwrite"),u=r.objectStore(Lo).put({compositeKey:n,value:e});return new Promise((c,p)=>{u.onsuccess=_=>{c()},r.onerror=_=>{var b;p(vn.create("storage-set",{originalErrorMessage:null===(b=_.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const Jc=new Du.Yd("@firebase/app-check");function Vh(n,e){return(0,rn.hl)()?function LE(n,e){return function n_(n,e){return ig.apply(this,arguments)}(function UE(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Jc.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Bh(){return Ml().enabled}function Uh(){return jh.apply(this,arguments)}function jh(){return(jh=(0,Ee.Z)(function*(){const n=Ml();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const og={error:"UNKNOWN_ERROR"};function ag(n){return rn.US.encodeString(JSON.stringify(n),!1)}function $h(n){return a_.apply(this,arguments)}function a_(){return(a_=(0,Ee.Z)(function*(n,e=!1){const t=n.app;Fh(t);const r=kr(t);let u,i=r.token;if(i&&!ed(i)&&(ms(t,Object.assign(Object.assign({},r),{token:void 0})),i=void 0),!i){const _=yield r.cachedTokenPromise;_&&(ed(_)?i=_:yield Vh(t,void 0))}if(!e&&i&&ed(i))return{token:i.token};let p,c=!1;if(Bh()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Su(Yc(t,yield Uh()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const _=yield r.exchangeTokenPromise;return yield Vh(t,_),ms(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Jc.warn(_.message):Jc.error(_),u=_}return i?u?p=ed(i)?{token:i.token,internalError:u}:d_(u):(p={token:i.token},ms(t,Object.assign(Object.assign({},r),{token:i})),yield Vh(t,i)):p=d_(u),c&&c_(t,p),p})).apply(this,arguments)}function ug(n,e){const t=kr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ms(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function u_(n){const{app:e}=n,t=kr(e);let r=t.tokenRefresher;r||(r=function l_(n){const{app:e}=n;return new fD((0,Ee.Z)(function*(){let r;if(r=kr(e).token?yield $h(n,!0):yield $h(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=kr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ms(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function c_(n,e){const t=kr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function ed(n){return n.expireTimeMillis-Date.now()>0}function d_(n){return{token:ag(og),error:n}}class jE{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=kr(this.app);for(const t of e)ug(this.app,t.next);return Promise.resolve()}}const m_="app-check-internal";!function td(){(0,Ws._registerComponent)(new rg.wA("app-check",n=>function $E(n,e){return new jE(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(m_).initialize()})),(0,Ws._registerComponent)(new rg.wA(m_,n=>function HE(n){return{getToken:e=>$h(n,e),addTokenListener:e=>function Hh(n,e,t,r){const{app:i}=n,u=kr(i),c={next:t,error:r,type:e};if(ms(i,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&ed(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),u_(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>u_(n))}(n,"INTERNAL",e),removeTokenListener:e=>ug(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ws.registerVersion)("@firebase/app-check","0.5.14")}();class nd{constructor(){return(0,hn.vb)("app-check")}}typeof window<"u"&&window;var __=F(9934);class Gh{constructor(e){return e}}class rd{constructor(){return(0,hn.vb)("auth")}}const hg=new h.OlP("angularfire2.auth-instances");function ib(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Gh(r)}}const sb={provide:rd,deps:[[new h.FiY,hg]]},fg={provide:Gh,useFactory:function CD(n,e){const t=(0,hn.JM)("auth",n,e);return t&&new Gh(t)},deps:[[new h.FiY,hg],Iu]};let ID=(()=>{class n{constructor(){(0,Ma.KN)("angularfire",hn.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[fg,sb]}),n})();function ob(n,...e){return{ngModule:ID,providers:[{provide:hg,useFactory:ib(n),multi:!0,deps:[h.R0b,h.zs3,hn.HU,Gs,[new h.FiY,nd],...e]}]}}const PD=(0,hn.u3)(__.n,!0),St=(0,hn.u3)(__.af,!0);var ft,sd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ka={},od=od||{},lt=sd||self;function w_(){}function qh(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function ad(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var pg="closure_uid_"+(1e9*Math.random()>>>0),lb=0;function cb(n,e,t){return n.call.apply(n.bind,arguments)}function db(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function li(n,e,t){return(li=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?cb:db).apply(null,arguments)}function gg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function qr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,u){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[i].apply(r,c)}}function ys(){this.s=this.s,this.o=this.o}var YD={};ys.prototype.s=!1,ys.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function ZD(n){return Object.prototype.hasOwnProperty.call(n,pg)&&n[pg]||(n[pg]=++lb)}(this);delete YD[n]}},ys.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const hb=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function ud(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function E_(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(qh(r)){const i=n.length||0,u=r.length||0;n.length=i+u;for(let c=0;c<u;c++)n[i+c]=r[c]}else n.push(r)}}function Zr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Zr.prototype.h=function(){this.defaultPrevented=!0};var fb=function(){if(!lt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{lt.addEventListener("test",w_,e),lt.removeEventListener("test",w_,e)}catch{}return n}();function mg(n){return/^[\s\xa0]*$/.test(n)}var ld=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ol(n,e){return n<e?-1:n>e?1:0}function yg(){var n=lt.navigator;return n&&(n=n.userAgent)?n:""}function Uo(n){return-1!=yg().indexOf(n)}function b_(n){return b_[" "](n),n}b_[" "]=w_;var C_,n,gb=Uo("Opera"),kl=Uo("Trident")||Uo("MSIE"),mb=Uo("Edge"),_g=mb||kl,yb=Uo("Gecko")&&!(-1!=yg().toLowerCase().indexOf("webkit")&&!Uo("Edge"))&&!(Uo("Trident")||Uo("MSIE"))&&!Uo("Edge"),QD=-1!=yg().toLowerCase().indexOf("webkit")&&!Uo("Edge");function XD(){var n=lt.document;return n?n.documentMode:void 0}e:{var _b="",vb=(n=yg(),yb?/rv:([^\);]+)(\)|;)/.exec(n):mb?/Edge\/([\d\.]+)/.exec(n):kl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):QD?/WebKit\/(\S+)/.exec(n):gb?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(vb&&(_b=vb?vb[1]:""),kl){var vg=XD();if(null!=vg&&vg>parseFloat(_b)){C_=String(vg);break e}}C_=_b}var wg={};var Zh=lt.document&&kl&&(XD()||parseInt(C_,10))||void 0;function Kh(n,e){if(Zr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(yb){e:{try{b_(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:eS[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Kh.X.h.call(this)}}qr(Kh,Zr);var eS={2:"touch",3:"pen",4:"mouse"};Kh.prototype.h=function(){Kh.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Yh="closure_listenable_"+(1e6*Math.random()|0),tS=0;function nS(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++tS,this.ba=this.ea=!1}function Qh(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function S_(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function wb(n){const e={};for(const t in n)e[t]=n[t];return e}const cd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Eb(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<cd.length;u++)t=cd[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Xh(n){this.src=n,this.g={},this.h=0}function T_(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=hb(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(Qh(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Eg(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return i}return-1}Xh.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=Eg(n,e,r,i);return-1<c?(e=n[c],t||(e.ea=!1)):((e=new nS(e,this.src,u,!!r,i)).ea=t,n.push(e)),e};var A_="closure_lm_"+(1e6*Math.random()|0),bg={};function bb(n,e,t,r,i){if(r&&r.once)return x_(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)bb(n,e[u],t,r,i);return null}return t=Ig(t),n&&n[Yh]?n.N(e,t,ad(r)?!!r.capture:!!r,i):Cg(n,e,t,!1,r,i)}function Cg(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=ad(i)?!!i.capture:!!i,p=Jh(n);if(p||(n[A_]=p=new Xh(n)),(t=p.add(e,t,r,c,u)).proxy)return t;if(r=function rS(){const e=iS;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)fb||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Cb(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function x_(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)x_(n,e[u],t,r,i);return null}return t=Ig(t),n&&n[Yh]?n.O(e,t,ad(r)?!!r.capture:!!r,i):Cg(n,e,t,!0,r,i)}function M_(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)M_(n,e[u],t,r,i);else r=ad(r)?!!r.capture:!!r,t=Ig(t),n&&n[Yh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Eg(u=n.g[e],t,r,i))&&(Qh(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Jh(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Eg(e,t,r,i)),(t=-1<n?e[n]:null)&&R_(t))}function R_(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Yh])T_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Cb(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Jh(e))?(T_(t,n),0==t.h&&(t.src=null,e[A_]=null)):Qh(n)}}}function Cb(n){return n in bg?bg[n]:bg[n]="on"+n}function iS(n,e){if(n.ba)n=!0;else{e=new Kh(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&R_(n),n=t.call(r,e)}return n}function Jh(n){return(n=n[A_])instanceof Xh?n:null}var O_="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ig(n){return"function"==typeof n?n:(n[O_]||(n[O_]=function(e){return n.handleEvent(e)}),n[O_])}function Nr(){ys.call(this),this.i=new Xh(this),this.P=this,this.I=null}function Kr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Zr(e,n);else if(e instanceof Zr)e.target=e.target||n;else{var i=e;Eb(e=new Zr(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=Dg(c,r,!0,e)&&i}if(i=Dg(c=e.g=n,r,!0,e)&&i,i=Dg(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=Dg(c=e.g=t[u],r,!1,e)&&i}function Dg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ba&&c.capture==t){var p=c.listener,_=c.ha||c.src;c.ea&&T_(n.i,c),i=!1!==p.call(_,r)&&i}}return i&&!r.defaultPrevented}qr(Nr,ys),Nr.prototype[Yh]=!0,Nr.prototype.removeEventListener=function(n,e,t,r){M_(this,n,e,t,r)},Nr.prototype.M=function(){if(Nr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Qh(t[r]);delete n.g[e],n.h--}}this.I=null},Nr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Nr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var k_=lt.JSON.stringify;function sS(){var n=Sb;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var N_,Ib=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new aS,n=>n.reset());class aS{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Db(n){lt.setTimeout(()=>{throw n},0)}function P_(n,e){N_||function uS(){var n=lt.Promise.resolve(void 0);N_=function(){n.then(lS)}}(),Sg||(N_(),Sg=!0),Sb.add(n,e)}var Sg=!1,Sb=new class oS{constructor(){this.h=this.g=null}add(e,t){const r=Ib.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function lS(){for(var n;n=sS();){try{n.h.call(n.g)}catch(t){Db(t)}var e=Ib;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Sg=!1}function Tg(n,e){Nr.call(this),this.h=n||1,this.g=e||lt,this.j=li(this.lb,this),this.l=Date.now()}function ef(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function tf(n,e,t){if("function"==typeof n)t&&(n=li(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=li(n.handleEvent,n)}return 2147483647<Number(e)?-1:lt.setTimeout(n,e||0)}function F_(n){n.g=tf(()=>{n.g=null,n.i&&(n.i=!1,F_(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}qr(Tg,Nr),(ft=Tg.prototype).ca=!1,ft.R=null,ft.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Kr(this,"tick"),this.ca&&(ef(this),this.start()))}},ft.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ft.M=function(){Tg.X.M.call(this),ef(this),delete this.g};class L_ extends ys{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:F_(this)}M(){super.M(),this.g&&(lt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nf(n){ys.call(this),this.h=n,this.g={}}qr(nf,ys);var Tb=[];function Ag(n,e,t,r){Array.isArray(t)||(t&&(Tb[0]=t.toString()),t=Tb);for(var i=0;i<t.length;i++){var u=bb(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Ab(n){S_(n.g,function(e,t){this.g.hasOwnProperty(t)&&R_(e)},n),n.g={}}function rf(){this.g=!0}function hd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Mb(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return k_(t)}catch{return e}}(n,t)+(r?" "+r:"")})}nf.prototype.M=function(){nf.X.M.call(this),Ab(this)},nf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},rf.prototype.Aa=function(){this.g=!1},rf.prototype.info=function(){};var Pa={},Rb=null;function fd(){return Rb=Rb||new Nr}function Ob(n){Zr.call(this,Pa.Pa,n)}function pd(n){const e=fd();Kr(e,new Ob(e,n))}function xg(n,e){Zr.call(this,Pa.STAT_EVENT,n),this.stat=e}function ci(n){const e=fd();Kr(e,new xg(e,n))}function V_(n,e){Zr.call(this,Pa.Qa,n),this.size=e}function gd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return lt.setTimeout(function(){n()},e)}Pa.Pa="serverreachability",qr(Ob,Zr),Pa.STAT_EVENT="statevent",qr(xg,Zr),Pa.Qa="timingevent",qr(V_,Zr);var sf={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},kb={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function B_(){}function Nb(){}B_.prototype.h=null;var U_,md={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Fb(){Zr.call(this,"d")}function Mg(){Zr.call(this,"c")}function Rg(){}function Og(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new nf(this),this.O=dS,this.T=new Tg(n=_g?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new cS}function cS(){this.i=null,this.g="",this.h=!1}qr(Fb,Zr),qr(Mg,Zr),qr(Rg,B_),Rg.prototype.g=function(){return new XMLHttpRequest},Rg.prototype.i=function(){return{}},U_=new Rg;var dS=45e3,j_={},kg={};function $_(n,e,t){n.K=1,n.v=Vg(Au(e)),n.s=t,n.P=!0,Lb(n,null)}function Lb(n,e){n.F=Date.now(),af(n),n.A=Au(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),zb(t.i,"t",r),n.C=0,t=n.l.H,n.h=new cS,n.g=Wg(n.l,t?e:null,!n.s),0<n.N&&(n.L=new L_(li(n.La,n,n.g),n.N)),Ag(n.S,n.g,"readystatechange",n.ib),e=n.H?wb(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),pd(1),function dd(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",p=u.split("&"),_=0;_<p.length;_++){var b=p[_].split("=");if(1<b.length){var T=b[0];b=b[1];var M=T.split("_");c=2<=M.length&&"type"==M[1]?c+(T+"=")+b+"&":c+(T+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Vb(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Bb(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=hS(n,t),i==kg){4==e&&(n.o=4,ci(14),r=!1),hd(n.j,n.m,null,"[Incomplete Response]");break}if(i==j_){n.o=4,ci(15),hd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}hd(n.j,n.m,i,null),Ng(n,i)}Vb(n)&&i!=kg&&i!=j_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ci(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),wf(e),e.K=!0,ci(11))):(hd(n.j,n.m,t,"[Invalid Chunked Response]"),Zs(n),uf(n))}function hS(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?kg:(t=Number(e.substring(t,r)),isNaN(t)?j_:(r+=1)+t>e.length?kg:(e=e.substr(r,t),n.C=r+t,e))}function af(n){n.V=Date.now()+n.O,Ub(n,n.O)}function Ub(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=gd(li(n.gb,n),e)}function Pg(n){n.B&&(lt.clearTimeout(n.B),n.B=null)}function uf(n){0==n.l.G||n.I||r0(n.l,n)}function Zs(n){Pg(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,ef(n.T),Ab(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Ng(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Yb(t.h,n)))if(!n.J&&Yb(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Ef(t),zg(t)}wd(t),ci(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=gd(li(t.cb,t),6e3));if(1>=Kb(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else _s(t,11)}else if((n.J||t.g==n)&&Ef(t),!mg(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let b=i[e];if(t.T=b[0],b=b[1],2==t.G)if("c"==b[0]){t.I=b[1],t.ka=b[2];const T=b[3];null!=T&&(t.ma=T,t.j.info("VER="+t.ma));const M=b[4];null!=M&&(t.Ca=M,t.j.info("SVER="+t.Ca));const H=b[5];null!=H&&"number"==typeof H&&0<H&&(t.J=r=1.5*H,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const K=n.g;if(K){const te=K.g?K.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(te){var u=r.h;u.g||-1==te.indexOf("spdy")&&-1==te.indexOf("quic")&&-1==te.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(pf(u,u.h),u.h=null))}if(r.D){const Me=K.g?K.g.getResponseHeader("X-HTTP-Session-Id"):null;Me&&(r.za=Me,Zn(r.F,r.D,Me))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var c=n;if((r=t).sa=rv(r,r.H?r.ka:null,r.V),c.J){Ug(r.h,c);var p=c,_=r.J;_&&p.setTimeout(_),p.B&&(Pg(p),af(p)),r.g=c}else tv(r);0<t.i.length&&Gg(t)}else"stop"!=b[0]&&"close"!=b[0]||_s(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?_s(t,7):vf(t):"noop"!=b[0]&&t.l&&t.l.wa(b),t.A=0)}pd(4)}catch{}}function H_(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(qh(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function $b(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(qh(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function jb(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(qh(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}(ft=Og.prototype).setTimeout=function(n){this.O=n},ft.ib=function(n){n=n.target;const e=this.L;e&&3==Mu(n)?e.l():this.La(n)},ft.La=function(n){try{if(n==this.g)e:{const T=Mu(this.g);var e=this.g.Ea();const M=this.g.aa();if(!(3>T)&&(3!=T||_g||this.g&&(this.h.h||this.g.fa()||vS(this.g)))){this.I||4!=T||7==e||pd(8==e||0>=M?3:2),Pg(this);var t=this.g.aa();this.Y=t;t:if(Vb(this)){var r=vS(this.g);n="";var i=r.length,u=4==Mu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Zs(this),uf(this);var c="";break t}this.h.i=new lt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=200==t,function xb(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.U,T,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var p,_=this.g;if((p=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!mg(p)){var b=p;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,ci(12),Zs(this),uf(this);break e}hd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ng(this,t)}this.P?(Bb(this,T,c),_g&&this.i&&3==T&&(Ag(this.S,this.T,"tick",this.hb),this.T.start())):(hd(this.j,this.m,c,null),Ng(this,c)),4==T&&Zs(this),this.i&&!this.I&&(4==T?r0(this.l,this):(this.i=!1,af(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,ci(12)):(this.o=0,ci(13)),Zs(this),uf(this)}}}catch{}},ft.hb=function(){if(this.g){var n=Mu(this.g),e=this.g.fa();this.C<e.length&&(Pg(this),Bb(this,n,e),this.i&&4!=n&&af(this))}},ft.cancel=function(){this.I=!0,Zs(this)},ft.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function IM(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(pd(3),ci(17)),Zs(this),this.o=2,uf(this)):Ub(this,this.V-n)};var z_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pl(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Pl){this.h=void 0!==e?e:n.h,Fg(this,n.j),this.s=n.s,this.g=n.g,Lg(this,n.m),this.l=n.l,e=n.i;var t=new df;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Hb(this,t),this.o=n.o}else n&&(t=String(n).match(z_))?(this.h=!!e,Fg(this,t[1]||"",!0),this.s=Na(t[2]||""),this.g=Na(t[3]||"",!0),Lg(this,t[4]),this.l=Na(t[5]||"",!0),Hb(this,t[6]||"",!0),this.o=Na(t[7]||"")):(this.h=!!e,this.i=new df(null,this.h))}function Au(n){return new Pl(n)}function Fg(n,e,t){n.j=t?Na(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Lg(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Hb(n,e,t){e instanceof df?(n.i=e,function Gb(n,e){e&&!n.j&&(xu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(hf(this,r),zb(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=lf(e,cf)),n.i=new df(e,n.h))}function Zn(n,e,t){n.i.set(e,t)}function Vg(n){return Zn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Na(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function lf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,G_),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function G_(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Pl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(lf(e,Ks,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(lf(e,Ks,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(lf(t,"/"==t.charAt(0)?W_:pS,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",lf(t,gS)),n.join("")};var Ks=/[#\/\?@]/g,pS=/[#\?:]/g,W_=/[#\?]/g,cf=/[#\?@]/g,gS=/#/g;function df(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function xu(n){n.g||(n.g=new Map,n.h=0,n.i&&function fS(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function hf(n,e){xu(n),e=yd(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function ff(n,e){return xu(n),e=yd(n,e),n.g.has(e)}function zb(n,e,t){hf(n,e),0<t.length&&(n.i=null,n.g.set(yd(n,e),ud(t)),n.h+=t.length)}function yd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Bg(n){this.l=n||qb,n=lt.PerformanceNavigationTiming?0<(n=lt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(lt.g&&lt.g.Ga&&lt.g.Ga()&&lt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ft=df.prototype).add=function(n,e){xu(this),this.i=null,n=yd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ft.forEach=function(n,e){xu(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},ft.oa=function(){xu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let u=0;u<i.length;u++)t.push(e[r])}return t},ft.W=function(n){xu(this);let e=[];if("string"==typeof n)ff(this,n)&&(e=e.concat(this.g.get(yd(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ft.set=function(n,e){return xu(this),this.i=null,ff(this,n=yd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ft.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ft.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),c=this.W(r);for(r=0;r<c.length;r++){var i=u;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var qb=10;function Zb(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Kb(n){return n.h?1:n.g?n.g.size:0}function Yb(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function pf(n,e){n.g?n.g.add(e):n.h=e}function Ug(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function q_(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return ud(n.i)}function gf(){}function Z_(){this.g=new gf}function mS(n,e,t){const r=t||"";try{H_(n,function(i,u){let c=i;ad(i)&&(c=k_(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function jg(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function mf(n){this.l=n.ac||null,this.j=n.jb||!1}function yf(n,e){Nr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=_f,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Bg.prototype.cancel=function(){if(this.i=q_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},gf.prototype.stringify=function(n){return lt.JSON.stringify(n,void 0)},gf.prototype.parse=function(n){return lt.JSON.parse(n,void 0)},qr(mf,B_),mf.prototype.g=function(){return new yf(this.l,this.j)},mf.prototype.i=function(n){return function(){return n}}({}),qr(yf,Nr);var _f=0;function K_(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function _d(n){n.readyState=4,n.l=null,n.j=null,n.A=null,vd(n)}function vd(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ft=yf.prototype).open=function(n,e){if(this.readyState!=_f)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,vd(this)},ft.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||lt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ft.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,_d(this)),this.readyState=_f},ft.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,vd(this)),this.g&&(this.readyState=3,vd(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof lt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;K_(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},ft.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?_d(this):vd(this),3==this.readyState&&K_(this)}},ft.Va=function(n){this.g&&(this.response=this.responseText=n,_d(this))},ft.Ua=function(n){this.g&&(this.response=n,_d(this))},ft.ga=function(){this.g&&_d(this)},ft.setRequestHeader=function(n,e){this.v.append(n,e)},ft.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ft.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(yf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Qb=lt.JSON.parse;function ur(n){Nr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Y_,this.K=this.L=!1}qr(ur,Nr);var Y_="",Xb=/^https?$/i,_S=["POST","PUT"];function Q_(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,di(n),$g(n)}function di(n){n.D||(n.D=!0,Kr(n,"complete"),Kr(n,"error"))}function Nl(n){if(n.h&&typeof od<"u"&&(!n.C[1]||4!=Mu(n)||2!=n.aa()))if(n.v&&4==Mu(n))tf(n.Ha,0,n);else if(Kr(n,"readystatechange"),4==Mu(n)){n.h=!1;try{const p=n.aa();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(z_)[1]||null;if(!i&&lt.self&&lt.self.location){var u=lt.self.location.protocol;i=u.substr(0,u.length-1)}r=!Xb.test(i?i.toLowerCase():"")}t=r}if(t)Kr(n,"complete"),Kr(n,"success");else{n.m=6;try{var c=2<Mu(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.aa()+"]",di(n)}}finally{$g(n)}}}function $g(n,e){if(n.g){e0(n);const t=n.g,r=n.C[0]?w_:null;n.g=null,n.C=null,e||Kr(n,"ready");try{t.onreadystatechange=r}catch{}}}function e0(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(lt.clearTimeout(n.A),n.A=null)}function Mu(n){return n.g?n.g.readyState:0}function vS(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Y_:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function X_(n){let e="";return S_(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Hg(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=X_(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Zn(n,e,t))}function Fa(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function t0(n){this.Ca=0,this.i=[],this.j=new rf,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Fa("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Fa("baseRetryDelayMs",5e3,n),this.bb=Fa("retryDelaySeedMs",1e4,n),this.$a=Fa("forwardChannelMaxRetries",2,n),this.ta=Fa("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Bg(n&&n.concurrentRequestLimit),this.Fa=new Z_,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function vf(n){if(J_(n),3==n.G){var e=n.U++,t=Au(n.F);Zn(t,"SID",n.I),Zn(t,"RID",e),Zn(t,"TYPE","terminate"),Fl(n,t),(e=new Og(n,n.j,e,void 0)).K=2,e.v=Vg(Au(t)),t=!1,lt.navigator&&lt.navigator.sendBeacon&&(t=lt.navigator.sendBeacon(e.v.toString(),"")),!t&&lt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Wg(e.l,null),e.g.da(e.v)),e.F=Date.now(),af(e)}s0(n)}function zg(n){n.g&&(wf(n),n.g.cancel(),n.g=null)}function J_(n){zg(n),n.u&&(lt.clearTimeout(n.u),n.u=null),Ef(n),n.h.cancel(),n.m&&("number"==typeof n.m&&lt.clearTimeout(n.m),n.m=null)}function Gg(n){Zb(n.h)||n.m||(n.m=!0,P_(n.Ja,n),n.C=0)}function n0(n,e){var t;t=e?e.m:n.U++;const r=Au(n.F);Zn(r,"SID",n.I),Zn(r,"RID",t),Zn(r,"AID",n.T),Fl(n,r),n.o&&n.s&&Hg(r,n.o,n.s),t=new Og(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=ev(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),pf(n.h,t),$_(t,r,e)}function Fl(n,e){n.ia&&S_(n.ia,function(t,r){Zn(e,r,t)}),n.l&&H_({},function(t,r){Zn(e,r,t)})}function ev(n,e,t){t=Math.min(n.i.length,t);var r=n.l?li(n.l.Ra,n.l,n):null;e:{var i=n.i;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let p=!0;for(let _=0;_<t;_++){let b=i[_].h;const T=i[_].g;if(b-=u,0>b)u=Math.max(0,i[_].h-100),p=!1;else try{mS(T,c,"req"+b+"_")}catch{r&&r(T)}}if(p){r=c.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function tv(n){n.g||n.u||(n.Z=1,P_(n.Ia,n),n.A=0)}function wd(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=gd(li(n.Ia,n),nv(n,n.A)),n.A++,0))}function wf(n){null!=n.B&&(lt.clearTimeout(n.B),n.B=null)}function ES(n){n.g=new Og(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Au(n.sa);Zn(e,"RID","rpc"),Zn(e,"SID",n.I),Zn(e,"CI",n.L?"0":"1"),Zn(e,"AID",n.T),Zn(e,"TYPE","xmlhttp"),Fl(n,e),n.o&&n.s&&Hg(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Vg(Au(e)),t.s=null,t.P=!0,Lb(t,n)}function Ef(n){null!=n.v&&(lt.clearTimeout(n.v),n.v=null)}function r0(n,e){var t=null;if(n.g==e){Ef(n),wf(n),n.g=null;var r=2}else{if(!Yb(n.h,e))return;t=e.D,Ug(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Kr(r=fd(),new V_(r,t,e,i)),Gg(n)}else tv(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function wS(n,e){return!(Kb(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=gd(li(n.Ja,n,e),nv(n,n.C)),n.C++,0)))}(n,e)||2==r&&wd(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:_s(n,5);break;case 4:_s(n,10);break;case 3:_s(n,6);break;default:_s(n,2)}}function nv(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function _s(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=li(n.kb,n);t||(t=new Pl("//www.google.com/images/cleardot.gif"),lt.location&&"http"==lt.location.protocol||Fg(t,"https"),Vg(t)),function yS(n,e){const t=new rf;if(lt.Image){const r=new Image;r.onload=gg(jg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=gg(jg,t,r,"TestLoadImage: error",!1,e),r.onabort=gg(jg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=gg(jg,t,r,"TestLoadImage: timeout",!1,e),lt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ci(2);n.G=0,n.l&&n.l.va(e),s0(n),J_(n)}function s0(n){if(n.G=0,n.la=[],n.l){const e=q_(n.h);(0!=e.length||0!=n.i.length)&&(E_(n.la,e),E_(n.la,n.i),n.h.i.length=0,ud(n.i),n.i.length=0),n.l.ua()}}function rv(n,e,t){var r=t instanceof Pl?Au(t):new Pl(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Lg(r,r.m);else{var i=lt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var u=new Pl(null,void 0);r&&Fg(u,r),e&&(u.g=e),i&&Lg(u,i),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&Zn(r,t,e),Zn(r,"VER",n.ma),Fl(n,r),r}function Wg(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ur(t&&n.Da&&!n.ra?new mf({jb:!0}):n.ra)).Ka(n.H),e}function bS(){}function qg(){if(kl&&!(10<=Number(Zh)))throw Error("Environmental error: no available transport.")}function vs(n,e){Nr.call(this),this.g=new t0(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!mg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!mg(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ed(this)}function o0(n){Fb.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function a0(){Mg.call(this),this.status=1}function Ed(n){this.g=n}(ft=ur.prototype).Ka=function(n){this.L=n},ft.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():U_.g(),this.C=function Pb(n){return n.h||(n.h=n.i())}(this.u?this.u:U_),this.g.onreadystatechange=li(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Q_(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),i=lt.FormData&&n instanceof lt.FormData,!(0<=hb(_S,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,c]of t)this.g.setRequestHeader(u,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{e0(this),0<this.B&&((this.K=function Jb(n){return kl&&function JD(){return function pb(n){var e=wg;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=ld(String(C_)).split("."),t=ld("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",u=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=Ol(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||Ol(0==i[2].length,0==u[2].length)||Ol(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=li(this.qa,this)):this.A=tf(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Q_(this,u)}},ft.qa=function(){typeof od<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Kr(this,"timeout"),this.abort(8))},ft.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Kr(this,"complete"),Kr(this,"abort"),$g(this))},ft.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),$g(this,!0)),ur.X.M.call(this)},ft.Ha=function(){this.s||(this.F||this.v||this.l?Nl(this):this.fb())},ft.fb=function(){Nl(this)},ft.aa=function(){try{return 2<Mu(this)?this.g.status:-1}catch{return-1}},ft.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ft.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Qb(e)}},ft.Ea=function(){return this.m},ft.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ft=t0.prototype).ma=8,ft.G=1,ft.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Og(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=wb(u),Eb(u,this.S)):u=this.S),null!==this.o||this.N||(i.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ev(this,i,e),Zn(t=Au(this.F),"RID",n),Zn(t,"CVER",22),this.D&&Zn(t,"X-HTTP-Session-Id",this.D),Fl(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(X_(u)))+"&"+e:this.o&&Hg(t,this.o,u)),pf(this.h,i),this.Ya&&Zn(t,"TYPE","init"),this.O?(Zn(t,"$req",e),Zn(t,"SID","null"),i.Z=!0,$_(i,t,null)):$_(i,t,e),this.G=2}}else 3==this.G&&(n?n0(this,n):0==this.i.length||Zb(this.h)||n0(this))},ft.Ia=function(){if(this.u=null,ES(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=gd(li(this.eb,this),n)}},ft.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,ci(10),zg(this),ES(this))},ft.cb=function(){null!=this.v&&(this.v=null,zg(this),wd(this),ci(19))},ft.kb=function(n){n?(this.j.info("Successfully pinged google.com"),ci(2)):(this.j.info("Failed to ping google.com"),ci(1))},(ft=bS.prototype).xa=function(){},ft.wa=function(){},ft.va=function(){},ft.ua=function(){},ft.Ra=function(){},qg.prototype.g=function(n,e){return new vs(n,e)},qr(vs,Nr),vs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;ci(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=rv(n,null,n.V),Gg(n)},vs.prototype.close=function(){vf(this.g)},vs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=k_(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Gg(e)},vs.prototype.M=function(){this.g.l=null,delete this.j,vf(this.g),delete this.g,vs.X.M.call(this)},qr(o0,Fb),qr(a0,Mg),qr(Ed,bS),Ed.prototype.xa=function(){Kr(this.g,"a")},Ed.prototype.wa=function(n){Kr(this.g,new o0(n))},Ed.prototype.va=function(n){Kr(this.g,new a0(n))},Ed.prototype.ua=function(){Kr(this.g,"b")},qg.prototype.createWebChannel=qg.prototype.g,vs.prototype.send=vs.prototype.u,vs.prototype.open=vs.prototype.m,vs.prototype.close=vs.prototype.close,sf.NO_ERROR=0,sf.TIMEOUT=8,sf.HTTP_ERROR=6,kb.COMPLETE="complete",Nb.EventType=md,md.OPEN="a",md.CLOSE="b",md.ERROR="c",md.MESSAGE="d",Nr.prototype.listen=Nr.prototype.N,ur.prototype.listenOnce=ur.prototype.O,ur.prototype.getLastError=ur.prototype.Oa,ur.prototype.getLastErrorCode=ur.prototype.Ea,ur.prototype.getStatus=ur.prototype.aa,ur.prototype.getResponseJson=ur.prototype.Sa,ur.prototype.getResponseText=ur.prototype.fa,ur.prototype.send=ur.prototype.da,ur.prototype.setWithCredentials=ur.prototype.Ka;var u0=ka.createWebChannelTransport=function(){return new qg},l0=ka.getStatEventTarget=function(){return fd()},iv=ka.ErrorCode=sf,c0=ka.EventType=kb,d0=ka.Event=Pa,h0=ka.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},CS=ka.FetchXmlHttpFactory=mf,bf=ka.WebChannel=Nb,IS=ka.XhrIo=ur;const sv="@firebase/firestore";class Ir{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ir.UNAUTHENTICATED=new Ir(null),Ir.GOOGLE_CREDENTIALS=new Ir("google-credentials-uid"),Ir.FIRST_PARTY=new Ir("first-party-uid"),Ir.MOCK_USER=new Ir("mock-user");let Ll="9.12.0";const La=new Du.Yd("@firebase/firestore");function ov(){return La.logLevel}function He(n,...e){if(La.logLevel<=Du.in.DEBUG){const t=e.map(f0);La.debug(`Firestore (${Ll}): ${n}`,...t)}}function lr(n,...e){if(La.logLevel<=Du.in.ERROR){const t=e.map(f0);La.error(`Firestore (${Ll}): ${n}`,...t)}}function bd(n,...e){if(La.logLevel<=Du.in.WARN){const t=e.map(f0);La.warn(`Firestore (${Ll}): ${n}`,...t)}}function f0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ct(n="Unexpected state"){const e=`FIRESTORE (${Ll}) INTERNAL ASSERTION FAILED: `+n;throw lr(e),new Error(e)}function kt(n,e){n||ct()}function et(n,e){return n}const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Le extends rn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class cr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class SS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class p0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ir.UNAUTHENTICATED))}shutdown(){}}class Zg{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class g0{constructor(e){this.t=e,this.currentUser=Ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=b=>this.i!==i?(i=this.i,t(b)):Promise.resolve();let c=new cr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new cr,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const b=c;e.enqueueRetryable((0,Ee.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},_=b=>{He("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(b=>_(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?_(b):(He("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new cr)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(He("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(kt("string"==typeof r.accessToken),new SS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return kt(null===e||"string"==typeof e),new Ir(e)}}class m0{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Ir.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(kt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class SM{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new m0(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Ir.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Kg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class y0{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&He("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.A;return this.A=u.token,He("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{He("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?i(u):He("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(kt("string"==typeof t.token),this.A=t.token,new Kg(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function _0(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class TS{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=_0(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Bt(n,e){return n<e?-1:n>e?1:0}function Cd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function v0(n){return n+"\0"}class On{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Le(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Le(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Le(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Le(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return On.fromMillis(Date.now())}static fromDate(e){return On.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new On(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Bt(this.nanoseconds,e.nanoseconds):Bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Rt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Rt(e)}static min(){return new Rt(new On(0,0))}static max(){return new Rt(new On(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Yg{constructor(e,t,r){void 0===t?t=0:t>e.length&&ct(),void 0===r?r=e.length-t:r>e.length-t&&ct(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Yg.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yg?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class an extends Yg{construct(e,t,r){return new an(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Le(me.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new an(t)}static emptyPath(){return new an([])}}const AM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dr extends Yg{construct(e,t,r){return new dr(e,t,r)}static isValidIdentifier(e){return AM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new dr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Le(me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new Le(me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Le(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===p?(c=!c,i++):"."!==p||c?(r+=p,i++):(u(),i++)}if(u(),c)throw new Le(me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dr(t)}static emptyPath(){return new dr([])}}class Ye{constructor(e){this.path=e}static fromPath(e){return new Ye(an.fromString(e))}static fromName(e){return new Ye(an.fromString(e).popFirst(5))}static empty(){return new Ye(an.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===an.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return an.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ye(new an(e.slice()))}}class Qg{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function w0(n){return n.fields.find(e=>2===e.kind)}function Vl(n){return n.fields.filter(e=>2!==e.kind)}Qg.UNKNOWN_ID=-1;class Cf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ei{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ei(0,Ji.min())}}function b0(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Rt.fromTimestamp(1e9===r?new On(t+1,0):new On(t,r));return new Ji(i,Ye.empty(),e)}function Xg(n){return new Ji(n.readTime,n.key,-1)}class Ji{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ji(Rt.min(),Ye.empty(),-1)}static max(){return new Ji(Rt.max(),Ye.empty(),-1)}}function Ri(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ye.comparator(n.documentKey,e.documentKey),0!==t?t:Bt(n.largestBatchId,e.largestBatchId))}const C0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Jg{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ru(n){return av.apply(this,arguments)}function av(){return av=(0,Ee.Z)(function*(n){if(n.code!==me.FAILED_PRECONDITION||n.message!==C0)throw n;He("LocalStore","Unexpectedly lost primary lease")}),av.apply(this,arguments)}class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.reject(t)}static resolve(e){return new ce((t,r)=>{t(e)})}static reject(e){return new ce((t,r)=>{r(e)})}static waitFor(e){return new ce((t,r)=>{let i=0,u=0,c=!1;e.forEach(p=>{++i,p.next(()=>{++u,c&&u===i&&t()},_=>r(_))}),c=!0,u===i&&t()})}static or(e){let t=ce.resolve(!1);for(const r of e)t=t.next(i=>i?ce.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}static mapArray(e,t){return new ce((r,i)=>{const u=e.length,c=new Array(u);let p=0;for(let _=0;_<u;_++){const b=_;t(e[b]).next(T=>{c[b]=T,++p,p===u&&r(c)},T=>i(T))}})}static doWhile(e,t){return new ce((r,i)=>{const u=()=>{!0===e()?t().next(()=>{u()},i):r()};u()})}}class If{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new cr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Id(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=Df(r.target.error);this.P.reject(new Id(e,i))}}static open(e,t,r,i){try{return new If(t,e.transaction(i,r))}catch(u){throw new Id(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(He("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new xS(t)}}class ws{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===ws.D((0,rn.z$)())&&lr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return He("SimpleDb","Removing database:",e),Ou(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,rn.hl)())return!1;if(ws.N())return!0;const e=(0,rn.z$)(),t=ws.D(e),r=0<t&&t<10,i=ws.k(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(He("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new Id(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const p=c.target.error;i("VersionError"===p.name?new Le(me.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Le(me.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new Id(e,p))},u.onupgradeneeded=c=>{He("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.S.$(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{He("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,Ee.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.F(e);const _=If.open(u.db,e,c?"readonly":"readwrite",r),b=i(_).next(T=>(_.V(),T)).catch(T=>(_.abort(T),ce.reject(T))).toPromise();return b.catch(()=>{}),yield _.v,b}catch(_){const b=_,T="FirebaseError"!==b.name&&p<3;if(He("SimpleDb","Transaction failed with error:",b.message,"Retrying:",T),u.close(),!T)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class AS{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Ou(this.U.delete())}}class Id extends Le{constructor(e,t){super(me.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Va(n){return"IndexedDbTransactionError"===n.name}class xS{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(He("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(He("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ou(r)}add(e){return He("SimpleDb","ADD",this.store.name,e,e),Ou(this.store.add(e))}get(e){return Ou(this.store.get(e)).next(t=>(void 0===t&&(t=null),He("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return He("SimpleDb","DELETE",this.store.name,e),Ou(this.store.delete(e))}count(){return He("SimpleDb","COUNT",this.store.name),Ou(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.H(i,(c,p)=>{u.push(p)}).next(()=>u)}{const i=this.store.getAll(r.range);return new ce((u,c)=>{i.onerror=p=>{c(p.target.error)},i.onsuccess=p=>{u(p.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ce((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Y(e,t){He("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(u,c,p)=>p.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new ce((r,i)=>{t.onerror=u=>{const c=Df(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}H(e,t){const r=[];return new ce((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void i();const _=new AS(p),b=t(p.primaryKey,p.value,_);if(b instanceof ce){const T=b.catch(M=>(_.done(),ce.reject(M)));r.push(T)}_.isDone?i():null===_.G?p.continue():p.continue(_.G)}}).next(()=>ce.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ou(n){return new ce((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Df(r.target.error);t(i)}})}let I0=!1;function Df(n){const e=ws.D((0,rn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return I0||(I0=!0,setTimeout(()=>{throw r},0)),r}}return n}class ku{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;He("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ee.Z)(function*(){t.task=null;try{He("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Va(r)?He("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Ru(r)}yield t.nt(6e4)}))}}class D0{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Ee.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,u=!0;return ce.doWhile(()=>!0===u&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return He("IndexBackiller",`Processing collection: ${c}`),this.rt(e,c,i).next(p=>{i-=p,r.add(c)});u=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ot(i,u)).next(p=>(He("IndexBackiller",`Updating offset: ${p}`),this.localStore.indexManager.updateCollectionGroup(e,t,p))).next(()=>c.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,u)=>{const c=Xg(u);Ri(c,r)>0&&(r=c)}),new Ji(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class hi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function jo(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Bl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function MS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}hi.at=-1;class hr{constructor(e,t){this.comparator=e,this.root=t||Yr.EMPTY}insert(e,t){return new hr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yr.BLACK,null,null))}remove(e){return new hr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new em(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new em(this.root,e,this.comparator,!1)}getReverseIterator(){return new em(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new em(this.root,e,this.comparator,!0)}}class em{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yr{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=r??Yr.RED,this.left=i??Yr.EMPTY,this.right=u??Yr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new Yr(e??this.key,t??this.value,r??this.color,i??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Yr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ct();const e=this.left.check();if(e!==this.right.check())throw ct();return e+(this.isRed()?0:1)}}Yr.EMPTY=null,Yr.RED=!0,Yr.BLACK=!1,Yr.EMPTY=new class{constructor(){this.size=0}get key(){throw ct()}get value(){throw ct()}get color(){throw ct()}get left(){throw ct()}get right(){throw ct()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Yr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class An{constructor(e){this.comparator=e,this.data=new hr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new uv(this.data.getIterator())}getIteratorFrom(e){return new uv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof An)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new An(this.comparator);return t.data=e,t}}class uv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Sf(n){return n.hasNext()?n.getNext():void 0}class Oi{constructor(e){this.fields=e,e.sort(dr.comparator)}static empty(){return new Oi([])}unionWith(e){let t=new An(dr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Oi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Cd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class yr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new yr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new yr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yr.EMPTY_BYTE_STRING=new yr("");const MM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $o(n){if(kt(!!n),"string"==typeof n){let e=0;const t=MM.exec(n);if(kt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nr(n.seconds),nanos:nr(n.nanos)}}function nr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Pu(n){return"string"==typeof n?yr.fromBase64String(n):yr.fromUint8Array(n)}function tm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function lv(n){const e=n.mapValue.fields.__previous_value__;return tm(e)?lv(e):e}function Dd(n){const e=$o(n.mapValue.fields.__local_write_time__.timestampValue);return new On(e.seconds,e.nanos)}class nm{constructor(e,t,r,i,u,c,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=_}}class Ys{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ys("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ys&&e.projectId===this.projectId&&e.database===this.database}}function Sd(n){return null==n}function Tf(n){return 0===n&&1/n==-1/0}function cv(n){return"number"==typeof n&&Number.isInteger(n)&&!Tf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Ba={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},rm={nullValue:"NULL_VALUE"};function Ul(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tm(n)?4:A0(n)?9007199254740991:10:ct()}function Ua(n,e){if(n===e)return!0;const t=Ul(n);if(t!==Ul(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Dd(n).isEqual(Dd(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=$o(r.timestampValue),c=$o(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Pu(n.bytesValue).isEqual(Pu(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return nr(r.geoPointValue.latitude)===nr(i.geoPointValue.latitude)&&nr(r.geoPointValue.longitude)===nr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return nr(r.integerValue)===nr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=nr(r.doubleValue),c=nr(i.doubleValue);return u===c?Tf(u)===Tf(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return Cd(n.arrayValue.values||[],e.arrayValue.values||[],Ua);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(jo(u)!==jo(c))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===c[p]||!Ua(u[p],c[p])))return!1;return!0}(n,e);default:return ct()}var i}function im(n,e){return void 0!==(n.values||[]).find(t=>Ua(t,e))}function ja(n,e){if(n===e)return 0;const t=Ul(n),r=Ul(e);if(t!==r)return Bt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Bt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=nr(i.integerValue||i.doubleValue),p=nr(u.integerValue||u.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return S0(n.timestampValue,e.timestampValue);case 4:return S0(Dd(n),Dd(e));case 5:return Bt(n.stringValue,e.stringValue);case 6:return function(i,u){const c=Pu(i),p=Pu(u);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),p=u.split("/");for(let _=0;_<c.length&&_<p.length;_++){const b=Bt(c[_],p[_]);if(0!==b)return b}return Bt(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=Bt(nr(i.latitude),nr(u.latitude));return 0!==c?c:Bt(nr(i.longitude),nr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],p=u.values||[];for(let _=0;_<c.length&&_<p.length;++_){const b=ja(c[_],p[_]);if(b)return b}return Bt(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===Ba.mapValue&&u===Ba.mapValue)return 0;if(i===Ba.mapValue)return 1;if(u===Ba.mapValue)return-1;const c=i.fields||{},p=Object.keys(c),_=u.fields||{},b=Object.keys(_);p.sort(),b.sort();for(let T=0;T<p.length&&T<b.length;++T){const M=Bt(p[T],b[T]);if(0!==M)return M;const H=ja(c[p[T]],_[b[T]]);if(0!==H)return H}return Bt(p.length,b.length)}(n.mapValue,e.mapValue);default:throw ct()}}function S0(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Bt(n,e);const t=$o(n),r=$o(e),i=Bt(t.seconds,r.seconds);return 0!==i?i:Bt(t.nanos,r.nanos)}function Td(n){return dv(n)}function dv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=$o(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Pu(n.bytesValue).toBase64():"referenceValue"in n?Ye.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=dv(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const p of i)c?c=!1:u+=",",u+=`${p}:${dv(r.fields[p])}`;return u+"}"}(n.mapValue):ct();var e}function Ad(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function T0(n){return!!n&&"integerValue"in n}function sm(n){return!!n&&"arrayValue"in n}function OS(n){return!!n&&"nullValue"in n}function kS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function om(n){return!!n&&"mapValue"in n}function Nu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Bl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Nu(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Nu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function A0(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function PS(n){return"nullValue"in n?rm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ad(Ys.empty(),Ye.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ct()}function x0(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ad(Ys.empty(),Ye.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ba:ct()}function Fu(n,e){const t=ja(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function hv(n,e){const t=ja(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Dr{constructor(e){this.value=e}static empty(){return new Dr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!om(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nu(t)}setAll(e){let t=dr.emptyPath(),r={},i=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=p.popLast()}c?r[p.lastSegment()]=Nu(c):i.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());om(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ua(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];om(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Bl(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new Dr(Nu(this.value))}}function am(n){const e=[];return Bl(n.fields,(t,r)=>{const i=new dr([t]);if(om(r)){const u=am(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new Oi(e)}class Fn{constructor(e,t,r,i,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=c}static newInvalidDocument(e){return new Fn(e,0,Rt.min(),Rt.min(),Dr.empty(),0)}static newFoundDocument(e,t,r){return new Fn(e,1,t,Rt.min(),r,0)}static newNoDocument(e,t){return new Fn(e,2,t,Rt.min(),Dr.empty(),0)}static newUnknownDocument(e,t){return new Fn(e,3,t,Rt.min(),Dr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Rt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class fv{constructor(e,t=null,r=[],i=[],u=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=p,this.ht=null}}function um(n,e=null,t=[],r=[],i=null,u=null,c=null){return new fv(n,e,t,r,i,u,c)}function Ho(n){const e=et(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Td(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Sd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Td(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Td(r)).join(",")),e.ht=t}return e.ht}function lm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!P0(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Ua(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!N0(n.startAt,e.startAt)&&N0(n.endAt,e.endAt)}function pv(n){return Ye.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function gv(n,e){return n.filters.filter(t=>t instanceof Qr&&t.field.isEqual(e))}function mv(n,e,t){let r=rm,i=!0;for(const u of gv(n,e)){let c=rm,p=!0;switch(u.op){case"<":case"<=":c=PS(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,p=!1;break;case"!=":case"not-in":c=rm}Fu({value:r,inclusive:i},{value:c,inclusive:p})<0&&(r=c,i=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];Fu({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function M0(n,e,t){let r=Ba,i=!0;for(const u of gv(n,e)){let c=Ba,p=!0;switch(u.op){case">=":case">":c=x0(u.value),p=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,p=!1;break;case"!=":case"not-in":c=Ba}hv({value:r,inclusive:i},{value:c,inclusive:p})>0&&(r=c,i=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];hv({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Qr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new NS(e,t,r):"array-contains"===t?new O0(e,r):"in"===t?new LS(e,r):"not-in"===t?new VS(e,r):"array-contains-any"===t?new k0(e,r):new Qr(e,t,r)}static lt(e,t,r){return"in"===t?new FS(e,r):new R0(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(ja(t,this.value)):null!==t&&Ul(this.value)===Ul(t)&&this.ft(ja(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ct()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class NS extends Qr{constructor(e,t,r){super(e,t,r),this.key=Ye.fromName(r.referenceValue)}matches(e){const t=Ye.comparator(e.key,this.key);return this.ft(t)}}class FS extends Qr{constructor(e,t){super(e,"in",t),this.keys=yv(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class R0 extends Qr{constructor(e,t){super(e,"not-in",t),this.keys=yv(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function yv(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ye.fromName(r.referenceValue))}class O0 extends Qr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return sm(t)&&im(t.arrayValue,this.value)}}class LS extends Qr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&im(this.value.arrayValue,t)}}class VS extends Qr{constructor(e,t){super(e,"not-in",t)}matches(e){if(im(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!im(this.value.arrayValue,t)}}class k0 extends Qr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!sm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>im(this.value.arrayValue,r))}}class zo{constructor(e,t){this.position=e,this.inclusive=t}}class Af{constructor(e,t="asc"){this.field=e,this.dir=t}}function P0(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function cm(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?Ye.comparator(Ye.fromName(c.referenceValue),t.key):ja(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function N0(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ua(n.position[t],e.position[t]))return!1;return!0}class $a{constructor(e,t=null,r=[],i=[],u=null,c="F",p=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=p,this.endAt=_,this._t=null,this.wt=null}}function BS(n,e,t,r,i,u,c,p){return new $a(n,e,t,r,i,u,c,p)}function xf(n){return new $a(n)}function F0(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function _v(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function vv(n){for(const e of n.filters)if(e.dt())return e.field;return null}function L0(n){return null!==n.collectionGroup}function Mf(n){const e=et(n);if(null===e._t){e._t=[];const t=vv(e),r=_v(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Af(t)),e._t.push(new Af(dr.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Af(dr.keyField(),u))}}}return e._t}function ki(n){const e=et(n);if(!e.wt)if("F"===e.limitType)e.wt=um(e.path,e.collectionGroup,Mf(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Mf(e))t.push(new Af(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new zo(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new zo(e.startAt.position,e.startAt.inclusive):null;e.wt=um(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function wv(n,e,t){return new $a(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function dm(n,e){return lm(ki(n),ki(e))&&n.limitType===e.limitType}function V0(n){return`${Ho(ki(n))}|lt:${n.limitType}`}function B0(n){return`Query(target=${function RM(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Td(r.value)}`;var r}).join(", ")}]`),Sd(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Td(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Td(t)).join(",")),`Target(${e})`}(ki(n))}; limitType=${n.limitType})`}function U0(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ye.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const p=cm(i,u,c);return i.inclusive?p<=0:p<0}(t.startAt,Mf(t),r)||t.endAt&&!function(i,u,c){const p=cm(i,u,c);return i.inclusive?p>=0:p>0}(t.endAt,Mf(t),r)));var t,r}function US(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function jS(n){return(e,t)=>{let r=!1;for(const i of Mf(n)){const u=OM(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function OM(n,e,t){const r=n.field.isKeyField()?Ye.comparator(e.key,t.key):function(i,u,c){const p=u.data.field(i),_=c.data.field(i);return null!==p&&null!==_?ja(p,_):ct()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ct()}}function $S(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tf(e)?"-0":e}}function s(n){return{integerValue:""+n}}function o(n,e){return cv(e)?s(e):$S(n,e)}class a{constructor(){this._=void 0}}function l(n,e,t){return n instanceof y?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof w?C(n,e):n instanceof S?k(n,e):function(r,i){const u=f(r,i),c=q(u)+q(r.yt);return T0(u)&&T0(r.yt)?s(c):$S(r.It,c)}(n,e)}function d(n,e,t){return n instanceof w?C(n,e):n instanceof S?k(n,e):t}function f(n,e){return n instanceof L?T0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class y extends a{}class w extends a{constructor(e){super(),this.elements=e}}function C(n,e){const t=ie(e);for(const r of n.elements)t.some(i=>Ua(i,r))||t.push(r);return{arrayValue:{values:t}}}class S extends a{constructor(e){super(),this.elements=e}}function k(n,e){let t=ie(e);for(const r of n.elements)t=t.filter(i=>!Ua(i,r));return{arrayValue:{values:t}}}class L extends a{constructor(e,t){super(),this.It=e,this.yt=t}}function q(n){return nr(n.integerValue||n.doubleValue)}function ie(n){return sm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class be{constructor(e,t){this.field=e,this.transform=t}}class Ke{constructor(e,t){this.version=e,this.transformResults=t}}class Ge{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ge}static exists(e){return new Ge(void 0,e)}static updateTime(e){return new Ge(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ct(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Oe{}function At(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Vu(n.key,Ge.none()):new Lu(n.key,n.data,Ge.none());{const t=n.data,r=Dr.empty();let i=new An(dr.comparator);for(let u of e.fields)if(!i.has(u)){let c=t.field(u);null===c&&u.length>1&&(u=u.popLast(),c=t.field(u)),null===c?r.delete(u):r.set(u,c),i=i.add(u)}return new Qs(n.key,r,new Oi(i.toArray()),Ge.none())}}function mn(n,e,t){n instanceof Lu?function(r,i,u){const c=r.value.clone(),p=pm(r.fieldTransforms,i,u.transformResults);c.setAll(p),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Qs?function(r,i,u){if(!Ct(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=pm(r.fieldTransforms,i,u.transformResults),p=i.data;p.setAll(fm(r)),p.setAll(c),i.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function xn(n,e,t,r){return n instanceof Lu?function(i,u,c,p){if(!Ct(i.precondition,u))return c;const _=i.value.clone(),b=gm(i.fieldTransforms,p,u);return _.setAll(b),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof Qs?function(i,u,c,p){if(!Ct(i.precondition,u))return c;const _=gm(i.fieldTransforms,p,u),b=u.data;return b.setAll(fm(i)),b.setAll(_),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(T=>T.field))}(n,e,t,r):(c=t,Ct(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c);var u,c}function jl(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=f(r.transform,i||null);null!=u&&(null===t&&(t=Dr.empty()),t.set(r.field,u))}return t||null}function hm(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Cd(t,r,(i,u)=>function ze(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof w&&r instanceof w||t instanceof S&&r instanceof S?Cd(t.elements,r.elements,Ua):t instanceof L&&r instanceof L?Ua(t.yt,r.yt):t instanceof y&&r instanceof y);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Lu extends Oe{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Qs extends Oe{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function fm(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function pm(n,e,t){const r=new Map;kt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,p=e.data.field(u.field);r.set(u.field,d(c,p,t[i]))}return r}function gm(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,l(u,c,e))}return r}class Vu extends Oe{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Rf extends Oe{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ev{constructor(e){this.count=e}}var Fr,fn;function kM(n){switch(n){default:return ct();case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0}}function PM(n){if(void 0===n)return lr("GRPC error has no .code"),me.UNKNOWN;switch(n){case Fr.OK:return me.OK;case Fr.CANCELLED:return me.CANCELLED;case Fr.UNKNOWN:return me.UNKNOWN;case Fr.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case Fr.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case Fr.INTERNAL:return me.INTERNAL;case Fr.UNAVAILABLE:return me.UNAVAILABLE;case Fr.UNAUTHENTICATED:return me.UNAUTHENTICATED;case Fr.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case Fr.NOT_FOUND:return me.NOT_FOUND;case Fr.ALREADY_EXISTS:return me.ALREADY_EXISTS;case Fr.PERMISSION_DENIED:return me.PERMISSION_DENIED;case Fr.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case Fr.ABORTED:return me.ABORTED;case Fr.OUT_OF_RANGE:return me.OUT_OF_RANGE;case Fr.UNIMPLEMENTED:return me.UNIMPLEMENTED;case Fr.DATA_LOSS:return me.DATA_LOSS;default:return ct()}}(fn=Fr||(Fr={}))[fn.OK=0]="OK",fn[fn.CANCELLED=1]="CANCELLED",fn[fn.UNKNOWN=2]="UNKNOWN",fn[fn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fn[fn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fn[fn.NOT_FOUND=5]="NOT_FOUND",fn[fn.ALREADY_EXISTS=6]="ALREADY_EXISTS",fn[fn.PERMISSION_DENIED=7]="PERMISSION_DENIED",fn[fn.UNAUTHENTICATED=16]="UNAUTHENTICATED",fn[fn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fn[fn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fn[fn.ABORTED=10]="ABORTED",fn[fn.OUT_OF_RANGE=11]="OUT_OF_RANGE",fn[fn.UNIMPLEMENTED=12]="UNIMPLEMENTED",fn[fn.INTERNAL=13]="INTERNAL",fn[fn.UNAVAILABLE=14]="UNAVAILABLE",fn[fn.DATA_LOSS=15]="DATA_LOSS";class xd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Bl(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return MS(this.inner)}size(){return this.innerSize}}const dN=new hr(Ye.comparator);function Es(){return dN}const NM=new hr(Ye.comparator);function bv(...n){let e=NM;for(const t of n)e=e.insert(t.key,t);return e}function FM(n){let e=NM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Bu(){return Cv()}function LM(){return Cv()}function Cv(){return new xd(n=>n.toString(),(n,e)=>n.isEqual(e))}const hN=new hr(Ye.comparator),fN=new An(Ye.comparator);function Kt(...n){let e=fN;for(const t of n)e=e.add(t);return e}const pN=new An(Bt);function j0(){return pN}class Iv{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Dv.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Iv(Rt.min(),i,j0(),Es(),Kt())}}class Dv{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Dv(r,t,Kt(),Kt(),Kt())}}class $0{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class VM{constructor(e,t){this.targetId=e,this.At=t}}class BM{constructor(e,t,r=yr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class UM{constructor(){this.Rt=0,this.bt=$M(),this.Pt=yr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Kt(),t=Kt(),r=Kt();return this.bt.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ct()}}),new Dv(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=$M()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class gN{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Es(),this.qt=jM(),this.Kt=new An(Bt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:ct()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const u=i.target;if(pv(u))if(0===r){const c=new Ye(u.path);this.jt(t,c,Fn.newNoDocument(c,Rt.min()))}else kt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,c)=>{const p=this.Xt(c);if(p){if(u.current&&pv(p.target)){const _=new Ye(p.target.path);null!==this.Ut.get(_)||this.ee(c,_)||this.jt(c,_,Fn.newNoDocument(_,e))}u.Dt&&(t.set(c,u.xt()),u.Nt())}});let r=Kt();this.qt.forEach((u,c)=>{let p=!0;c.forEachWhile(_=>{const b=this.Xt(_);return!b||2===b.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.Ut.forEach((u,c)=>c.setReadTime(e));const i=new Iv(e,t,this.Kt,this.Ut,r);return this.Ut=Es(),this.qt=jM(),this.Kt=new An(Bt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new UM,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new An(Bt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||He("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new UM),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function jM(){return new hr(Ye.comparator)}function $M(){return new hr(Ye.comparator)}const mN={asc:"ASCENDING",desc:"DESCENDING"},yN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class _N{constructor(e,t){this.databaseId=e,this.gt=t}}function Sv(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HM(n,e){return n.gt?e.toBase64():e.toUint8Array()}function vN(n,e){return Sv(n,e.toTimestamp())}function fi(n){return kt(!!n),Rt.fromTimestamp(function(e){const t=$o(e);return new On(t.seconds,t.nanos)}(n))}function HS(n,e){return(t=n,new an(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function zM(n){const e=an.fromString(n);return kt(XM(e)),e}function Tv(n,e){return HS(n.databaseId,e.path)}function Uu(n,e){const t=zM(e);if(t.get(1)!==n.databaseId.projectId)throw new Le(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Le(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ye(WM(t))}function zS(n,e){return HS(n.databaseId,e)}function GM(n){const e=zM(n);return 4===e.length?an.emptyPath():WM(e)}function Av(n){return new an(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function WM(n){return kt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function qM(n,e,t){return{name:Tv(n,e),fields:t.value.mapValue.fields}}function ZM(n,e,t){const r=Uu(n,e.name),i=fi(e.updateTime),u=new Dr({mapValue:{fields:e.fields}}),c=Fn.newFoundDocument(r,i,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function xv(n,e){let t;if(e instanceof Lu)t={update:qM(n,e.key,e.value)};else if(e instanceof Vu)t={delete:Tv(n,e.key)};else if(e instanceof Qs)t={update:qM(n,e.key,e.data),updateMask:AN(e.fieldMask)};else{if(!(e instanceof Rf))return ct();t={verify:Tv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof y)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof w)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof S)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof L)return{fieldPath:u.field.canonicalString(),increment:c.yt};throw ct()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:vN(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ct()),t;var i}function GS(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Ge.updateTime(fi(i.updateTime)):void 0!==i.exists?Ge.exists(i.exists):Ge.none():Ge.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let p=null;"setToServerValue"in c?(kt("REQUEST_TIME"===c.setToServerValue),p=new y):"appendMissingElements"in c?p=new w(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new S(c.removeAllFromArray.values||[]):"increment"in c?p=new L(u,c.increment):ct();const _=dr.fromServerFormat(c.fieldPath);return new be(_,p)}(n,i)):[];var i;if(e.update){const i=Uu(n,e.update.name),u=new Dr({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Oi((e.updateMask.fieldPaths||[]).map(b=>dr.fromServerFormat(b)));return new Qs(i,u,c,t,r)}return new Lu(i,u,t,r)}if(e.delete){const i=Uu(n,e.delete);return new Vu(i,t)}if(e.verify){const i=Uu(n,e.verify);return new Rf(i,t)}return ct()}function KM(n,e){return{documents:[zS(n,e.path)]}}function WS(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=zS(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=zS(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const b=_.map(T=>function(M){if("=="===M.op){if(kS(M.value))return{unaryFilter:{field:mm(M.field),op:"IS_NAN"}};if(OS(M.value))return{unaryFilter:{field:mm(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(kS(M.value))return{unaryFilter:{field:mm(M.field),op:"IS_NOT_NAN"}};if(OS(M.value))return{unaryFilter:{field:mm(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mm(M.field),op:DN(M.op),value:M.value}}}(T));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(_){if(0!==_.length)return _.map(b=>{return{field:mm((T=b).field),direction:IN(T.dir)};var T})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(b=e.limit,n.gt||Sd(b)?b:{value:b});var b,p,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function YM(n){let e=GM(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){kt(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let u=[];t.where&&(u=QM(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(T=>{return new Af(ym((M=T).field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let p=null;t.limit&&(p=function(T){let M;return M="object"==typeof T?T.value:T,Sd(M)?null:M}(t.limit));let _=null;var T;t.startAt&&(_=new zo((T=t.startAt).values||[],!!T.before));let b=null;return t.endAt&&(b=function(T){return new zo(T.values||[],!T.before)}(t.endAt)),BS(e,i,c,u,p,"F",_,b)}function QM(n){return n?void 0!==n.unaryFilter?[TN(n)]:void 0!==n.fieldFilter?[SN(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>QM(e)).reduce((e,t)=>e.concat(t)):ct():[]}function IN(n){return mN[n]}function DN(n){return yN[n]}function mm(n){return{fieldPath:n.canonicalString()}}function ym(n){return dr.fromServerFormat(n.fieldPath)}function SN(n){return Qr.create(ym(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ct()}}(n.fieldFilter.op),n.fieldFilter.value)}function TN(n){switch(n.unaryFilter.op){case"IS_NAN":const e=ym(n.unaryFilter.field);return Qr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=ym(n.unaryFilter.field);return Qr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ym(n.unaryFilter.field);return Qr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ym(n.unaryFilter.field);return Qr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ct()}}function AN(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function XM(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function es(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=JM(e)),e=xN(n.get(t),e);return JM(e)}function xN(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function JM(n){return n+"\x01\x01"}function ju(n){const e=n.length;if(kt(e>=2),2===e)return kt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),an.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&ct(),n.charAt(c+1)){case"\x01":const p=n.substring(u,c);let _;0===i.length?_=p:(i+=p,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:ct()}u=c+2}return new an(r)}const eR=["userId","batchId"];function H0(n,e){return[n,es(e)]}function tR(n,e,t){return[n,es(e),t]}const MN={},RN=["prefixPath","collectionGroup","readTime","documentId"],ON=["prefixPath","collectionGroup","documentId"],kN=["collectionGroup","readTime","prefixPath","documentId"],PN=["canonicalId","targetId"],NN=["targetId","path"],FN=["path","targetId"],LN=["collectionId","parent"],VN=["indexId","uid"],BN=["uid","sequenceNumber"],UN=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],jN=["indexId","uid","orderedDocumentKey"],$N=["userId","collectionPath","documentId"],HN=["userId","collectionPath","largestBatchId"],zN=["userId","collectionGroup","largestBatchId"],nR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],GN=[...nR,"documentOverlays"],rR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],iR=rR,WN=[...iR,"indexConfiguration","indexState","indexEntries"];class qS extends Jg{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function pi(n,e){const t=et(n);return ws.M(t.ie,e)}class ZS{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&mn(u,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=xn(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=xn(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=LM();return this.mutations.forEach(i=>{const u=e.get(i.key),c=u.overlayedDocument;let p=this.applyToLocalView(c,u.mutatedFields);p=t.has(i.key)?null:p;const _=At(c,p);null!==_&&r.set(i.key,_),c.isValidDocument()||c.convertToNoDocument(Rt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Kt())}isEqual(e){return this.batchId===e.batchId&&Cd(this.mutations,e.mutations,(t,r)=>hm(t,r))&&Cd(this.baseMutations,e.baseMutations,(t,r)=>hm(t,r))}}class KS{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){kt(e.mutations.length===r.length);let i=hN;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new KS(e,t,r,i)}}class YS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Md{constructor(e,t,r,i,u=Rt.min(),c=Rt.min(),p=yr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new Md(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Md(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Md(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class sR{constructor(e){this.re=e}}function oR(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:z0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Tv(i=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Sv(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Of(e.version)};else{if(!e.isUnknownDocument())return ct();r.unknownDocument={path:t.path.toArray(),version:Of(e.version)}}var i,u;return r}function z0(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Of(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function kf(n){const e=new On(n.seconds,n.nanoseconds);return Rt.fromTimestamp(e)}function Pf(n,e){const t=(e.baseMutations||[]).map(u=>GS(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>GS(n.re,u)),i=On.fromMillis(e.localWriteTimeMs);return new ZS(e.batchId,i,t,r)}function Mv(n){const e=kf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?kf(n.lastLimboFreeSnapshotVersion):Rt.min();let r;var i;return void 0!==n.query.documents?(kt(1===(i=n.query).documents.length),r=ki(xf(GM(i.documents[0])))):r=ki(YM(n.query)),new Md(r,n.targetId,0,n.lastListenSequenceNumber,e,t,yr.fromBase64String(n.resumeToken))}function aR(n,e){const t=Of(e.snapshotVersion),r=Of(e.lastLimboFreeSnapshotVersion);let i;i=pv(e.target)?KM(n.re,e.target):WS(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ho(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function QS(n){const e=YM({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?wv(e,e.limit,"L"):e}function XS(n,e){return new YS(e.largestBatchId,GS(n.re,e.overlayMutation))}function uR(n,e){const t=e.path.lastSegment();return[n,es(e.path.popLast()),t]}function lR(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Of(r.readTime),documentKey:es(r.documentKey.path),largestBatchId:r.largestBatchId}}class ZN{getBundleMetadata(e,t){return cR(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:kf(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return cR(e).put({bundleId:(r=t).id,createTime:Of(fi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return dR(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:QS(i.bundledQuery),readTime:kf(i.readTime)};var i})}saveNamedQuery(e,t){return dR(e).put({name:(r=t).name,readTime:Of(fi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function cR(n){return pi(n,"bundles")}function dR(n){return pi(n,"namedQueries")}class G0{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new G0(e,t.uid||"")}getOverlay(e,t){return Rv(e).get(uR(this.userId,t)).next(r=>r?XS(this.It,r):null)}getOverlays(e,t){const r=Bu();return ce.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const p=new YS(t,c);i.push(this.ue(e,p))}),ce.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(es(c.getCollectionPath())));const u=[];return i.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Rv(e).Y("collectionPathOverlayIndex",p))}),ce.waitFor(u)}getOverlaysForCollection(e,t,r){const i=Bu(),u=es(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Rv(e).W("collectionPathOverlayIndex",c).next(p=>{for(const _ of p){const b=XS(this.It,_);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=Bu();let c;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Rv(e).Z({index:"collectionGroupOverlayIndex",range:p},(_,b,T)=>{const M=XS(this.It,b);u.size()<i||M.largestBatchId===c?(u.set(M.getKey(),M),c=M.largestBatchId):T.done()}).next(()=>u)}ue(e,t){return Rv(e).put(function(r,i,u){const[c,p,_]=uR(i,u.mutation.key);return{userId:i,collectionPath:p,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:xv(r.re,u.mutation)}}(this.It,this.userId,t))}}function Rv(n){return pi(n,"documentOverlays")}class Nf{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(nr(e.integerValue));else if("doubleValue"in e){const r=nr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Tf(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Pu(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?A0(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):ct()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),Ye.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function KN(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function hR(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=KN(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Nf.Te=new Nf;class YN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=hR(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=hR(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class QN{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class XN{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class Ov{constructor(){this.Be=new YN,this.Le=new QN(this.Be),this.Ue=new XN(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Ff{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ff(this.indexId,this.documentKey,this.arrayValue,r)}}function Lf(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=fR(n.arrayValue,e.arrayValue),0!==t?t:(t=fR(n.directionalValue,e.directionalValue),0!==t?t:Ye.comparator(n.documentKey,e.documentKey)))}function fR(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class JN{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=w0(e);if(void 0!==t&&!this.ze(t))return!1;const r=Vl(e);let i=0,u=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const c=r[i];if(!this.He(this.je,c)||!this.Je(this.Ge[u++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(u>=this.Ge.length||!this.Je(this.Ge[u++],c))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class e1{constructor(){this.Ye=new JS}addToCollectionParentIndex(e,t){return this.Ye.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(Ji.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(Ji.min())}updateCollectionGroup(e,t,r){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class JS{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new An(an.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new An(an.comparator)).toArray()}}const W0=new Uint8Array(0);class t1{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new JS,this.Ze=new xd(r=>Ho(r),(r,i)=>lm(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:es(i)};return pR(e).put(u)}return ce.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[v0(t),""],!1,!0);return pR(e).W(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(ju(c.parent))}return r})}addFieldIndex(e,t){const r=q0(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])};var c;delete i.indexId;const u=r.add(i);if(t.indexState){const c=Pv(e);return u.next(p=>{c.put(lR(p,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=q0(e),i=Pv(e),u=kv(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=kv(e);let i=!0;const u=new Map;return ce.forEach(this.tn(t),c=>this.en(e,c).next(p=>{i&&(i=!!p),u.set(c,p)})).next(()=>{if(i){let c=Kt();const p=[];return ce.forEach(u,(_,b)=>{var T;He("IndexedDbIndexManager",`Using index ${T=_,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(Ut=>`${Ut.fieldPath}:${Ut.kind}`).join(",")}`} to execute ${Ho(t)}`);const M=function(Ut,jt){const Ht=w0(jt);if(void 0===Ht)return null;for(const Xt of gv(Ut,Ht.fieldPath))switch(Xt.op){case"array-contains-any":return Xt.value.arrayValue.values||[];case"array-contains":return[Xt.value]}return null}(b,_),H=function(Ut,jt){const Ht=new Map;for(const Xt of Vl(jt))for(const Xr of gv(Ut,Xt.fieldPath))switch(Xr.op){case"==":case"in":Ht.set(Xt.fieldPath.canonicalString(),Xr.value);break;case"not-in":case"!=":return Ht.set(Xt.fieldPath.canonicalString(),Xr.value),Array.from(Ht.values())}return null}(b,_),K=function(Ut,jt){const Ht=[];let Xt=!0;for(const Xr of Vl(jt)){const rw=0===Xr.kind?mv(Ut,Xr.fieldPath,Ut.startAt):M0(Ut,Xr.fieldPath,Ut.startAt);Ht.push(rw.value),Xt&&(Xt=rw.inclusive)}return new zo(Ht,Xt)}(b,_),te=function(Ut,jt){const Ht=[];let Xt=!0;for(const Xr of Vl(jt)){const rw=0===Xr.kind?M0(Ut,Xr.fieldPath,Ut.endAt):mv(Ut,Xr.fieldPath,Ut.endAt);Ht.push(rw.value),Xt&&(Xt=rw.inclusive)}return new zo(Ht,Xt)}(b,_),Me=this.nn(_,b,K),Ue=this.nn(_,b,te),gt=this.sn(_,b,H),Nt=this.rn(_.indexId,M,Me,K.inclusive,Ue,te.inclusive,gt);return ce.forEach(Nt,Ut=>r.J(Ut,t.limit).next(jt=>{jt.forEach(Ht=>{const Xt=Ye.fromSegments(Ht.documentKey);c.has(Xt)||(c=c.add(Xt),p.push(Xt))})}))}).next(()=>p)}return ce.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,u,c,p){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),b=_/(null!=t?t.length:1),T=[];for(let M=0;M<_;++M){const H=t?this.on(t[M/b]):W0,K=this.un(e,H,r[M%b],i),te=this.cn(e,H,u[M%b],c),Me=p.map(Ue=>this.un(e,H,Ue,!0));T.push(...this.createRange(K,te,Me))}return T}un(e,t,r,i){const u=new Ff(e,Ye.empty(),t,r);return i?u:u.Ke()}cn(e,t,r,i){const u=new Ff(e,Ye.empty(),t,r);return i?u.Ke():u}en(e,t){const r=new JN(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let c=null;for(const p of u)r.We(p)&&(!c||p.fields.length>c.fields.length)&&(c=p);return c})}getIndexType(e,t){let r=2;return ce.forEach(this.tn(t),i=>this.en(e,i).next(u=>{u?0!==r&&u.fields.length<function(c){let p=new An(dr.comparator),_=!1;for(const b of c.filters){const T=b;T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?_=!0:p=p.add(T.field))}for(const b of c.orderBy)b.field.isKeyField()||(p=p.add(b.field));return p.size+(_?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new Ov;for(const i of Vl(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.qe(i.kind);Nf.Te.ce(u,c)}return r.$e()}on(e){const t=new Ov;return Nf.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new Ov;return Nf.Te.ce(Ad(this.databaseId,t),r.qe(function(i){const u=Vl(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new Ov);let u=0;for(const c of Vl(e)){const p=r[u++];for(const _ of i)if(this.ln(t,c.fieldPath)&&sm(p))i=this.fn(i,c,p);else{const b=_.qe(c.kind);Nf.Te.ce(p,b)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const p of i){const _=new Ov;_.seed(p.$e()),Nf.Te.ce(c,_.qe(t.kind)),u.push(_)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof Qr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=q0(e),i=Pv(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const c=[];return ce.forEach(u,p=>i.get([p.indexId,this.uid]).next(_=>{c.push(function(b,T){const M=T?new Ei(T.sequenceNumber,new Ji(kf(T.readTime),new Ye(ju(T.documentKey)),T.largestBatchId)):Ei.empty(),H=b.fields.map(([K,te])=>new Cf(dr.fromServerFormat(K),te));return new Qg(b.indexId,b.collectionGroup,H,M)}(p,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Bt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=q0(e),u=Pv(e);return this._n(e).next(c=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>ce.forEach(p,_=>u.put(lR(_.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ce.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?ce.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(p=>(r.set(i.collectionGroup,p),ce.forEach(p,_=>this.wn(e,i,_).next(b=>{const T=this.mn(u,_);return b.isEqual(T)?ce.resolve():this.gn(e,u,_,b,T)}))))})}yn(e,t,r,i){return kv(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return kv(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=kv(e);let u=new An(Lf);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(c,p)=>{u=u.add(new Ff(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}mn(e,t){let r=new An(Lf);const i=this.an(t,e);if(null==i)return r;const u=w0(t);if(null!=u){const c=e.data.field(u.fieldPath);if(sm(c))for(const p of c.arrayValue.values||[])r=r.add(new Ff(t.indexId,e.key,this.on(p),i))}else r=r.add(new Ff(t.indexId,e.key,W0,i));return r}gn(e,t,r,i,u){He("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(p,_,b,T,M){const H=p.getIterator(),K=_.getIterator();let te=Sf(H),Me=Sf(K);for(;te||Me;){let Ue=!1,gt=!1;if(te&&Me){const Nt=b(te,Me);Nt<0?gt=!0:Nt>0&&(Ue=!0)}else null!=te?gt=!0:Ue=!0;Ue?(T(Me),Me=Sf(K)):gt?(M(te),te=Sf(H)):(te=Sf(H),Me=Sf(K))}}(i,u,Lf,p=>{c.push(this.yn(e,t,r,p))},p=>{c.push(this.pn(e,t,r,p))}),ce.waitFor(c)}_n(e){let t=1;return Pv(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,p)=>Lf(c,p)).filter((c,p,_)=>!p||0!==Lf(c,_[p-1]));const i=[];i.push(e);for(const c of r){const p=Lf(c,e),_=Lf(c,t);if(0===p)i[0]=e.Ke();else if(p>0&&_<0)i.push(c),i.push(c.Ke());else if(_>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2)u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,W0,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,W0,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(gR)}getMinOffset(e,t){return ce.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||ct())).next(gR)}}function pR(n){return pi(n,"collectionParents")}function kv(n){return pi(n,"indexEntries")}function q0(n){return pi(n,"indexConfiguration")}function Pv(n){return pi(n,"indexState")}function gR(n){kt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Ri(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ji(e.readTime,e.documentKey,t)}const mR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class bs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new bs(e,bs.DEFAULT_COLLECTION_PERCENTILE,bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function yR(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let p=0;const _=r.Z({range:c},(T,M,H)=>(p++,H.delete()));u.push(_.next(()=>{kt(1===p)}));const b=[];for(const T of t.mutations){const M=tR(e,T.key.path,t.batchId);u.push(i.delete(M)),b.push(T.key)}return ce.waitFor(u).next(()=>b)}function Z0(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ct();e=n.noDocument}return JSON.stringify(e).length}bs.DEFAULT_COLLECTION_PERCENTILE=10,bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bs.DEFAULT=new bs(41943040,bs.DEFAULT_COLLECTION_PERCENTILE,bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bs.DISABLED=new bs(-1,0,0);class K0{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){kt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new K0(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Rd(e).Z({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=_m(e),c=Rd(e);return c.add({}).next(p=>{kt("number"==typeof p);const _=new ZS(p,t,r,i),b=function(H,K,te){const Me=te.baseMutations.map(gt=>xv(H.re,gt)),Ue=te.mutations.map(gt=>xv(H.re,gt));return{userId:K,batchId:te.batchId,localWriteTimeMs:te.localWriteTime.toMillis(),baseMutations:Me,mutations:Ue}}(this.It,this.userId,_),T=[];let M=new An((H,K)=>Bt(H.canonicalString(),K.canonicalString()));for(const H of i){const K=tR(this.userId,H.key.path,p);M=M.add(H.key.path.popLast()),T.push(c.put(b)),T.push(u.put(K,MN))}return M.forEach(H=>{T.push(this.indexManager.addToCollectionParentIndex(e,H))}),e.addOnCommittedListener(()=>{this.In[p]=_.keys()}),ce.waitFor(T).next(()=>_)})}lookupMutationBatch(e,t){return Rd(e).get(t).next(r=>r?(kt(r.userId===this.userId),Pf(this.It,r)):null)}Tn(e,t){return this.In[t]?ce.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Rd(e).Z({index:"userMutationsIndex",range:i},(c,p,_)=>{p.userId===this.userId&&(kt(p.batchId>=r),u=Pf(this.It,p)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Rd(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Rd(e).W("userMutationsIndex",t).next(r=>r.map(i=>Pf(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=H0(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return _m(e).Z({range:i},(c,p,_)=>{const[b,T,M]=c,H=ju(T);if(b===this.userId&&t.path.isEqual(H))return Rd(e).get(M).next(K=>{if(!K)throw ct();kt(K.userId===this.userId),u.push(Pf(this.It,K))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new An(Bt);const i=[];return t.forEach(u=>{const c=H0(this.userId,u.path),p=IDBKeyRange.lowerBound(c),_=_m(e).Z({range:p},(b,T,M)=>{const[H,K,te]=b,Me=ju(K);H===this.userId&&u.path.isEqual(Me)?r=r.add(te):M.done()});i.push(_)}),ce.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=H0(this.userId,r),c=IDBKeyRange.lowerBound(u);let p=new An(Bt);return _m(e).Z({range:c},(_,b,T)=>{const[M,H,K]=_,te=ju(H);M===this.userId&&r.isPrefixOf(te)?te.length===i&&(p=p.add(K)):T.done()}).next(()=>this.En(e,p))}En(e,t){const r=[],i=[];return t.forEach(u=>{i.push(Rd(e).get(u).next(c=>{if(null===c)throw ct();kt(c.userId===this.userId),r.push(Pf(this.It,c))}))}),ce.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return yR(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ce.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ce.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return _m(e).Z({range:r},(u,c,p)=>{if(u[0]===this.userId){const _=ju(u[1]);i.push(_)}else p.done()}).next(()=>{kt(0===i.length)})})}containsKey(e,t){return _R(e,this.userId,t)}Rn(e){return vR(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function _R(n,e,t){const r=H0(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return _m(n).Z({range:u,X:!0},(p,_,b)=>{const[T,M,H]=p;T===e&&M===i&&(c=!0),b.done()}).next(()=>c)}function Rd(n){return pi(n,"mutations")}function _m(n){return pi(n,"documentMutations")}function vR(n){return pi(n,"mutationQueues")}class Vf{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Vf(0)}static vn(){return new Vf(-1)}}class n1{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Vf(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Rt.fromTimestamp(new On(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>vm(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(kt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return vm(e).Z((c,p)=>{const _=Mv(p);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,u.push(this.removeTargetData(e,_)))}).next(()=>ce.waitFor(u)).next(()=>i)}forEachTarget(e,t){return vm(e).Z((r,i)=>{const u=Mv(i);t(u)})}Vn(e){return wR(e).get("targetGlobalKey").next(t=>(kt(null!==t),t))}Sn(e,t){return wR(e).put("targetGlobalKey",t)}Dn(e,t){return vm(e).put(aR(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ho(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return vm(e).Z({range:i,index:"queryTargetsIndex"},(c,p,_)=>{const b=Mv(p);lm(t,b.target)&&(u=b,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=Od(e);return t.forEach(c=>{const p=es(c.path);i.push(u.put({targetId:r,path:p})),i.push(this.referenceDelegate.addReference(e,r,c))}),ce.waitFor(i)}removeMatchingKeys(e,t,r){const i=Od(e);return ce.forEach(t,u=>{const c=es(u.path);return ce.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Od(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Od(e);let u=Kt();return i.Z({range:r,X:!0},(c,p,_)=>{const b=ju(c[1]),T=new Ye(b);u=u.add(T)}).next(()=>u)}containsKey(e,t){const r=es(t.path),i=IDBKeyRange.bound([r],[v0(r)],!1,!0);let u=0;return Od(e).Z({index:"documentTargetsIndex",X:!0,range:i},([c,p],_,b)=>{0!==c&&(u++,b.done())}).next(()=>u>0)}se(e,t){return vm(e).get(t).next(r=>r?Mv(r):null)}}function vm(n){return pi(n,"targets")}function wR(n){return pi(n,"targetGlobal")}function Od(n){return pi(n,"targetDocuments")}function ER([n,e],[t,r]){const i=Bt(n,t);return 0===i?Bt(e,r):i}class r1{constructor(e){this.xn=e,this.buffer=new An(ER),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ER(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class s1{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;He("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ee.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Va(r)?He("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ru(r)}yield t.Fn(3e5)}))}}class o1{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ce.resolve(hi.at);const r=new r1(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(mR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mR):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,u,c,p,_,b;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(He("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),i=this.params.maximumSequenceNumbersToCollect):i=M,c=Date.now(),this.nthSequenceNumber(e,i))).next(M=>(r=M,p=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(b=Date.now(),ov()<=Du.in.DEBUG&&He("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-T}ms\n\tDetermined least recently used ${i} in `+(p-c)+`ms\n\tRemoved ${u} targets in `+(_-p)+`ms\n\tRemoved ${M} documents in `+(b-_)+`ms\nTotal Duration: ${b-T}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:M})))}}class a1{constructor(e,t){this.db=e,this.garbageCollector=new o1(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return Y0(e,r)}removeReference(e,t,r){return Y0(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Y0(e,t)}Gn(e,t){return function(r,i){let u=!1;return vR(r).tt(c=>_R(r,c,i).next(p=>(p&&(u=!0),ce.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Kn(e,(c,p)=>{if(p<=t){const _=this.Gn(e,c).next(b=>{if(!b)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Rt.min()),Od(e).delete([0,es(c.path)])))});i.push(_)}}).next(()=>ce.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Y0(e,t)}Kn(e,t){const r=Od(e);let i,u=hi.at;return r.Z({index:"documentTargetsIndex"},([c,p],{path:_,sequenceNumber:b})=>{0===c?(u!==hi.at&&t(new Ye(ju(i)),u),u=b,i=_):u=hi.at}).next(()=>{u!==hi.at&&t(new Ye(ju(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Y0(n,e){return Od(n).put((r=n.currentSequenceNumber,{targetId:0,path:es(e.path),sequenceNumber:r}));var r}class bR{constructor(){this.changes=new xd(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ce.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class u1{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Bf(e).put(r)}removeEntry(e,t,r){return Bf(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],z0(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Fn.newInvalidDocument(t);return Bf(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Nv(t))},(i,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:Fn.newInvalidDocument(t)};return Bf(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Nv(t))},(i,u)=>{r={document:this.jn(t,u),size:Z0(u)}}).next(()=>r)}getEntries(e,t){let r=Es();return this.zn(e,t,(i,u)=>{const c=this.jn(i,u);r=r.insert(i,c)}).next(()=>r)}Hn(e,t){let r=Es(),i=new hr(Ye.comparator);return this.zn(e,t,(u,c)=>{const p=this.jn(u,c);r=r.insert(u,p),i=i.insert(u,Z0(c))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return ce.resolve();let i=new An(SR);t.forEach(_=>i=i.add(_));const u=IDBKeyRange.bound(Nv(i.first()),Nv(i.last())),c=i.getIterator();let p=c.getNext();return Bf(e).Z({index:"documentKeyIndex",range:u},(_,b,T)=>{const M=Ye.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;p&&SR(p,M)<0;)r(p,null),p=c.getNext();p&&p.isEqual(M)&&(r(p,b),p=c.hasNext()?c.getNext():null),p?T.j(Nv(p)):T.done()}).next(()=>{for(;p;)r(p,null),p=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),z0(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Bf(e).W(IDBKeyRange.bound(i,u,!0)).next(c=>{let p=Es();for(const _ of c){const b=this.jn(Ye.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);p=p.insert(b.key,b)}return p})}getAllFromCollectionGroup(e,t,r,i){let u=Es();const c=DR(t,r),p=DR(t,Ji.max());return Bf(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,p,!0)},(_,b,T)=>{const M=this.jn(Ye.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(M.key,M),u.size===i&&T.done()}).next(()=>u)}newChangeBuffer(e){return new l1(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return IR(e).get("remoteDocumentGlobalKey").next(t=>(kt(!!t),t))}Qn(e,t){return IR(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function qN(n,e){let t;if(e.document)t=ZM(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ye.fromSegments(e.noDocument.path),i=kf(e.noDocument.readTime);t=Fn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ct();{const r=Ye.fromSegments(e.unknownDocument.path),i=kf(e.unknownDocument.version);t=Fn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new On(r[0],r[1]);return Rt.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Rt.min()))return r}return Fn.newInvalidDocument(e)}}function CR(n){return new u1(n)}class l1 extends bR{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new xd(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new An((u,c)=>Bt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const p=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,p.readTime)),c.isValidDocument()){const _=oR(this.Yn.It,c);i=i.add(u.path.popLast()),r+=Z0(_)-p.size,t.push(this.Yn.addEntry(e,u,_))}else if(r-=p.size,this.trackRemovals){const _=oR(this.Yn.It,c.convertToNoDocument(Rt.min()));t.push(this.Yn.addEntry(e,u,_))}}),i.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),ce.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((u,c)=>{this.Xn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function IR(n){return pi(n,"remoteDocumentGlobal")}function Bf(n){return pi(n,"remoteDocumentsV14")}function Nv(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function DR(n,e){const t=e.documentKey.path.toArray();return[n,z0(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function SR(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Bt(t[u],r[u]),i)return i;return i=Bt(t.length,r.length),i||(i=Bt(t[t.length-2],r[r.length-2]),i||Bt(t[t.length-1],r[r.length-1]))}class c1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class TR{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&xn(r.mutation,i,Oi.empty(),On.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Kt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Kt()){const i=Bu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(u=>{let c=bv();return u.forEach((p,_)=>{c=c.insert(p,_.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Bu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Kt()))}populateOverlays(e,t,r){const i=[];return r.forEach(u=>{t.has(u)||i.push(u)}),this.documentOverlayCache.getOverlays(e,i).next(u=>{u.forEach((c,p)=>{t.set(c,p)})})}computeViews(e,t,r,i){let u=Es();const c=Cv(),p=Cv();return t.forEach((_,b)=>{const T=r.get(b.key);i.has(b.key)&&(void 0===T||T.mutation instanceof Qs)?u=u.insert(b.key,b):void 0!==T&&(c.set(b.key,T.mutation.getFieldMask()),xn(T.mutation,b,T.mutation.getFieldMask(),On.now()))}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((b,T)=>c.set(b,T)),t.forEach((b,T)=>{var M;return p.set(b,new c1(T,null!==(M=c.get(b))&&void 0!==M?M:null))}),p))}recalculateAndSaveOverlays(e,t){const r=Cv();let i=new hr((c,p)=>c-p),u=Kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const p of c)p.keys().forEach(_=>{const b=t.get(_);if(null===b)return;let T=r.get(_)||Oi.empty();T=p.applyToLocalView(b,T),r.set(_,T);const M=(i.get(p.batchId)||Kt()).add(_);i=i.insert(p.batchId,M)})}).next(()=>{const c=[],p=i.getReverseIterator();for(;p.hasNext();){const _=p.getNext(),b=_.key,T=_.value,M=LM();T.forEach(H=>{if(!u.has(H)){const K=At(t.get(H),r.get(H));null!==K&&M.set(H,K),u=u.add(H)}}),c.push(this.documentOverlayCache.saveOverlays(e,b,M))}return ce.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ye.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):L0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(u=>{const c=i-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-u.size):ce.resolve(Bu());let p=-1,_=u;return c.next(b=>ce.forEach(b,(T,M)=>(p<M.largestBatchId&&(p=M.largestBatchId),u.get(T)?ce.resolve():this.getBaseDocument(e,T,M).next(H=>{_=_.insert(T,H)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,_,b,Kt())).next(T=>({batchId:p,changes:FM(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ye(t)).next(r=>{let i=bv();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let u=bv();return this.indexManager.getCollectionParents(e,i).next(c=>ce.forEach(c,p=>{const _=(b=t,T=p.child(i),new $a(T,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,T;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(b=>{b.forEach((T,M)=>{u=u.insert(T,M)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((p,_)=>{const b=_.getKey();null===i.get(b)&&(i=i.insert(b,Fn.newInvalidDocument(b)))});let c=bv();return i.forEach((p,_)=>{const b=u.get(p);void 0!==b&&xn(b.mutation,_,Oi.empty(),On.now()),U0(t,_)&&(c=c.insert(p,_))}),c})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ce.resolve(Fn.newInvalidDocument(t))}}class d1{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ce.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:fi(r.createTime)}),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:QS(r.bundledQuery),readTime:fi(r.readTime)}),ce.resolve();var r}}class h1{constructor(){this.overlays=new hr(Ye.comparator),this.es=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Bu();return ce.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.ue(e,t,u)}),ce.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),ce.resolve()}getOverlaysForCollection(e,t,r){const i=Bu(),u=t.length+1,c=new Ye(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const _=p.getNext().value,b=_.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&_.largestBatchId>r&&i.set(_.getKey(),_)}return ce.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new hr((b,T)=>b-T);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let T=u.get(b.largestBatchId);null===T&&(T=Bu(),u=u.insert(b.largestBatchId,T)),T.set(b.getKey(),b)}}const p=Bu(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((b,T)=>p.set(b,T)),!(p.size()>=i)););return ce.resolve(p)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new YS(t,r));let u=this.es.get(t);void 0===u&&(u=Kt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class eT{constructor(){this.ns=new An(gi.ss),this.rs=new An(gi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new gi(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new gi(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ye(new an([])),r=new gi(t,e),i=new gi(t,e+1),u=[];return this.rs.forEachInRange([r,i],c=>{this.cs(c),u.push(c.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ye(new an([])),r=new gi(t,e),i=new gi(t,e+1);let u=Kt();return this.rs.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new gi(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class gi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ye.comparator(e.key,t.key)||Bt(e._s,t._s)}static os(e,t){return Bt(e._s,t._s)||Ye.comparator(e.key,t.key)}}class f1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new An(gi.ss)}checkEmpty(e){return ce.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const u=this.ws;this.ws++;const c=new ZS(u,t,r,i);this.mutationQueue.push(c);for(const p of i)this.gs=this.gs.add(new gi(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ce.resolve(c)}lookupMutationBatch(e,t){return ce.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),u=i<0?0:i;return ce.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new gi(t,0),i=new gi(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,i],c=>{const p=this.ys(c._s);u.push(p)}),ce.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new An(Bt);return t.forEach(i=>{const u=new gi(i,0),c=new gi(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,c],p=>{r=r.add(p._s)})}),ce.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;Ye.isDocumentKey(u)||(u=u.child(""));const c=new gi(new Ye(u),0);let p=new An(Bt);return this.gs.forEachWhile(_=>{const b=_.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(p=p.add(_._s)),!0)},c),ce.resolve(this.Is(p))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){kt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ce.forEach(t.mutations,i=>{const u=new gi(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new gi(t,0),i=this.gs.firstAfterOrEqual(r);return ce.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ce.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class p1{constructor(e){this.Es=e,this.docs=new hr(Ye.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ce.resolve(r?r.document.mutableCopy():Fn.newInvalidDocument(t))}getEntries(e,t){let r=Es();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():Fn.newInvalidDocument(i))}),ce.resolve(r)}getAllFromCollection(e,t,r){let i=Es();const u=new Ye(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:p,value:{document:_}}=c.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||Ri(Xg(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return ce.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ct()}As(e,t){return ce.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new g1(this)}getSize(e){return ce.resolve(this.size)}}class g1 extends bR{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),ce.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class m1{constructor(e){this.persistence=e,this.Rs=new xd(t=>Ho(t),lm),this.lastRemoteSnapshotVersion=Rt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new eT,this.targetCount=0,this.vs=Vf.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ce.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Vf(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.Dn(t),ce.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Rs.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Rs.delete(c),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),ce.waitFor(u).next(()=>i)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ce.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ce.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),ce.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ce.resolve(r)}containsKey(e,t){return ce.resolve(this.Ps.containsKey(t))}}class AR{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new hi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new m1(this),this.indexManager=new e1,this.remoteDocumentCache=new p1(r=>this.referenceDelegate.xs(r)),this.It=new sR(t),this.Ns=new d1(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new h1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new f1(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){He("MemoryPersistence","Starting transaction:",e);const i=new y1(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(u=>this.referenceDelegate.Os(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Ms(e,t){return ce.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class y1 extends Jg{constructor(e){super(),this.currentSequenceNumber=e}}class Q0{constructor(e){this.persistence=e,this.Fs=new eT,this.$s=null}static Bs(e){return new Q0(e)}get Ls(){if(this.$s)return this.$s;throw ct()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ce.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ce.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Ls,r=>{const i=Ye.fromPath(r);return this.Us(e,i).next(u=>{u||t.removeEntry(i,Rt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return ce.or([()=>ce.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class _1{constructor(e){this.It=e}$(e,t,r,i){const u=new If("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",eR,{unique:!0}),p.createObjectStore("documentMutations"),xR(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=ce.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),xR(e)),c=c.next(()=>function(p){const _=p.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Rt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",b)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(p,_){return _.store("mutations").W().next(b=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",eR,{unique:!0});const T=_.store("mutations"),M=b.map(H=>T.put(H));return ce.waitFor(M)})}(e,u))),c=c.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.qs(u))),r<6&&i>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&i>=7&&(c=c.next(()=>this.Gs(u))),r<8&&i>=8&&(c=c.next(()=>this.Qs(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.js(u))),r<11&&i>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(p){const _=p.createObjectStore("documentOverlays",{keyPath:$N});_.createIndex("collectionPathOverlayIndex",HN,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",zN,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(p){const _=p.createObjectStore("remoteDocumentsV14",{keyPath:RN});_.createIndex("documentKeyIndex",ON),_.createIndex("collectionGroupIndex",kN)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.zs(e,u))),r<15&&i>=15&&(c=c.next(()=>function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:VN}).createIndex("sequenceNumberIndex",BN,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:UN}).createIndex("documentKeyIndex",jN,{unique:!1})}(e))),c}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=Z0(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>ce.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",c).next(p=>ce.forEach(p,_=>{kt(_.userId===u.userId);const b=Pf(this.It,_);return yR(e,u.userId,b).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Z((c,p)=>{const _=new an(c),b=[0,es(_)];u.push(t.get(b).next(T=>T?ce.resolve():t.put({targetId:0,path:es(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ce.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:LN});const r=t.store("collectionParents"),i=new JS,u=c=>{if(i.add(c)){const p=c.lastSegment(),_=c.popLast();return r.put({collectionId:p,parent:es(_)})}};return t.store("remoteDocuments").Z({X:!0},(c,p)=>{const _=new an(c);return u(_.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([c,p,_],b)=>{const T=ju(p);return u(T.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const u=Mv(i),c=aR(this.It,u);return t.put(c)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((u,c)=>{const p=t.store("remoteDocumentsV14"),_=(b=c,b.document?new Ye(an.fromString(b.document.name).popFirst(5)):b.noDocument?Ye.fromSegments(b.noDocument.path):b.unknownDocument?Ye.fromSegments(b.unknownDocument.path):ct()).path.toArray();var b;const T={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(p.put(T))}).next(()=>ce.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=CR(this.It),u=new AR(Q0.Bs,this.It.re);return r.W().next(c=>{const p=new Map;return c.forEach(_=>{var b;let T=null!==(b=p.get(_.userId))&&void 0!==b?b:Kt();Pf(this.It,_).keys().forEach(M=>T=T.add(M)),p.set(_.userId,T)}),ce.forEach(p,(_,b)=>{const T=new Ir(b),M=G0.oe(this.It,T),H=u.getIndexManager(T),K=K0.oe(T,this.It,H,u.referenceDelegate);return new TR(i,K,M,H).recalculateAndSaveOverlaysForDocumentKeys(new qS(t,hi.at),_).next()})})}}function xR(n){n.createObjectStore("targetDocuments",{keyPath:NN}).createIndex("documentTargetsIndex",FN,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",PN,{unique:!0}),n.createObjectStore("targetGlobal")}const tT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class nT{constructor(e,t,r,i,u,c,p,_,b,T,M=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=c,this.document=p,this.Js=b,this.Ys=T,this.Xs=M,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=H=>Promise.resolve(),!nT.C())throw new Le(me.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new a1(this,i),this.ii=t+"main",this.It=new sR(_),this.ri=new ws(this.ii,this.Xs,new _1(this.It)),this.Cs=new n1(this.referenceDelegate,this.It),this.remoteDocumentCache=CR(this.It),this.Ns=new ZN,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===T&&lr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Le(me.FAILED_PRECONDITION,tT);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new hi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,Ee.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Ee.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>X0(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Va(e))return He("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return He("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Fv(e).get("owner").next(t=>ce.resolve(this.mi(t)))}gi(e){return X0(e).delete(this.clientId)}yi(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=pi(r,"clientMetadata");return i.W().next(u=>{const c=e.Ii(u,18e5),p=u.filter(_=>-1===c.indexOf(_));return ce.forEach(p,_=>i.delete(_.clientId)).next(()=>p)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ce.resolve(!0):Fv(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Le(me.FAILED_PRECONDITION,tT);return!1}}return!(!this.networkEnabled||!this.inForeground)||X0(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&He("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new qS(t,hi.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>X0(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return K0.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new t1(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return G0.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){He("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=15===(c=this.Xs)?WN:14===c?iR:13===c?rR:12===c?GN:11===c?nR:void ct();var c;let p;return this.ri.runTransaction(e,i,u,_=>(p=new qS(_,this.Ss?this.Ss.next():hi.at),"readwrite-primary"===t?this.fi(p).next(b=>!!b||this.di(p)).next(b=>{if(!b)throw lr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Le(me.FAILED_PRECONDITION,C0);return r(p)}).next(b=>this.wi(p).next(()=>b)):this.Vi(p).next(()=>r(p)))).then(_=>(p.raiseOnCommittedEvent(),_))}Vi(e){return Fv(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Le(me.FAILED_PRECONDITION,tT)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fv(e).put("owner",t)}static C(){return ws.C()}_i(e){const t=Fv(e);return t.get("owner").next(r=>this.mi(r)?(He("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ce.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(lr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,rn.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return He("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return lr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){lr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Fv(n){return pi(n,"owner")}function X0(n){return pi(n,"clientMetadata")}function rT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class iT{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Kt(),i=Kt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new iT(e,t.fromCache,r,i)}}class MR{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(u=>u||this.Oi(e,t,i,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(F0(t))return ce.resolve(null);let r=ki(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=wv(t,null,"F"),r=ki(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=Kt(...u);return this.Ni.getDocuments(e,c).next(p=>this.indexManager.getMinOffset(e,r).next(_=>{const b=this.Fi(t,p);return this.$i(t,b,c,_.readTime)?this.ki(e,wv(t,null,"F")):this.Bi(e,b,t,_)}))})))}Oi(e,t,r,i){return F0(t)||i.isEqual(Rt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const c=this.Fi(t,u);return this.$i(t,c,r,i)?this.Mi(e,t):(ov()<=Du.in.DEBUG&&He("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),B0(t)),this.Bi(e,c,t,b0(i,-1)))})}Fi(e,t){let r=new An(jS(e));return t.forEach((i,u)=>{U0(e,u)&&(r=r.add(u))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Mi(e,t){return ov()<=Du.in.DEBUG&&He("QueryEngine","Using full collection scan to execute query:",B0(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ji.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class v1{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new hr(Bt),this.qi=new xd(u=>Ho(u),lm),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TR(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function RR(n,e,t,r){return new v1(n,e,t,r)}function OR(n,e){return sT.apply(this,arguments)}function sT(){return sT=(0,Ee.Z)(function*(n,e){const t=et(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(u=>(i=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],p=[];let _=Kt();for(const b of i){c.push(b.batchId);for(const T of b.mutations)_=_.add(T.key)}for(const b of u){p.push(b.batchId);for(const T of b.mutations)_=_.add(T.key)}return t.localDocuments.getDocuments(r,_).next(b=>({ji:b,removedBatchIds:c,addedBatchIds:p}))})})}),sT.apply(this,arguments)}function w1(n,e){const t=et(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(c,p,_,b){const T=_.batch,M=T.keys();let H=ce.resolve();return M.forEach(K=>{H=H.next(()=>b.getEntry(p,K)).next(te=>{const Me=_.docVersions.get(K);kt(null!==Me),te.version.compareTo(Me)<0&&(T.applyToRemoteDocument(te,_),te.isValidDocument()&&(te.setReadTime(_.commitVersion),b.addEntry(te)))})}),H.next(()=>c.mutationQueue.removeMutationBatch(p,T))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let p=Kt();for(let _=0;_<c.mutationResults.length;++_)c.mutationResults[_].transformResults.length>0&&(p=p.add(c.batch.mutations[_].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function kR(n){const e=et(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function E1(n,e){const t=et(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const p=[];e.targetChanges.forEach((T,M)=>{const H=i.get(M);if(!H)return;p.push(t.Cs.removeMatchingKeys(u,T.removedDocuments,M).next(()=>t.Cs.addMatchingKeys(u,T.addedDocuments,M)));let K=H.withSequenceNumber(u.currentSequenceNumber);var te,Me,Ue;e.targetMismatches.has(M)?K=K.withResumeToken(yr.EMPTY_BYTE_STRING,Rt.min()).withLastLimboFreeSnapshotVersion(Rt.min()):T.resumeToken.approximateByteSize()>0&&(K=K.withResumeToken(T.resumeToken,r)),i=i.insert(M,K),Me=K,Ue=T,(0===(te=H).resumeToken.approximateByteSize()||Me.snapshotVersion.toMicroseconds()-te.snapshotVersion.toMicroseconds()>=3e8||Ue.addedDocuments.size+Ue.modifiedDocuments.size+Ue.removedDocuments.size>0)&&p.push(t.Cs.updateTargetData(u,K))});let _=Es(),b=Kt();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,T))}),p.push(PR(u,c,e.documentUpdates).next(T=>{_=T.Wi,b=T.zi})),!r.isEqual(Rt.min())){const T=t.Cs.getLastRemoteSnapshotVersion(u).next(M=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(T)}return ce.waitFor(p).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,b)).next(()=>_)}).then(u=>(t.Ui=i,u))}function PR(n,e,t){let r=Kt(),i=Kt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let c=Es();return t.forEach((p,_)=>{const b=u.get(p);_.isFoundDocument()!==b.isFoundDocument()&&(i=i.add(p)),_.isNoDocument()&&_.version.isEqual(Rt.min())?(e.removeEntry(p,_.readTime),c=c.insert(p,_)):!b.isValidDocument()||_.version.compareTo(b.version)>0||0===_.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(_),c=c.insert(p,_)):He("LocalStore","Ignoring outdated watch update for ",p,". Current version:",b.version," Watch version:",_.version)}),{Wi:c,zi:i}})}function b1(n,e){const t=et(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function wm(n,e){const t=et(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(u=>u?(i=u,ce.resolve(i)):t.Cs.allocateTargetId(r).next(c=>(i=new Md(e,c,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Em(n,e,t){return oT.apply(this,arguments)}function oT(){return oT=(0,Ee.Z)(function*(n,e,t){const r=et(n),i=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Va(c))throw c;He("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),oT.apply(this,arguments)}function J0(n,e,t){const r=et(n);let i=Rt.min(),u=Kt();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,_,b){const T=et(p),M=T.qi.get(b);return void 0!==M?ce.resolve(T.Ui.get(M)):T.Cs.getTargetData(_,b)}(r,c,ki(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(c,p.targetId).next(_=>{u=_})}).next(()=>r.Li.getDocumentsMatchingQuery(c,e,t?i:Rt.min(),t?u:Kt())).next(p=>(LR(r,US(e),p),{documents:p,Hi:u})))}function NR(n,e){const t=et(n),r=et(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(c=>c?c.target:null))}function FR(n,e){const t=et(n),r=t.Ki.get(e)||Rt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,b0(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(LR(t,e,i),i))}function LR(n,e,t){let r=n.Ki.get(e)||Rt.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function aT(){return aT=(0,Ee.Z)(function*(n,e,t,r){const i=et(n);let u=Kt(),c=Es();for(const b of t){const T=e.Ji(b.metadata.name);b.document&&(u=u.add(T));const M=e.Yi(b);M.setReadTime(e.Xi(b.metadata.readTime)),c=c.insert(T,M)}const p=i.Gi.newChangeBuffer({trackRemovals:!0}),_=yield wm(i,(b=r,ki(xf(an.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>PR(b,p,c).next(T=>(p.apply(b),T)).next(T=>i.Cs.removeMatchingKeysForTargetId(b,_.targetId).next(()=>i.Cs.addMatchingKeys(b,u,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(b,T.Wi,T.zi)).next(()=>T.Wi)))}),aT.apply(this,arguments)}function I1(n,e){return uT.apply(this,arguments)}function uT(){return uT=(0,Ee.Z)(function*(n,e,t=Kt()){const r=yield wm(n,ki(QS(e.bundledQuery))),i=et(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=fi(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ns.saveNamedQuery(u,e);const p=r.withResumeToken(yr.EMPTY_BYTE_STRING,c);return i.Ui=i.Ui.insert(p.targetId,p),i.Cs.updateTargetData(u,p).next(()=>i.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(u,e))})}),uT.apply(this,arguments)}function VR(n,e){return`firestore_clients_${n}_${e}`}function BR(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function lT(n,e){return`firestore_targets_${n}_${e}`}class eC{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new Le(i.error.code,i.error.message))),c?new eC(e,t,i.state,u):(lr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Lv{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Le(r.error.code,r.error.message))),u?new Lv(e,r.state,i):(lr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class tC{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=j0();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=cv(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new tC(e,u):(lr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class cT{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new cT(t.clientId,t.onlineState):(lr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class dT{constructor(){this.activeTargetIds=j0()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hT{constructor(e,t,r,i,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new hr(Bt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=VR(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new dT),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const u=e.getItem(VR(e.persistenceKey,i));if(u){const c=tC.Zi(i,u);c&&(e.ur=e.ur.insert(c.clientId,c))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(lT(this.persistenceKey,e));if(r){const i=Lv.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(lT(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return He("SharedClientState","READ",e,t),t}setItem(e,t){He("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){He("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(He("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void lr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(u){let c=hi.at;if(null!=u)try{const p=JSON.parse(u);kt("number"==typeof p),c=p}catch(p){lr("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);i!==hi.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new eC(this.currentUser,e,t,r),u=BR(this.persistenceKey,this.currentUser,e);this.setItem(u,i.tr())}Er(e){const t=BR(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=lT(this.persistenceKey,e),u=new Lv(e,t,r);this.setItem(i,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return tC.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return eC.Zi(new Ir(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return Lv.Zi(i,t)}yr(e){return cT.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);He("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),u=this.Ir(r),c=[],p=[];return u.forEach(_=>{i.has(_)||c.push(_)}),i.forEach(_=>{u.has(_)||p.push(_)}),this.syncEngine.Br(c,p).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=j0();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class UR{constructor(){this.Lr=new dT,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new dT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class D1{qr(e){}shutdown(){}}class jR{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){He("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){He("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const S1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class T1{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class A1 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,u){const c=this.ho(e,t);He("RestConnection","Sending: ",c,r);const p={};return this.lo(p,i,u),this.fo(e,c,p,r).then(_=>(He("RestConnection","Received: ",_),_),_=>{throw bd("RestConnection",`${e} failed with error: `,_,"url: ",c,"request:",r),_})}_o(e,t,r,i,u,c){return this.ao(e,t,r,i,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ll,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}ho(e,t){return`${this.oo}/v1/${t}:${S1[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((u,c)=>{const p=new IS;p.setWithCredentials(!0),p.listenOnce(c0.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case iv.NO_ERROR:const b=p.getResponseJson();He("Connection","XHR received:",JSON.stringify(b)),u(b);break;case iv.TIMEOUT:He("Connection",'RPC "'+e+'" timed out'),c(new Le(me.DEADLINE_EXCEEDED,"Request time out"));break;case iv.HTTP_ERROR:const T=p.getStatus();if(He("Connection",'RPC "'+e+'" failed with status:',T,"response text:",p.getResponseText()),T>0){const M=p.getResponseJson().error;if(M&&M.status&&M.message){const H=function(K){const te=K.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(te)>=0?te:me.UNKNOWN}(M.status);c(new Le(H,M.message))}else c(new Le(me.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new Le(me.UNAVAILABLE,"Connection failed."));break;default:ct()}}finally{He("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);p.send(t,"POST",_,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=u0(),c=l0(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new CS({})),this.lo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const _=i.join("");He("Connection","Creating WebChannel: "+_,p);const b=u.createWebChannel(_,p);let T=!1,M=!1;const H=new T1({Hr:te=>{M?He("Connection","Not sending because WebChannel is closed:",te):(T||(He("Connection","Opening WebChannel transport."),b.open(),T=!0),He("Connection","WebChannel sending:",te),b.send(te))},Jr:()=>b.close()}),K=(te,Me,Ue)=>{te.listen(Me,gt=>{try{Ue(gt)}catch(Nt){setTimeout(()=>{throw Nt},0)}})};return K(b,bf.EventType.OPEN,()=>{M||He("Connection","WebChannel transport opened.")}),K(b,bf.EventType.CLOSE,()=>{M||(M=!0,He("Connection","WebChannel transport closed"),H.io())}),K(b,bf.EventType.ERROR,te=>{M||(M=!0,bd("Connection","WebChannel transport errored:",te),H.io(new Le(me.UNAVAILABLE,"The operation could not be completed")))}),K(b,bf.EventType.MESSAGE,te=>{var Me;if(!M){const Ue=te.data[0];kt(!!Ue);const gt=Ue,Nt=gt.error||(null===(Me=gt[0])||void 0===Me?void 0:Me.error);if(Nt){He("Connection","WebChannel received error:",Nt);const Ut=Nt.status;let jt=function(Xt){const Xr=Fr[Xt];if(void 0!==Xr)return PM(Xr)}(Ut),Ht=Nt.message;void 0===jt&&(jt=me.INTERNAL,Ht="Unknown error status: "+Ut+" with message "+Nt.message),M=!0,H.io(new Le(jt,Ht)),b.close()}else He("Connection","WebChannel received:",Ue),H.ro(Ue)}}),K(c,d0.STAT_EVENT,te=>{te.stat===h0.PROXY?He("Connection","Detected buffering proxy"):te.stat===h0.NOPROXY&&He("Connection","Detected no buffering proxy")}),setTimeout(()=>{H.so()},0),H}}function $R(){return typeof window<"u"?window:null}function nC(){return typeof document<"u"?document:null}function Vv(n){return new _N(n,!0)}class fT{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&He("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class HR{constructor(e,t,r,i,u,c,p,_){this.Hs=e,this.vo=r,this.Vo=i,this.So=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new fT(e,t)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,Ee.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,Ee.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,Ee.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===me.RESOURCE_EXHAUSTED?(lr(t.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===me.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new Le(me.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Mo(){var e=this;this.state=5,this.No.Ro((0,Ee.Z)(function*(){e.state=0,e.start()}))}jo(e){return He("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Hs.enqueueAndForget(()=>this.Do===e?t():(He("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class x1 extends HR{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.It=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function EN(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:ct(),i=e.targetChange.targetIds||[],u=function(_,b){return _.gt?(kt(void 0===b||"string"==typeof b),yr.fromBase64String(b||"")):(kt(void 0===b||b instanceof Uint8Array),yr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(_){const b=void 0===_.code?me.UNKNOWN:PM(_.code);return new Le(b,_.message||"")}(c);t=new BM(r,i,u,p||null)}else if("documentChange"in e){const r=e.documentChange,i=Uu(n,r.document.name),u=fi(r.document.updateTime),c=new Dr({mapValue:{fields:r.document.fields}}),p=Fn.newFoundDocument(i,u,c);t=new $0(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=Uu(n,r.document),u=r.readTime?fi(r.readTime):Rt.min(),c=Fn.newNoDocument(i,u);t=new $0([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Uu(n,r.document);t=new $0([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ct();{const r=e.filter,u=new Ev(r.count||0);t=new VM(r.targetId,u)}}var _;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Rt.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?Rt.min():u.readTime?fi(u.readTime):Rt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=Av(this.It),t.addTarget=function(i,u){let c;const p=u.target;return c=pv(p)?{documents:KM(i,p)}:{query:WS(i,p)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=HM(i,u.resumeToken):u.snapshotVersion.compareTo(Rt.min())>0&&(c.readTime=Sv(i,u.snapshotVersion.toTimestamp())),c}(this.It,e);const r=function CN(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ct()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=Av(this.It),t.removeTarget=e,this.Lo(t)}}class M1 extends HR{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.It=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(kt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function bN(n,e){return n&&n.length>0?(kt(void 0!==e),n.map(t=>function(r,i){let u=fi(r.updateTime?r.updateTime:i);return u.isEqual(Rt.min())&&(u=fi(i)),new Ke(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=fi(e.commitTime);return this.listener.tu(r,t)}return kt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Av(this.It),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>xv(this.It,r))};this.Lo(t)}}class R1 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.It=i,this.su=!1}iu(){if(this.su)throw new Le(me.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.So.ao(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Le(me.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.So._o(e,t,r,u,c,i)).catch(u=>{throw"FirebaseError"===u.name?(u.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Le(me.UNKNOWN,u.toString())})}terminate(){this.su=!0}}class k1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(lr(t),this.uu=!1):He("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class P1{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.qr(p=>{r.enqueueAndForget((0,Ee.Z)(function*(){var _;$l(c)&&(He("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,Ee.Z)(function*(b){const T=et(b);T.wu.add(4),yield bm(T),T.yu.set("Unknown"),T.wu.delete(4),yield Bv(T)}),function(b){return _.apply(this,arguments)})(c))}))}),this.yu=new k1(r,i)}}function Bv(n){return gT.apply(this,arguments)}function gT(){return gT=(0,Ee.Z)(function*(n){if($l(n))for(const e of n.mu)yield e(!0)}),gT.apply(this,arguments)}function bm(n){return mT.apply(this,arguments)}function mT(){return mT=(0,Ee.Z)(function*(n){for(const e of n.mu)yield e(!1)}),mT.apply(this,arguments)}function rC(n,e){const t=et(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),vT(t)?_T(t):Im(t).Oo()&&yT(t,e))}function Uv(n,e){const t=et(n),r=Im(t);t._u.delete(e),r.Oo()&&zR(t,e),0===t._u.size&&(r.Oo()?r.$o():$l(t)&&t.yu.set("Unknown"))}function yT(n,e){n.pu.Mt(e.targetId),Im(n).Ho(e)}function zR(n,e){n.pu.Mt(e),Im(n).Jo(e)}function _T(n){n.pu=new gN({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n._u.get(e)||null}),Im(n).start(),n.yu.cu()}function vT(n){return $l(n)&&!Im(n).ko()&&n._u.size>0}function $l(n){return 0===et(n).wu.size}function GR(n){n.pu=void 0}function N1(n){return wT.apply(this,arguments)}function wT(){return wT=(0,Ee.Z)(function*(n){n._u.forEach((e,t)=>{yT(n,e)})}),wT.apply(this,arguments)}function F1(n,e){return ET.apply(this,arguments)}function ET(){return ET=(0,Ee.Z)(function*(n,e){GR(n),vT(n)?(n.yu.lu(e),_T(n)):n.yu.set("Unknown")}),ET.apply(this,arguments)}function L1(n,e,t){return bT.apply(this,arguments)}function bT(){return bT=(0,Ee.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof BM&&2===e.state&&e.cause)try{yield(r=(0,Ee.Z)(function*(i,u){const c=u.cause;for(const p of u.targetIds)i._u.has(p)&&(yield i.remoteSyncer.rejectListen(p,c),i._u.delete(p),i.pu.removeTarget(p))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){He("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield iC(n,r)}else if(e instanceof $0?n.pu.Gt(e):e instanceof VM?n.pu.Yt(e):n.pu.Wt(e),!t.isEqual(Rt.min()))try{const r=yield kR(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.pu.te(u);return c.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const b=i._u.get(_);b&&i._u.set(_,b.withResumeToken(p.resumeToken,u))}}),c.targetMismatches.forEach(p=>{const _=i._u.get(p);if(!_)return;i._u.set(p,_.withResumeToken(yr.EMPTY_BYTE_STRING,_.snapshotVersion)),zR(i,p);const b=new Md(_.target,p,1,_.sequenceNumber);yT(i,b)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){He("RemoteStore","Failed to raise snapshot:",r),yield iC(n,r)}var r}),bT.apply(this,arguments)}function iC(n,e,t){return CT.apply(this,arguments)}function CT(){return CT=(0,Ee.Z)(function*(n,e,t){if(!Va(e))throw e;n.wu.add(1),yield bm(n),n.yu.set("Offline"),t||(t=()=>kR(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){He("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Bv(n)}))}),CT.apply(this,arguments)}function WR(n,e){return e().catch(t=>iC(n,t,e))}function Cm(n){return IT.apply(this,arguments)}function IT(){return IT=(0,Ee.Z)(function*(n){const e=et(n),t=kd(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;V1(e);)try{const i=yield b1(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,B1(e,i)}catch(i){yield iC(e,i)}qR(e)&&ZR(e)}),IT.apply(this,arguments)}function V1(n){return $l(n)&&n.du.length<10}function B1(n,e){n.du.push(e);const t=kd(n);t.Oo()&&t.Xo&&t.Zo(e.mutations)}function qR(n){return $l(n)&&!kd(n).ko()&&n.du.length>0}function ZR(n){kd(n).start()}function U1(n){return DT.apply(this,arguments)}function DT(){return DT=(0,Ee.Z)(function*(n){kd(n).nu()}),DT.apply(this,arguments)}function j1(n){return ST.apply(this,arguments)}function ST(){return ST=(0,Ee.Z)(function*(n){const e=kd(n);for(const t of n.du)e.Zo(t.mutations)}),ST.apply(this,arguments)}function $1(n,e,t){return TT.apply(this,arguments)}function TT(){return TT=(0,Ee.Z)(function*(n,e,t){const r=n.du.shift(),i=KS.from(r,e,t);yield WR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Cm(n)}),TT.apply(this,arguments)}function H1(n,e){return AT.apply(this,arguments)}function AT(){return AT=(0,Ee.Z)(function*(n,e){var t;e&&kd(n).Xo&&(yield(t=(0,Ee.Z)(function*(r,i){if(kM(u=i.code)&&u!==me.ABORTED){const c=r.du.shift();kd(r).Fo(),yield WR(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield Cm(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),qR(n)&&ZR(n)}),AT.apply(this,arguments)}function KR(n,e){return xT.apply(this,arguments)}function xT(){return xT=(0,Ee.Z)(function*(n,e){const t=et(n);t.asyncQueue.verifyOperationInProgress(),He("RemoteStore","RemoteStore received new credentials");const r=$l(t);t.wu.add(3),yield bm(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Bv(t)}),xT.apply(this,arguments)}function MT(n,e){return RT.apply(this,arguments)}function RT(){return RT=(0,Ee.Z)(function*(n,e){const t=et(n);e?(t.wu.delete(2),yield Bv(t)):e||(t.wu.add(2),yield bm(t),t.yu.set("Unknown"))}),RT.apply(this,arguments)}function Im(n){return n.Iu||(n.Iu=function(e,t,r){const i=et(e);return i.iu(),new x1(t,i.So,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:N1.bind(null,n),Zr:F1.bind(null,n),zo:L1.bind(null,n)}),n.mu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Iu.Fo(),vT(n)?_T(n):n.yu.set("Unknown")):(yield n.Iu.stop(),GR(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function kd(n){return n.Tu||(n.Tu=function(e,t,r){const i=et(e);return i.iu(),new M1(t,i.So,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:U1.bind(null,n),Zr:H1.bind(null,n),eu:j1.bind(null,n),tu:$1.bind(null,n)}),n.mu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Tu.Fo(),yield Cm(n)):(yield n.Tu.stop(),n.du.length>0&&(He("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class OT{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,p=new OT(e,t,c,i,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Le(me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dm(n,e){if(lr("AsyncQueue",`${e}: ${n}`),Va(n))return new Le(me.UNAVAILABLE,`${e}: ${n}`);throw n}class Sm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ye.comparator(t.key,r.key):(t,r)=>Ye.comparator(t.key,r.key),this.keyedMap=bv(),this.sortedSet=new hr(this.comparator)}static emptySet(e){return new Sm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Sm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Sm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class YR{constructor(){this.Eu=new hr(Ye.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):ct():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Tm{constructor(e,t,r,i,u,c,p,_,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=_,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,i,u){const c=[];return t.forEach(p=>{c.push({type:0,doc:p})}),new Tm(e,t,Sm.emptySet(t),c,r,i,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class z1{constructor(){this.Ru=void 0,this.listeners=[]}}class G1{constructor(){this.queries=new xd(e=>V0(e),dm),this.onlineState="Unknown",this.bu=new Set}}function kT(n,e){return PT.apply(this,arguments)}function PT(){return PT=(0,Ee.Z)(function*(n,e){const t=et(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new z1),i)try{u.Ru=yield t.onListen(r)}catch(c){const p=Dm(c,`Initialization of query '${B0(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.vu(u.Ru)&&LT(t)}),PT.apply(this,arguments)}function NT(n,e){return FT.apply(this,arguments)}function FT(){return FT=(0,Ee.Z)(function*(n,e){const t=et(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),FT.apply(this,arguments)}function W1(n,e){const t=et(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const p of c.listeners)p.vu(i)&&(r=!0);c.Ru=i}}r&&LT(t)}function q1(n,e,t){const r=et(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function LT(n){n.bu.forEach(e=>{e.next()})}class VT{constructor(e,t,r){this.query=e,this.Vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Tm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||(!this.options.ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Tm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class Z1{constructor(e,t){this.payload=e,this.byteLength=t}Ou(){return"metadata"in this.payload}}class QR{constructor(e){this.It=e}Ji(e){return Uu(this.It,e)}Yi(e){return e.metadata.exists?ZM(this.It,e.document,!1):Fn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return fi(e)}}class K1{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=XR(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=an.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new QR(this.It);for(const i of e)if(i.metadata.queries){const u=r.Ji(i.metadata.name);for(const c of i.metadata.queries){const p=(t.get(c)||Kt()).add(u);t.set(c,p)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function C1(n,e,t,r){return aT.apply(this,arguments)}(e.localStore,new QR(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield I1(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function XR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class JR{constructor(e){this.key=e}}class eO{constructor(e){this.key=e}}class tO{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Kt(),this.mutatedKeys=Kt(),this.Gu=jS(e),this.Qu=new Sm(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new YR,i=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,p=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,b="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,M)=>{const H=i.get(T),K=U0(this.query,M)?M:null,te=!!H&&this.mutatedKeys.has(H.key),Me=!!K&&(K.hasLocalMutations||this.mutatedKeys.has(K.key)&&K.hasCommittedMutations);let Ue=!1;H&&K?H.data.isEqual(K.data)?te!==Me&&(r.track({type:3,doc:K}),Ue=!0):this.Hu(H,K)||(r.track({type:2,doc:K}),Ue=!0,(_&&this.Gu(K,_)>0||b&&this.Gu(K,b)<0)&&(p=!0)):!H&&K?(r.track({type:0,doc:K}),Ue=!0):H&&!K&&(r.track({type:1,doc:H}),Ue=!0,(_||b)&&(p=!0)),Ue&&(K?(c=c.add(K),u=Me?u.add(T):u.delete(T)):(c=c.delete(T),u=u.delete(T)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const T="F"===this.query.limitType?c.last():c.first();c=c.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{Qu:c,zu:r,$i:p,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((b,T)=>function(M,H){const K=te=>{switch(te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ct()}};return K(M)-K(H)}(b.type,T.type)||this.Gu(b.doc,T.doc)),this.Ju(r);const c=t?this.Yu():[],p=0===this.Ku.size&&this.current?1:0,_=p!==this.qu;return this.qu=p,0!==u.length||_?{snapshot:new Tm(this.query,e.Qu,i,u,e.mutatedKeys,0===p,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:c}:{Xu:c}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new YR,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Kt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new eO(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new JR(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Kt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Tm.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class Y1{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Q1{constructor(e){this.key=e,this.nc=!1}}class X1{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.sc={},this.ic=new xd(p=>V0(p),dm),this.rc=new Map,this.oc=new Set,this.uc=new hr(Ye.comparator),this.cc=new Map,this.ac=new eT,this.hc={},this.lc=new Map,this.fc=Vf.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function J1(n,e){return BT.apply(this,arguments)}function BT(){return BT=(0,Ee.Z)(function*(n,e){const t=uA(n);let r,i;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.ec();else{const c=yield wm(t.localStore,ki(e));t.isPrimaryClient&&rC(t.remoteStore,c);const p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield UT(t,e,r,"current"===p,c.resumeToken)}return i}),BT.apply(this,arguments)}function UT(n,e,t,r,i){return jT.apply(this,arguments)}function jT(){return jT=(0,Ee.Z)(function*(n,e,t,r,i){n._c=(M,H,K)=>{return(te=(0,Ee.Z)(function*(Me,Ue,gt,Nt){let Ut=Ue.view.Wu(gt);Ut.$i&&(Ut=yield J0(Me.localStore,Ue.query,!1).then(({documents:Xt})=>Ue.view.Wu(Xt,Ut)));const jt=Nt&&Nt.targetChanges.get(Ue.targetId),Ht=Ue.view.applyChanges(Ut,Me.isPrimaryClient,jt);return QT(Me,Ue.targetId,Ht.Xu),Ht.snapshot}),function(Me,Ue,gt,Nt){return te.apply(this,arguments)})(n,M,H,K);var te};const u=yield J0(n.localStore,e,!0),c=new tO(e,u.Hi),p=c.Wu(u.documents),_=Dv.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),b=c.applyChanges(p,n.isPrimaryClient,_);QT(n,t,b.Xu);const T=new Y1(e,t,c);return n.ic.set(e,T),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),b.snapshot}),jT.apply(this,arguments)}function eF(n,e){return $T.apply(this,arguments)}function $T(){return $T=(0,Ee.Z)(function*(n,e){const t=et(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(u=>!dm(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Em(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Uv(t.remoteStore,r.targetId),Am(t,r.targetId)}).catch(Ru))):(Am(t,r.targetId),yield Em(t.localStore,r.targetId,!0))}),$T.apply(this,arguments)}function HT(){return HT=(0,Ee.Z)(function*(n,e,t){const r=lA(n);try{const i=yield function(u,c){const p=et(u),_=On.now(),b=c.reduce((H,K)=>H.add(K.key),Kt());let T,M;return p.persistence.runTransaction("Locally write mutations","readwrite",H=>{let K=Es(),te=Kt();return p.Gi.getEntries(H,b).next(Me=>{K=Me,K.forEach((Ue,gt)=>{gt.isValidDocument()||(te=te.add(Ue))})}).next(()=>p.localDocuments.getOverlayedDocuments(H,K)).next(Me=>{T=Me;const Ue=[];for(const gt of c){const Nt=jl(gt,T.get(gt.key).overlayedDocument);null!=Nt&&Ue.push(new Qs(gt.key,Nt,am(Nt.value.mapValue),Ge.exists(!0)))}return p.mutationQueue.addMutationBatch(H,_,Ue,c)}).next(Me=>{M=Me;const Ue=Me.applyToLocalDocumentSet(T,te);return p.documentOverlayCache.saveOverlays(H,Me.batchId,Ue)})}).then(()=>({batchId:M.batchId,changes:FM(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,p){let _=u.hc[u.currentUser.toKey()];_||(_=new hr(Bt)),_=_.insert(c,p),u.hc[u.currentUser.toKey()]=_}(r,i.batchId,t),yield Hl(r,i.changes),yield Cm(r.remoteStore)}catch(i){const u=Dm(i,"Failed to persist write");t.reject(u)}}),HT.apply(this,arguments)}function nO(n,e){return zT.apply(this,arguments)}function zT(){return zT=(0,Ee.Z)(function*(n,e){const t=et(n);try{const r=yield E1(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.cc.get(u);c&&(kt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.nc=!0:i.modifiedDocuments.size>0?kt(c.nc):i.removedDocuments.size>0&&(kt(c.nc),c.nc=!1))}),yield Hl(t,r,e)}catch(r){yield Ru(r)}}),zT.apply(this,arguments)}function rO(n,e,t){const r=et(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((u,c)=>{const p=c.view.Pu(e);p.snapshot&&i.push(p.snapshot)}),function(u,c){const p=et(u);p.onlineState=c;let _=!1;p.queries.forEach((b,T)=>{for(const M of T.listeners)M.Pu(c)&&(_=!0)}),_&&LT(p)}(r.eventManager,e),i.length&&r.sc.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function nF(n,e,t){return GT.apply(this,arguments)}function GT(){return GT=(0,Ee.Z)(function*(n,e,t){const r=et(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),u=i&&i.key;if(u){let c=new hr(Ye.comparator);c=c.insert(u,Fn.newNoDocument(u,Rt.min()));const p=Kt().add(u),_=new Iv(Rt.min(),new Map,new An(Bt),c,p);yield nO(r,_),r.uc=r.uc.remove(u),r.cc.delete(e),XT(r)}else yield Em(r.localStore,e,!1).then(()=>Am(r,e,t)).catch(Ru)}),GT.apply(this,arguments)}function rF(n,e){return WT.apply(this,arguments)}function WT(){return WT=(0,Ee.Z)(function*(n,e){const t=et(n),r=e.batch.batchId;try{const i=yield w1(t.localStore,e);YT(t,r,null),KT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Hl(t,i)}catch(i){yield Ru(i)}}),WT.apply(this,arguments)}function iF(n,e,t){return qT.apply(this,arguments)}function qT(){return qT=(0,Ee.Z)(function*(n,e,t){const r=et(n);try{const i=yield function(u,c){const p=et(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let b;return p.mutationQueue.lookupMutationBatch(_,c).next(T=>(kt(null!==T),b=T.keys(),p.mutationQueue.removeMutationBatch(_,T))).next(()=>p.mutationQueue.performConsistencyCheck(_)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(_,b,c)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,b)).next(()=>p.localDocuments.getDocuments(_,b))})}(r.localStore,e);YT(r,e,t),KT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Hl(r,i)}catch(i){yield Ru(i)}}),qT.apply(this,arguments)}function ZT(){return ZT=(0,Ee.Z)(function*(n,e){const t=et(n);$l(t.remoteStore)||He("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=et(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.mutationQueue.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=Dm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),ZT.apply(this,arguments)}function KT(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function YT(n,e,t){const r=et(n);let i=r.hc[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function Am(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||iO(n,r)})}function iO(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(Uv(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),XT(n))}function QT(n,e,t){for(const r of t)r instanceof JR?(n.ac.addReference(r.key,e),oF(n,r)):r instanceof eO?(He("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||iO(n,r.key)):ct()}function oF(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(He("SyncEngine","New document in limbo: "+t),n.oc.add(r),XT(n))}function XT(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Ye(an.fromString(e)),r=n.fc.next();n.cc.set(r,new Q1(t)),n.uc=n.uc.insert(t,r),rC(n.remoteStore,new Md(ki(xf(t.path)),r,2,hi.at))}}function Hl(n,e,t){return JT.apply(this,arguments)}function JT(){return JT=(0,Ee.Z)(function*(n,e,t){const r=et(n),i=[],u=[],c=[];var p;r.ic.isEmpty()||(r.ic.forEach((p,_)=>{c.push(r._c(_,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,b?.fromCache?"not-current":"current"),b){i.push(b);const T=iT.Ci(_.targetId,b);u.push(T)}}))}),yield Promise.all(c),r.sc.zo(i),yield(p=(0,Ee.Z)(function*(_,b){const T=et(_);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>ce.forEach(b,H=>ce.forEach(H.Si,K=>T.persistence.referenceDelegate.addReference(M,H.targetId,K)).next(()=>ce.forEach(H.Di,K=>T.persistence.referenceDelegate.removeReference(M,H.targetId,K)))))}catch(M){if(!Va(M))throw M;He("LocalStore","Failed to update sequence numbers: "+M)}for(const M of b){const H=M.targetId;if(!M.fromCache){const K=T.Ui.get(H),Me=K.withLastLimboFreeSnapshotVersion(K.snapshotVersion);T.Ui=T.Ui.insert(H,Me)}}}),function(_,b){return p.apply(this,arguments)})(r.localStore,u))}),JT.apply(this,arguments)}function aF(n,e){return eA.apply(this,arguments)}function eA(){return eA=(0,Ee.Z)(function*(n,e){const t=et(n);if(!t.currentUser.isEqual(e)){He("SyncEngine","User change. New user:",e.toKey());const r=yield OR(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(c=>{c.forEach(p=>{p.reject(new Le(me.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Hl(t,r.ji)}var i}),eA.apply(this,arguments)}function uF(n,e){const t=et(n),r=t.cc.get(e);if(r&&r.nc)return Kt().add(r.key);{let i=Kt();const u=t.rc.get(e);if(!u)return i;for(const c of u){const p=t.ic.get(c);i=i.unionWith(p.view.ju)}return i}}function lF(n,e){return tA.apply(this,arguments)}function tA(){return tA=(0,Ee.Z)(function*(n,e){const t=et(n),r=yield J0(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&QT(t,e.targetId,i.Xu),i}),tA.apply(this,arguments)}function cF(n,e){return nA.apply(this,arguments)}function nA(){return nA=(0,Ee.Z)(function*(n,e){const t=et(n);return FR(t.localStore,e).then(r=>Hl(t,r))}),nA.apply(this,arguments)}function dF(n,e,t,r){return rA.apply(this,arguments)}function rA(){return rA=(0,Ee.Z)(function*(n,e,t,r){const i=et(n),u=yield function(c,p){const _=et(c),b=et(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",T=>b.Tn(T,p).next(M=>M?_.localDocuments.getDocuments(T,M):ce.resolve(null)))}(i.localStore,e);var p;null!==u?("pending"===t?yield Cm(i.remoteStore):"acknowledged"===t||"rejected"===t?(YT(i,e,r||null),KT(i,e),p=e,et(et(i.localStore).mutationQueue).An(p)):ct(),yield Hl(i,u)):He("SyncEngine","Cannot apply mutation batch with id: "+e)}),rA.apply(this,arguments)}function iA(){return iA=(0,Ee.Z)(function*(n,e){const t=et(n);if(uA(t),lA(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield sO(t,r.toArray());t.dc=!0,yield MT(t.remoteStore,!0);for(const u of i)rC(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Am(t,c),Em(t.localStore,c,!0))),Uv(t.remoteStore,c)}),yield i,yield sO(t,r),function(u){const c=et(u);c.cc.forEach((p,_)=>{Uv(c.remoteStore,_)}),c.ac.fs(),c.cc=new Map,c.uc=new hr(Ye.comparator)}(t),t.dc=!1,yield MT(t.remoteStore,!1)}}),iA.apply(this,arguments)}function sO(n,e,t){return sA.apply(this,arguments)}function sA(){return sA=(0,Ee.Z)(function*(n,e,t){const r=et(n),i=[],u=[];for(const c of e){let p;const _=r.rc.get(c);if(_&&0!==_.length){p=yield wm(r.localStore,ki(_[0]));for(const b of _){const T=r.ic.get(b),M=yield lF(r,T);M.snapshot&&u.push(M.snapshot)}}else{const b=yield NR(r.localStore,c);p=yield wm(r.localStore,b),yield UT(r,oO(b),c,!1,p.resumeToken)}i.push(p)}return r.sc.zo(u),i}),sA.apply(this,arguments)}function oO(n){return BS(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function fF(n){const e=et(n);return et(et(e.localStore).persistence).vi()}function pF(n,e,t,r){return oA.apply(this,arguments)}function oA(){return oA=(0,Ee.Z)(function*(n,e,t,r){const i=et(n);if(i.dc)return void He("SyncEngine","Ignoring unexpected query state notification.");const u=i.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield FR(i.localStore,US(u[0])),p=Iv.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,yr.EMPTY_BYTE_STRING);yield Hl(i,c,p);break}case"rejected":yield Em(i.localStore,e,!0),Am(i,e,r);break;default:ct()}}),oA.apply(this,arguments)}function gF(n,e,t){return aA.apply(this,arguments)}function aA(){return aA=(0,Ee.Z)(function*(n,e,t){const r=uA(n);if(r.dc){for(const i of e){if(r.rc.has(i)){He("SyncEngine","Adding an already active target "+i);continue}const u=yield NR(r.localStore,i),c=yield wm(r.localStore,u);yield UT(r,oO(u),c.targetId,!1,c.resumeToken),rC(r.remoteStore,c)}for(const i of t)r.rc.has(i)&&(yield Em(r.localStore,i,!1).then(()=>{Uv(r.remoteStore,i),Am(r,i)}).catch(Ru))}}),aA.apply(this,arguments)}function uA(n){const e=et(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=nO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nF.bind(null,e),e.sc.zo=W1.bind(null,e.eventManager),e.sc.wc=q1.bind(null,e.eventManager),e}function lA(n){const e=et(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iF.bind(null,e),e}class aO{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.It=Vv(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return RR(this.persistence,new MR,e.initialUser,this.It)}yc(e){return new AR(Q0.Bs,this.It)}gc(e){return new UR}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class uO extends aO{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield lA(r.Ac.syncEngine),yield Cm(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return RR(this.persistence,new MR,e.initialUser,this.It)}Tc(e,t){return new s1(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new D0(t,this.persistence);return new ku(e.asyncQueue,r)}yc(e){const t=rT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?bs.withCacheSize(this.cacheSizeBytes):bs.DEFAULT;return new nT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,$R(),nC(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new UR}}class yF extends uO{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof hT&&(r.sharedClientState.syncEngine={Fr:dF.bind(null,i),$r:pF.bind(null,i),Br:gF.bind(null,i),vi:fF.bind(null,i),Mr:cF.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,Ee.Z)(function*(c){yield function hF(n,e){return iA.apply(this,arguments)}(r.Ac.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}gc(e){const t=$R();if(!hT.C(t))throw new Le(me.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=rT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new hT(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class cA{initialize(e,t){var r=this;return(0,Ee.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>rO(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=aF.bind(null,r.syncEngine),yield MT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new G1}createDatastore(e){const t=Vv(e.databaseInfo.databaseId),r=new A1(e.databaseInfo);return new R1(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=p=>rO(this.syncEngine,p,0),c=jR.C()?new jR:new D1,new P1(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,p,_,b){const T=new X1(r,i,u,c,p,_);return b&&(T.dc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const r=et(t);He("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield bm(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function dA(n,e,t){if(!t)throw new Le(me.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function lO(n,e,t,r){if(!0===e&&!0===r)throw new Le(me.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function cO(n){if(!Ye.isDocumentKey(n))throw new Le(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function dO(n){if(Ye.isDocumentKey(n))throw new Le(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function sC(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ct()}function sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Le(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sC(n);throw new Le(me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function hO(n,e){if(e<=0)throw new Le(me.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const fO=new Map;class pO{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Le(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Le(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,lO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jv{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pO({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Le(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Le(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pO(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new p0;switch(t.type){case"gapi":return new SM(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Le(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=fO.get(e);t&&(He("ComponentProvider","Removing Datastore"),fO.delete(e),t.terminate())}(this),Promise.resolve()}}function gO(n,e,t,r={}){var i;const u=(n=sn(n,jv))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&bd("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,p;if("string"==typeof r.mockUserToken)c=r.mockUserToken,p=Ir.MOCK_USER;else{c=(0,rn.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Le(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ir(_)}n._authCredentials=new Zg(new SS(c,p))}}class rr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $u(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rr(this.firestore,e,this._key)}}class Pi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pi(this.firestore,e,this._query)}}class $u extends Pi{constructor(e,t,r){super(e,t,xf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rr(this.firestore,null,new Ye(e))}withConverter(e){return new $u(this.firestore,e,this._path)}}function mO(n,e,...t){if(n=(0,rn.m9)(n),dA("collection","path",e),n instanceof jv){const r=an.fromString(e,...t);return dO(r),new $u(n,null,r)}{if(!(n instanceof rr||n instanceof $u))throw new Le(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return dO(r),new $u(n.firestore,null,r)}}function oC(n,e,...t){if(n=(0,rn.m9)(n),1===arguments.length&&(e=TS.R()),dA("doc","path",e),n instanceof jv){const r=an.fromString(e,...t);return cO(r),new rr(n,null,new Ye(r))}{if(!(n instanceof rr||n instanceof $u))throw new Le(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return cO(r),new rr(n.firestore,n instanceof $u?n.converter:null,new Ye(r))}}function yO(n,e){return n=(0,rn.m9)(n),e=(0,rn.m9)(e),(n instanceof rr||n instanceof $u)&&(e instanceof rr||e instanceof $u)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function hA(n,e){return n=(0,rn.m9)(n),e=(0,rn.m9)(e),n instanceof Pi&&e instanceof Pi&&n.firestore===e.firestore&&dm(n._query,e._query)&&n.converter===e.converter}function _O(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class aC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):lr("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class vF{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new cr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(i);return new Z1(JSON.parse(u),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,Ee.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class bF{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Le(me.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ee.Z)(function*(u,c){const p=et(u),_=Av(p.It)+"/documents",b={documents:c.map(K=>Tv(p.It,K))},T=yield p._o("BatchGetDocuments",_,b,c.length),M=new Map;T.forEach(K=>{const te=function wN(n,e){return"found"in e?function(t,r){kt(!!r.found);const i=Uu(t,r.found.name),u=fi(r.found.updateTime),c=new Dr({mapValue:{fields:r.found.fields}});return Fn.newFoundDocument(i,u,c)}(n,e):"missing"in e?function(t,r){kt(!!r.missing),kt(!!r.readTime);const i=Uu(t,r.missing),u=fi(r.readTime);return Fn.newNoDocument(i,u)}(n,e):ct()}(p.It,K);M.set(te.key.toString(),te)});const H=[];return c.forEach(K=>{const te=M.get(K.toString());kt(!!te),H.push(te)}),H}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Vu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=Ye.fromPath(i);e.mutations.push(new Rf(u,e.precondition(u)))}),yield(r=(0,Ee.Z)(function*(i,u){const c=et(i),p=Av(c.It)+"/documents",_={writes:u.map(b=>xv(c.It,b))};yield c.ao("Commit",p,_)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ct();t=Rt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Le(me.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Rt.min())?Ge.exists(!1):Ge.updateTime(t):Ge.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Rt.min()))throw new Le(me.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ge.updateTime(t)}return Ge.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class CF{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.kc=r.maxAttempts,this.No=new fT(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,Ee.Z)(function*(){const t=new bF(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Fc(u)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!Sd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!kM(t)}return!1}}class IF{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ir.UNAUTHENTICATED,this.clientId=TS.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Ee.Z)(function*(p){He("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(He("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Le(me.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Dm(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function vO(n,e){return fA.apply(this,arguments)}function fA(){return fA=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),He("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ee.Z)(function*(u){r.isEqual(u)||(yield OR(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),fA.apply(this,arguments)}function wO(n,e){return pA.apply(this,arguments)}function pA(){return pA=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield gA(n);He("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>KR(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>KR(e.remoteStore,u)),n.onlineComponents=e}),pA.apply(this,arguments)}function gA(n){return mA.apply(this,arguments)}function mA(){return mA=(0,Ee.Z)(function*(n){return n.offlineComponents||(He("FirestoreClient","Using default OfflineComponentProvider"),yield vO(n,new aO)),n.offlineComponents}),mA.apply(this,arguments)}function uC(n){return yA.apply(this,arguments)}function yA(){return yA=(0,Ee.Z)(function*(n){return n.onlineComponents||(He("FirestoreClient","Using default OnlineComponentProvider"),yield wO(n,new cA)),n.onlineComponents}),yA.apply(this,arguments)}function EO(n){return gA(n).then(e=>e.persistence)}function lC(n){return gA(n).then(e=>e.localStore)}function _A(n){return uC(n).then(e=>e.remoteStore)}function vA(n){return uC(n).then(e=>e.syncEngine)}function xm(n){return wA.apply(this,arguments)}function wA(){return wA=(0,Ee.Z)(function*(n){const e=yield uC(n),t=e.eventManager;return t.onListen=J1.bind(null,e.syncEngine),t.onUnlisten=eF.bind(null,e.syncEngine),t}),wA.apply(this,arguments)}function CO(n,e,t={}){const r=new cr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,u,c,p,_){const b=new aC({next:M=>{u.enqueueAndForget(()=>NT(i,T));const H=M.docs.has(c);!H&&M.fromCache?_.reject(new Le(me.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&M.fromCache&&p&&"server"===p.source?_.reject(new Le(me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(M)},error:M=>_.reject(M)}),T=new VT(xf(c.path),b,{includeMetadataChanges:!0,ku:!0});return kT(i,T)}(yield xm(n),n.asyncQueue,e,t,r)})),r.promise}function IO(n,e,t={}){const r=new cr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,u,c,p,_){const b=new aC({next:M=>{u.enqueueAndForget(()=>NT(i,T)),M.fromCache&&"server"===p.source?_.reject(new Le(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(M)},error:M=>_.reject(M)}),T=new VT(c,b,{includeMetadataChanges:!0,ku:!0});return kT(i,T)}(yield xm(n),n.asyncQueue,e,t,r)})),r.promise}class OF{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new fT(this,"async_queue_retry"),this.Wc=()=>{const t=nC();t&&He("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=nC();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=nC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new cr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(t){if(!Va(t))throw t;He("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,lr("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=OT.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.qc.push(i),i}zc(){this.Kc&&ct()}verifyOperationInProgress(){}Xc(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function EA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class kF{constructor(){this._progressObserver={},this._taskCompletionResolver=new cr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ir extends jv{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new OF,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||DO(this),this._firestoreClient.terminate()}}function NF(n,e){const t="object"==typeof n?n:(0,Ws.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,Ws._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const u=(0,rn.P0)("firestore");u&&gO(i,...u)}return i}function Sr(n){return n._firestoreClient||DO(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function DO(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new nm(n._databaseId,u,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var u,p;n._firestoreClient=new IF(n._authCredentials,n._appCheckCredentials,n._queue,r)}function SO(n,e,t){const r=new cr;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield vO(n,t),yield wO(n,e),r.resolve()}catch(i){const u=i;if(!("FirebaseError"===(c=u).name?c.code===me.FAILED_PRECONDITION||c.code===me.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw u;bd("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var c})).then(()=>r.promise)}function TO(n){if(n._initialized||n._terminated)throw new Le(me.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Hu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hu(yr.fromBase64String(e))}catch(t){throw new Le(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Hu(yr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class zl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Le(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Uf{constructor(e){this._methodName=e}}class cC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Le(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Le(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Bt(this._lat,e._lat)||Bt(this._long,e._long)}}const zF=/^__.*__$/;class GF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Qs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Lu(e,this.data,t,this.fieldTransforms)}}class AO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Qs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ct()}}class dC{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new dC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return pC(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(xO(this.sa)&&zF.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class WF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Vv(e)}da(e,t,r,i=!1){return new dC({sa:e,methodName:t,fa:r,path:dr.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function jf(n){const e=n._freezeSettings(),t=Vv(n._databaseId);return new WF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function hC(n,e,t,r,i,u={}){const c=n.da(u.merge||u.mergeFields?2:0,e,t,i);DA("Data must be an object, but it was:",c,r);const p=OO(r,c);let _,b;if(u.merge)_=new Oi(c.fieldMask),b=c.fieldTransforms;else if(u.mergeFields){const T=[];for(const M of u.mergeFields){const H=SA(e,M,t);if(!c.contains(H))throw new Le(me.INVALID_ARGUMENT,`Field '${H}' is specified in your field mask but missing from your input data.`);PO(T,H)||T.push(H)}_=new Oi(T),b=c.fieldTransforms.filter(M=>_.covers(M.field))}else _=null,b=c.fieldTransforms;return new GF(new Dr(p),_,b)}class $v extends Uf{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $v}}function MO(n,e,t){return new dC({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class bA extends Uf{_toFieldTransform(e){return new be(e.path,new y)}isEqual(e){return e instanceof bA}}class qF extends Uf{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=MO(this,e,!0),r=this._a.map(u=>$f(u,t)),i=new w(r);return new be(e.path,i)}isEqual(e){return this===e}}class ZF extends Uf{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=MO(this,e,!0),r=this._a.map(u=>$f(u,t)),i=new S(r);return new be(e.path,i)}isEqual(e){return this===e}}class KF extends Uf{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new L(e.It,o(e.It,this.wa));return new be(e.path,t)}isEqual(e){return this===e}}function CA(n,e,t,r){const i=n.da(1,e,t);DA("Data must be an object, but it was:",i,r);const u=[],c=Dr.empty();Bl(r,(_,b)=>{const T=fC(e,_,t);b=(0,rn.m9)(b);const M=i.ca(T);if(b instanceof $v)u.push(T);else{const H=$f(b,M);null!=H&&(u.push(T),c.set(T,H))}});const p=new Oi(u);return new AO(c,p,i.fieldTransforms)}function IA(n,e,t,r,i,u){const c=n.da(1,e,t),p=[SA(e,r,t)],_=[i];if(u.length%2!=0)throw new Le(me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let H=0;H<u.length;H+=2)p.push(SA(e,u[H])),_.push(u[H+1]);const b=[],T=Dr.empty();for(let H=p.length-1;H>=0;--H)if(!PO(b,p[H])){const K=p[H];let te=_[H];te=(0,rn.m9)(te);const Me=c.ca(K);if(te instanceof $v)b.push(K);else{const Ue=$f(te,Me);null!=Ue&&(b.push(K),T.set(K,Ue))}}const M=new Oi(b);return new AO(T,M,c.fieldTransforms)}function RO(n,e,t,r=!1){return $f(t,n.da(r?4:3,e))}function $f(n,e){if(kO(n=(0,rn.m9)(n)))return DA("Unsupported field value:",e,n),OO(n,e);if(n instanceof Uf)return function(t,r){if(!xO(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let p=$f(c,r.aa(u));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,rn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return o(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=On.fromDate(t);return{timestampValue:Sv(r.It,i)}}if(t instanceof On){const i=new On(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Sv(r.It,i)}}if(t instanceof cC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Hu)return{bytesValue:HM(r.It,t._byteString)};if(t instanceof rr){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:HS(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${sC(t)}`)}(n,e)}function OO(n,e){const t={};return MS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bl(n,(r,i)=>{const u=$f(i,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function kO(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof On||n instanceof cC||n instanceof Hu||n instanceof rr||n instanceof Uf)}function DA(n,e,t){if(!kO(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=sC(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function SA(n,e,t){if((e=(0,rn.m9)(e))instanceof zl)return e._internalPath;if("string"==typeof e)return fC(n,e);throw pC("Field path arguments must be of type string or ",n,!1,void 0,t)}const YF=new RegExp("[~\\*/\\[\\]]");function fC(n,e,t){if(e.search(YF)>=0)throw pC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new zl(...e.split("."))._internalPath}catch{throw pC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function pC(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(u||c)&&(_+=" (found",u&&(_+=` in field ${r}`),c&&(_+=` in document ${i}`),_+=")"),new Le(me.INVALID_ARGUMENT,p+n+_)}function PO(n,e){return n.some(t=>t.isEqual(e))}class Hv{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new rr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new QF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(gC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class QF extends Hv{data(){return super.data()}}function gC(n,e){return"string"==typeof e?fC(n,e):e instanceof zl?e._internalPath:e._delegate._internalPath}function NO(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Le(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zv{}function Pd(n,...e){for(const t of e)n=t._apply(n);return n}class XF extends zv{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=jf(e.firestore),r=function(i,u,c,p,_,b,T){let M;if(_.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Le(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){jO(T,b);const K=[];for(const te of T)K.push(UO(p,i,te));M={arrayValue:{values:K}}}else M=UO(p,i,T)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||jO(T,b),M=RO(c,"where",T,"in"===b||"not-in"===b);const H=Qr.create(_,b,M);return function(K,te){if(te.dt()){const Ue=vv(K);if(null!==Ue&&!Ue.isEqual(te.field))throw new Le(me.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ue.toString()}' and '${te.field.toString()}'`);const gt=_v(K);null!==gt&&$O(0,te.field,gt)}const Me=function(Ue,gt){for(const Nt of Ue.filters)if(gt.indexOf(Nt.op)>=0)return Nt.op;return null}(K,function(Ue){switch(Ue){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(te.op));if(null!==Me)throw new Le(me.INVALID_ARGUMENT,Me===te.op?`Invalid query. You cannot use more than one '${te.op.toString()}' filter.`:`Invalid query. You cannot use '${te.op.toString()}' filters with '${Me.toString()}' filters.`)}(i,H),H}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Pi(e.firestore,e.converter,function(i,u){const c=i.filters.concat([u]);return new $a(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class eL extends zv{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Le(me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Le(me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Af(i,u);return function(p,_){if(null===_v(p)){const b=vv(p);null!==b&&$O(0,b,_.field)}}(r,c),c}(e._query,this.ma,this.pa);return new Pi(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new $a(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class FO extends zv{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Pi(e.firestore,e.converter,wv(e._query,this.Ia,this.Ta))}}class LO extends zv{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=BO(e,this.type,this.Ea,this.Aa);return new Pi(e.firestore,e.converter,(i=t,new $a((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class VO extends zv{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=BO(e,this.type,this.Ea,this.Aa);return new Pi(e.firestore,e.converter,(i=t,new $a((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function BO(n,e,t,r){if(t[0]=(0,rn.m9)(t[0]),t[0]instanceof Hv)return function(i,u,c,p,_){if(!p)throw new Le(me.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const T of Mf(i))if(T.field.isKeyField())b.push(Ad(u,p.key));else{const M=p.data.field(T.field);if(tm(M))throw new Le(me.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const H=T.field.canonicalString();throw new Le(me.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${H}' (used as the orderBy) does not exist.`)}b.push(M)}return new zo(b,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=jf(n.firestore);return function(u,c,p,_,b,T){const M=u.explicitOrderBy;if(b.length>M.length)throw new Le(me.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const H=[];for(let K=0;K<b.length;K++){const te=b[K];if(M[K].field.isKeyField()){if("string"!=typeof te)throw new Le(me.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof te}`);if(!L0(u)&&-1!==te.indexOf("/"))throw new Le(me.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${te}' contains a slash.`);const Me=u.path.child(an.fromString(te));if(!Ye.isDocumentKey(Me))throw new Le(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${Me}' is not because it contains an odd number of segments.`);const Ue=new Ye(Me);H.push(Ad(c,Ue))}else{const Me=RO(p,_,te);H.push(Me)}}return new zo(H,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function UO(n,e,t){if("string"==typeof(t=(0,rn.m9)(t))){if(""===t)throw new Le(me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!L0(e)&&-1!==t.indexOf("/"))throw new Le(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(an.fromString(t));if(!Ye.isDocumentKey(r))throw new Le(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ad(n,new Ye(r))}if(t instanceof rr)return Ad(n,t._key);throw new Le(me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sC(t)}.`)}function jO(n,e){if(!Array.isArray(n)||0===n.length)throw new Le(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Le(me.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function $O(n,e,t){if(!t.isEqual(e))throw new Le(me.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class TA{convertValue(e,t="none"){switch(Ul(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ct()}}convertObject(e,t){const r={};return Bl(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new cC(nr(e.latitude),nr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=lv(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Dd(e));default:return null}}convertTimestamp(e){const t=$o(e);return new On(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=an.fromString(e);kt(XM(r));const i=new Ys(r.get(1),r.get(3)),u=new Ye(r.popFirst(5));return i.isEqual(t)||lr(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function mC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class uL extends TA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rr(this.firestore,null,t)}}class Hf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gl extends Hv{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Gv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(gC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Gv extends Gl{data(e={}){return super.data(e)}}class Nd{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Hf(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Gv(this._firestore,this._userDataWriter,r.key,r,new Hf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Le(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new Gv(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Hf(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const p=new Gv(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Hf(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,b=-1;return 0!==c.type&&(_=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),b=u.indexOf(c.doc.key)),{type:lL(c.type),doc:p,oldIndex:_,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function lL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ct()}}function HO(n,e){return n instanceof Gl&&e instanceof Gl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Nd&&e instanceof Nd&&n._firestore===e._firestore&&hA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Fd extends TA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rr(this.firestore,null,t)}}function zO(n,e,t){n=sn(n,rr);const r=sn(n.firestore,ir),i=mC(n.converter,e,t);return Mm(r,[hC(jf(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Ge.none())])}function GO(n,e,t,...r){n=sn(n,rr);const i=sn(n.firestore,ir),u=jf(i);let c;return c="string"==typeof(e=(0,rn.m9)(e))||e instanceof zl?IA(u,"updateDoc",n._key,e,t,r):CA(u,"updateDoc",n._key,e),Mm(i,[c.toMutation(n._key,Ge.exists(!0))])}function WO(n,...e){var t,r,i;n=(0,rn.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||EA(e[c])||(u=e[c],c++);const p={includeMetadataChanges:u.includeMetadataChanges};if(EA(e[c])){const M=e[c];e[c]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[c+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[c+2]=null===(i=M.complete)||void 0===i?void 0:i.bind(M)}let _,b,T;if(n instanceof rr)b=sn(n.firestore,ir),T=xf(n._key.path),_={next:M=>{e[c]&&e[c](AA(b,n,M))},error:e[c+1],complete:e[c+2]};else{const M=sn(n,Pi);b=sn(M.firestore,ir),T=M._query;const H=new Fd(b);_={next:K=>{e[c]&&e[c](new Nd(b,H,M,K))},error:e[c+1],complete:e[c+2]},NO(n._query)}return function(M,H,K,te){const Me=new aC(te),Ue=new VT(H,Me,K);return M.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return kT(yield xm(M),Ue)})),()=>{Me.bc(),M.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return NT(yield xm(M),Ue)}))}}(Sr(b),T,p,_)}function Mm(n,e){return function(t,r){const i=new cr;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function tF(n,e,t){return HT.apply(this,arguments)}(yield vA(t),r,i)})),i.promise}(Sr(n),e)}function AA(n,e,t){const r=t.docs.get(e._key),i=new Fd(n);return new Gl(n,i,e._key,r,new Hf(t.hasPendingWrites,t.fromCache),e.converter)}const vL={maxAttempts:5};class qO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=jf(e)}set(e,t,r){this._verifyNotCommitted();const i=Ld(e,this._firestore),u=mC(i.converter,t,r),c=hC(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Ge.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=Ld(e,this._firestore);let c;return c="string"==typeof(t=(0,rn.m9)(t))||t instanceof zl?IA(this._dataReader,"WriteBatch.update",u._key,t,r,i):CA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Ge.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ld(e,this._firestore);return this._mutations=this._mutations.concat(new Vu(t._key,Ge.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Le(me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ld(n,e){if((n=(0,rn.m9)(n)).firestore!==e)throw new Le(me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class wL extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=jf(e)}get(e){const t=Ld(e,this._firestore),r=new uL(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ct();const u=i[0];if(u.isFoundDocument())return new Hv(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Hv(this._firestore,r,t._key,null,t.converter);throw ct()})}set(e,t,r){const i=Ld(e,this._firestore),u=mC(i.converter,t,r),c=hC(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=Ld(e,this._firestore);let c;return c="string"==typeof(t=(0,rn.m9)(t))||t instanceof zl?IA(this._dataReader,"Transaction.update",u._key,t,r,i):CA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=Ld(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ld(e,this._firestore),r=new Fd(this._firestore);return super.get(e).then(i=>new Gl(this._firestore,r,t._key,i._document,new Hf(!1,!1),t.converter))}}!function(n,e=!0){Ll=Ws.SDK_VERSION,(0,Ws._registerComponent)(new rg.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const u=t.getProvider("app").getImmediate(),c=new ir(new g0(t.getProvider("auth-internal")),new y0(t.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Le(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ys(p.options.projectId,_)}(u,r),u);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,Ws.registerVersion)(sv,"3.7.0",n),(0,Ws.registerVersion)(sv,"3.7.0","esm2017")}();class xA{constructor(e){return e}}const KO="firestore",MA=new h.OlP("angularfire2.firestore-instances");function xL(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new xA(r)}}const ML={provide:class TL{constructor(){return(0,hn.vb)(KO)}},deps:[[new h.FiY,MA]]},RL={provide:xA,useFactory:function AL(n,e){const t=(0,hn.JM)(KO,n,e);return t&&new xA(t)},deps:[[new h.FiY,MA],Iu]};let OL=(()=>{class n{constructor(){(0,Ma.KN)("angularfire",hn.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[RL,ML]}),n})();function kL(n,...e){return{ngModule:OL,providers:[{provide:MA,useFactory:xL(n),multi:!0,deps:[h.R0b,h.zs3,hn.HU,Gs,[new h.FiY,rd],[new h.FiY,nd],...e]}]}}const PL=(0,hn.u3)(NF,!0);var Xs=F(2011),yC=F(5363),NL=F(6063);class FL extends gn.x{constructor(e=1/0,t=1/0,r=NL.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let p=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)p=_;p&&r.splice(0,p+1)}}}var LL=F(3099);function YO(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,LL.B)({connector:()=>new FL(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function QO(n,e){return(0,tr.m)(e)?Or(()=>n,e):Or(()=>n)}var RA=F(9468);F(127);const XO=new h.OlP("angularfire2.auth.use-emulator"),JO=new h.OlP("angularfire2.auth.settings"),ek=new h.OlP("angularfire2.auth.tenant-id"),tk=new h.OlP("angularfire2.auth.langugage-code"),nk=new h.OlP("angularfire2.auth.use-device-language"),rk=new h.OlP("angularfire.auth.persistence"),ik=(n,e,t,r,i,u,c,p)=>(0,Xs.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,u&&_.useDeviceLanguage(),c)for(const[b,T]of Object.entries(c))_.settings[b]=T;return p&&_.setPersistence(p),_},[t,r,i,u,c,p]);let OA=(()=>{class n{constructor(t,r,i,u,c,p,_,b,T,M,H,K){const te=new gn.x,Me=ot(void 0).pipe((0,yC.Q)(c.outsideAngular),Or(()=>u.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,5881)))),(0,pt.U)(()=>(0,Xs.on)(t,u,r)),(0,pt.U)(Ue=>ik(Ue,u,p,b,T,M,_,H)),YO({bufferSize:1,refCount:!1}));if(oo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ot(null);else{Me.pipe(yu()).subscribe();const gt=Me.pipe(Or(jt=>jt.getRedirectResult().then(Ht=>Ht,()=>null)),hn.iC,YO({bufferSize:1,refCount:!1})),Nt=Me.pipe(Or(jt=>new Er.y(Ht=>({unsubscribe:u.runOutsideAngular(()=>jt.onAuthStateChanged(Xt=>Ht.next(Xt),Xt=>Ht.error(Xt),()=>Ht.complete()))})))),Ut=Me.pipe(Or(jt=>new Er.y(Ht=>({unsubscribe:u.runOutsideAngular(()=>jt.onIdTokenChanged(Xt=>Ht.next(Xt),Xt=>Ht.error(Xt),()=>Ht.complete()))}))));this.authState=gt.pipe(QO(Nt),(0,RA.R)(c.outsideAngular),(0,yC.Q)(c.insideAngular)),this.user=gt.pipe(QO(Ut),(0,RA.R)(c.outsideAngular),(0,yC.Q)(c.insideAngular)),this.idToken=this.user.pipe(Or(jt=>jt?(0,Dn.D)(jt.getIdToken()):ot(null))),this.idTokenResult=this.user.pipe(Or(jt=>jt?(0,Dn.D)(jt.getIdTokenResult()):ot(null))),this.credential=(0,bc.T)(gt,te,this.authState.pipe(Wn(jt=>!jt))).pipe((0,pt.U)(jt=>jt?.user?jt:null),(0,RA.R)(c.outsideAngular),(0,yC.Q)(c.insideAngular))}return(0,Xs.pX)(this,Me,u,{spy:{apply:(Ue,gt,Nt)=>{(Ue.startsWith("signIn")||Ue.startsWith("createUser"))&&Nt.then(Ut=>te.next(Ut))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Xs.Dh),h.LFG(Xs.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(hn.HU),h.LFG(XO,8),h.LFG(JO,8),h.LFG(ek,8),h.LFG(tk,8),h.LFG(nk,8),h.LFG(rk,8),h.LFG(nd,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();class BL{constructor(e){this.id=e.id||"",this.firstName=e.firstName||"",this.lastName=e.lastName||"",this.position=e.position||"",this.departament=e.departament||"",this.phoneNumber=e.phoneNumber||111111111,this.emailAddress=e.emailAddress||"",this.manager=e.manager||"",this.score=e.score||0,this.organization=e.organization}}function kA(){return(0,ht.e)((n,e)=>{let t,r=!1;n.subscribe((0,Qe.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function sk(n,e=Da.y){return n=n??UL,(0,ht.e)((t,r)=>{let i,u=!0;t.subscribe((0,Qe.x)(r,c=>{const p=e(c);(u||!n(i,p))&&(u=!1,i=p,r.next(c))}))})}function UL(n,e){return n===e}F(5881);var jL=F(3942);function PA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Le("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function ok(){if(typeof Uint8Array>"u")throw new Le("unimplemented","Uint8Arrays are not available in this environment.")}function ak(){if(!function RS(){return typeof atob<"u"}())throw new Le("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Wv{constructor(e){this._delegate=e}static fromBase64String(e){return ak(),new Wv(Hu.fromBase64String(e))}static fromUint8Array(e){return ok(),new Wv(Hu.fromUint8Array(e))}toBase64(){return ak(),this._delegate.toBase64()}toUint8Array(){return ok(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function NA(n){return function zL(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class GL{enableIndexedDbPersistence(e,t){return function FF(n,e){TO(n=sn(n,ir));const t=Sr(n),r=n._freezeSettings(),i=new cA;return SO(t,i,new uO(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function LF(n){TO(n=sn(n,ir));const e=Sr(n),t=n._freezeSettings(),r=new cA;return SO(e,r,new yF(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function VF(n){if(n._initialized&&!n._terminated)throw new Le(me.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new cr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(r){if(!ws.C())return Promise.resolve();const i=r+"main";yield ws.delete(i)}),function(r){return t.apply(this,arguments)})(rT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class uk{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ys||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&bd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){gO(this._delegate,e,t,r)}enableNetwork(){return function UF(n){return function DF(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield EO(n),t=yield _A(n);return e.setNetworkEnabled(!0),function(r){const i=et(r);return i.wu.delete(0),Bv(i)}(t)}))}(Sr(n=sn(n,ir)))}(this._delegate)}disableNetwork(){return function jF(n){return function SF(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield EO(n),t=yield _A(n);return e.setNetworkEnabled(!1),(r=(0,Ee.Z)(function*(i){const u=et(i);u.wu.add(0),yield bm(u),u.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Sr(n=sn(n,ir)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,lO("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function BF(n){return function(e){const t=new cr;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function sF(n,e){return ZT.apply(this,arguments)}(yield vA(e),t)})),t.promise}(Sr(n=sn(n,ir)))}(this._delegate)}onSnapshotsInSync(e){return function _L(n,e){return function xF(n,e){const t=new aC(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield xm(n),i=t,et(r).bu.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield xm(n),i=t,void et(r).bu.delete(i);var r,i}))}}(Sr(n=sn(n,ir)),EA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Le("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Rm(this,mO(this._delegate,e))}catch(t){throw ts(t,"collection()","Firestore.collection()")}}doc(e){try{return new Go(this,oC(this._delegate,e))}catch(t){throw ts(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ns(this,function _F(n,e){if(n=sn(n,jv),dA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Le(me.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Pi(n,null,(t=e,new $a(an.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ts(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function EL(n,e,t){n=sn(n,ir);const r=Object.assign(Object.assign({},vL),t);return function(i){if(i.maxAttempts<1)throw new Le(me.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,u,c){const p=new cr;return i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const _=yield function bO(n){return uC(n).then(e=>e.datastore)}(i);new CF(i.asyncQueue,_,c,u,p).run()})),p.promise}(Sr(n),i=>e(new wL(n,i)),r)}(this._delegate,t=>e(new lk(this,t)))}batch(){return Sr(this._delegate),new ck(new qO(this._delegate,e=>Mm(this._delegate,e)))}loadBundle(e){return function $F(n,e){const t=Sr(n=sn(n,ir)),r=new kF;return function MF(n,e,t,r){const i=function(u,c){let p;return p="string"==typeof u?(new TextEncoder).encode(u):u,_=function(_,b){if(_ instanceof Uint8Array)return _O(_,b);if(_ instanceof ArrayBuffer)return _O(new Uint8Array(_),b);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new vF(_,c);var _}(t,Vv(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function mF(n,e,t){const r=et(n);var i;(i=(0,Ee.Z)(function*(u,c,p){try{const _=yield c.getMetadata();if(yield function(H,K){const te=et(H),Me=fi(K.createTime);return te.persistence.runTransaction("hasNewerBundle","readonly",Ue=>te.Ns.getBundleMetadata(Ue,K.id)).then(Ue=>!!Ue&&Ue.createTime.compareTo(Me)>=0)}(u.localStore,_))return yield c.close(),p._completeWith({taskState:"Success",documentsLoaded:(H=_).totalDocuments,bytesLoaded:H.totalBytes,totalDocuments:H.totalDocuments,totalBytes:H.totalBytes}),Promise.resolve(new Set);p._updateProgress(XR(_));const b=new K1(_,u.localStore,c.It);let T=yield c.mc();for(;T;){const H=yield b.Fu(T);H&&p._updateProgress(H),T=yield c.mc()}const M=yield b.complete();return yield Hl(u,M.Lu,void 0),yield function(H,K){const te=et(H);return te.persistence.runTransaction("Save bundle","readwrite",Me=>te.Ns.saveBundleMetadata(Me,K))}(u.localStore,_),p._completeWith(M.progress),Promise.resolve(M.Bu)}catch(_){return bd("SyncEngine",`Loading bundle failed with ${_}`),p._failWith(_),Promise.resolve(new Set)}var H}),function(u,c,p){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield vA(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function HF(n,e){return function RF(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,r){const i=et(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.Ns.getNamedQuery(u,r))}(yield lC(n),e)}))}(Sr(n=sn(n,ir)),e).then(t=>t?new Pi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ns(this,t):null)}}class _C extends TA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wv(new Hu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Go.forKey(t,this.firestore,null)}}class lk{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new _C(e)}get(e){const t=Gf(e);return this._delegate.get(t).then(r=>new qv(this._firestore,new Gl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Gf(e);return r?(PA("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Gf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Gf(e);return this._delegate.delete(t),this}}class ck{constructor(e){this._delegate=e}set(e,t,r){const i=Gf(e);return r?(PA("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Gf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Gf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class zf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Gv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Zv(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=zf.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new zf(e,new _C(e),t),i.set(t,u)),u}}zf.INSTANCES=new WeakMap;class Go{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new _C(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Le("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Go(t,new rr(t._delegate,r,new Ye(e)))}static forKey(e,t,r){return new Go(t,new rr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Rm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Rm(this.firestore,mO(this._delegate,e))}catch(t){throw ts(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,rn.m9)(e))instanceof rr&&yO(this._delegate,e)}set(e,t){t=PA("DocumentReference.set",t);try{return t?zO(this._delegate,e,t):zO(this._delegate,e)}catch(r){throw ts(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?GO(this._delegate,e):GO(this._delegate,e,t,...r)}catch(i){throw ts(i,"updateDoc()","DocumentReference.update()")}}delete(){return function mL(n){return Mm(sn(n.firestore,ir),[new Vu(n._key,Ge.none())])}(this._delegate)}onSnapshot(...e){const t=dk(e),r=hk(e,i=>new qv(this.firestore,new Gl(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return WO(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function dL(n){n=sn(n,rr);const e=sn(n.firestore,ir),t=Sr(e),r=new Fd(e);return function TF(n,e){const t=new cr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,u,c){try{const p=yield function(_,b){const T=et(_);return T.persistence.runTransaction("read document","readonly",M=>T.localDocuments.getDocument(M,b))}(i,u);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new Le(me.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const _=Dm(p,`Failed to get document '${u} from cache`);c.reject(_)}}),function(i,u,c){return r.apply(this,arguments)})(yield lC(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Gl(e,r,n._key,i,new Hf(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function hL(n){n=sn(n,rr);const e=sn(n.firestore,ir);return CO(Sr(e),n._key,{source:"server"}).then(t=>AA(e,n,t))}(this._delegate):function cL(n){n=sn(n,rr);const e=sn(n.firestore,ir);return CO(Sr(e),n._key).then(t=>AA(e,n,t))}(this._delegate),t.then(r=>new qv(this.firestore,new Gl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Go(this.firestore,this._delegate.withConverter(e?zf.getInstance(this.firestore,e):null))}}function ts(n,e,t){return n.message=n.message.replace(e,t),n}function dk(n){for(const e of n)if("object"==typeof e&&!NA(e))return e;return{}}function hk(n,e){var t,r;let i;return i=NA(n[0])?n[0]:NA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class qv{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Go(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return HO(this._delegate,e._delegate)}}class Zv extends qv{data(e){const t=this._delegate.data(e);return function DM(n,e){n||ct()}(void 0!==t),t}}class ns{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new _C(e)}where(e,t,r){try{return new ns(this.firestore,Pd(this._delegate,function JF(n,e,t){const r=e,i=gC("where",n);return new XF(i,r,t)}(e,t,r)))}catch(i){throw ts(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ns(this.firestore,Pd(this._delegate,function tL(n,e="asc"){const t=e,r=gC("orderBy",n);return new eL(r,t)}(e,t)))}catch(r){throw ts(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ns(this.firestore,Pd(this._delegate,function nL(n){return hO("limit",n),new FO("limit",n,"F")}(e)))}catch(t){throw ts(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ns(this.firestore,Pd(this._delegate,function rL(n){return hO("limitToLast",n),new FO("limitToLast",n,"L")}(e)))}catch(t){throw ts(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ns(this.firestore,Pd(this._delegate,function iL(...n){return new LO("startAt",n,!0)}(...e)))}catch(t){throw ts(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ns(this.firestore,Pd(this._delegate,function sL(...n){return new LO("startAfter",n,!1)}(...e)))}catch(t){throw ts(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ns(this.firestore,Pd(this._delegate,function oL(...n){return new VO("endBefore",n,!1)}(...e)))}catch(t){throw ts(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ns(this.firestore,Pd(this._delegate,function aL(...n){return new VO("endAt",n,!0)}(...e)))}catch(t){throw ts(t,"endAt()","Query.endAt()")}}isEqual(e){return hA(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function pL(n){n=sn(n,Pi);const e=sn(n.firestore,ir),t=Sr(e),r=new Fd(e);return function AF(n,e){const t=new cr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,u,c){try{const p=yield J0(i,u,!0),_=new tO(u,p.Hi),b=_.Wu(p.documents),T=_.applyChanges(b,!1);c.resolve(T.snapshot)}catch(p){const _=Dm(p,`Failed to execute query '${u} against cache`);c.reject(_)}}),function(i,u,c){return r.apply(this,arguments)})(yield lC(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Nd(e,r,n,i))}(this._delegate):"server"===e?.source?function gL(n){n=sn(n,Pi);const e=sn(n.firestore,ir),t=Sr(e),r=new Fd(e);return IO(t,n._query,{source:"server"}).then(i=>new Nd(e,r,n,i))}(this._delegate):function fL(n){n=sn(n,Pi);const e=sn(n.firestore,ir),t=Sr(e),r=new Fd(e);return NO(n._query),IO(t,n._query).then(i=>new Nd(e,r,n,i))}(this._delegate),t.then(r=>new FA(this.firestore,new Nd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=dk(e),r=hk(e,i=>new FA(this.firestore,new Nd(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return WO(this._delegate,t,r)}withConverter(e){return new ns(this.firestore,this._delegate.withConverter(e?zf.getInstance(this.firestore,e):null))}}class qL{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Zv(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class FA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ns(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Zv(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new qL(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Zv(this._firestore,r))})}isEqual(e){return HO(this._delegate,e._delegate)}}class Rm extends ns{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Go(this.firestore,e):null}doc(e){try{return new Go(this.firestore,void 0===e?oC(this._delegate):oC(this._delegate,e))}catch(t){throw ts(t,"doc()","CollectionReference.doc()")}}add(e){return function yL(n,e){const t=sn(n.firestore,ir),r=oC(n),i=mC(n.converter,e);return Mm(t,[hC(jf(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Ge.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Go(this.firestore,t))}isEqual(e){return yO(this._delegate,e._delegate)}withConverter(e){return new Rm(this.firestore,this._delegate.withConverter(e?zf.getInstance(this.firestore,e):null))}}function Gf(n){return sn(n,rr)}class LA{constructor(...e){this._delegate=new zl(...e)}static documentId(){return new LA(dr.keyField().canonicalString())}isEqual(e){return(e=(0,rn.m9)(e))instanceof zl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Wf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function CL(){return new bA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Wf(e)}static delete(){const e=function bL(){return new $v("deleteField")}();return e._methodName="FieldValue.delete",new Wf(e)}static arrayUnion(...e){const t=function IL(...n){return new qF("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Wf(t)}static arrayRemove(...e){const t=function DL(...n){return new ZF("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Wf(t)}static increment(e){const t=function SL(n){return new KF("increment",n)}(e);return t._methodName="FieldValue.increment",new Wf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const ZL={Firestore:uk,GeoPoint:cC,Timestamp:On,Blob:Wv,Transaction:lk,WriteBatch:ck,DocumentReference:Go,DocumentSnapshot:qv,Query:ns,QueryDocumentSnapshot:Zv,QuerySnapshot:FA,CollectionReference:Rm,FieldPath:LA,FieldValue:Wf,setLogLevel:function WL(n){!function DS(n){La.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function fk(n,e){return function QL(n,e=Mt.z){return new Er.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function VA(n,e){return fk(n,e).pipe((0,pt.U)(t=>({payload:t,type:"query"})))}function vC(n,e){return VA(n,e).pipe(mu(void 0),kA(),(0,pt.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const _=i.find(T=>T.doc.ref.isEqual(c.ref)),b=t?.payload.docs.find(T=>T.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),u}))}function pk(n,e,t){return vC(n,t).pipe(mh((r,i)=>function JL(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function eV(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return BA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return BA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return BA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),sk(),(0,pt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function BA(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function gk(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function YL(n){(function KL(n,e){n.INTERNAL.registerComponent(new rg.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},ZL)))})(n,(e,t)=>new uk(e,t,new GL)),n.registerVersion("@firebase/firestore-compat","0.2.0")}(jL.Z);class mk{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=vC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,pt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(mu(void 0),kA(),Wn(([r,i])=>i.length>0||!r),(0,pt.U)(([r,i])=>i),hn.iC)}auditTrail(e){return this.stateChanges(e).pipe(mh((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=gk(e);return pk(this.query,t,this.afs.schedulers.outsideAngular).pipe(hn.iC)}valueChanges(e={}){return VA(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),hn.iC)}get(e){return(0,Dn.D)(this.query.get(e)).pipe(hn.iC)}add(e){return this.ref.add(e)}doc(e){return new yk(this.ref.doc(e),this.afs)}}class yk{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=_k(r,t);return new mk(i,u,this.afs)}snapshotChanges(){return function XL(n,e){return fk(n,e).pipe(mu(void 0),kA(),(0,pt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(hn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,pt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Dn.D)(this.ref.get(e)).pipe(hn.iC)}}class tV{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?vC(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Wn(t=>t.length>0),hn.iC):vC(this.query,this.afs.schedulers.outsideAngular).pipe(hn.iC)}auditTrail(e){return this.stateChanges(e).pipe(mh((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=gk(e);return pk(this.query,t,this.afs.schedulers.outsideAngular).pipe(hn.iC)}valueChanges(e={}){return VA(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),hn.iC)}get(e){return(0,Dn.D)(this.query.get(e)).pipe(hn.iC)}}const nV=new h.OlP("angularfire2.enableFirestorePersistence"),rV=new h.OlP("angularfire2.firestore.persistenceSettings"),iV=new h.OlP("angularfire2.firestore.settings"),sV=new h.OlP("angularfire2.firestore.use-emulator");function _k(n,e=(t=>t)){return{query:e(n),ref:n}}let oV=(()=>{class n{constructor(t,r,i,u,c,p,_,b,T,M,H,K,te,Me,Ue,gt,Nt){this.schedulers=_;const Ut=(0,Xs.on)(t,p,r),jt=T;M&&ik(Ut,p,H,te,Me,Ue,K,gt),[this.firestore,this.persistenceEnabled$]=(0,Xs.cc)(`${Ut.name}.firestore`,"AngularFirestore",Ut.name,()=>{const Ht=p.runOutsideAngular(()=>Ut.firestore());if(u&&Ht.settings(u),jt&&Ht.useEmulator(...jt),i&&!oo(c)){const Xt=()=>{try{return(0,Dn.D)(Ht.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(Xr){return typeof console<"u"&&console.warn(Xr),ot(!1)}};return[Ht,p.runOutsideAngular(Xt)]}return[Ht,ot(!1)]},[u,jt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=_k(i,r),p=this.schedulers.ngZone.run(()=>u);return new mk(p,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new tV(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new yk(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Xs.Dh),h.LFG(Xs.xv,8),h.LFG(nV,8),h.LFG(iV,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(hn.HU),h.LFG(rV,8),h.LFG(sV,8),h.LFG(OA,8),h.LFG(XO,8),h.LFG(JO,8),h.LFG(ek,8),h.LFG(tk,8),h.LFG(nk,8),h.LFG(rk,8),h.LFG(nd,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),vk=(()=>{class n{constructor(t){this.angularFirestore=t,this.searchWord=new or(""),this.orgId=sessionStorage.getItem("orgid")||null,this.userCollection=this.angularFirestore.collection("Users",r=>r),this.user$=this.angularFirestore.collection("Users",r=>r.where("organization","==",this.orgId)).snapshotChanges().pipe((0,pt.U)(r=>r.map(i=>new BL({...i.payload.doc.data(),id:i.payload.doc.id})))),this.users$=gu([this.user$,this.searchWord]).pipe((0,pt.U)(([r,i])=>r.filter(u=>u.firstName.toLocaleLowerCase().includes(i.toLocaleLowerCase())||u.lastName.toLocaleLowerCase().includes(i.toLocaleLowerCase())||(u.firstName+" "+u.lastName).toLocaleLowerCase().includes(i.toLocaleLowerCase()))))}addUser(t){var r=this;return(0,Ee.Z)(function*(){let i;return yield r.userCollection.add(t).then(u=>i=u.id),i})()}setSearchWord(t){this.searchWord.next(t)}editUser(t){this.angularFirestore.collection("Users").doc(t.id).update(t)}deleteTask(t){this.angularFirestore.collection("Users").doc(t).delete()}updateScore(t,r){this.angularFirestore.collection("Users").doc(t).update({score:r})}setOrganization(t,r){this.angularFirestore.collection("Users").doc(t).update({organization:r})}getUser(t){return this.angularFirestore.collection("Users").doc(t).valueChanges()}getUserRole(t){return this.angularFirestore.collection("Users").doc(t).valueChanges().pipe((0,pt.U)(r=>r.position))}findUserByEmail(t){return this.angularFirestore.collection("Users",r=>r.where("emailAddress","==",t)).valueChanges()}createUser(t){this.userCollection.doc(t.user.uid).set({emailAddress:t.user.email,id:"",firstName:"",lastName:"",phoneNumber:0,position:"",departament:"",manager:"",score:0,organization:""})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oV))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Kv=(()=>{class n{constructor(t,r,i){this.fireauth=t,this.router=r,this.userService=i,this.isLoggedIn=!1,this.userData=new or(null),null!==sessionStorage.getItem("user")?(this.isLoggedIn=!0,this.router.navigate(["chatbot"])):this.isLoggedIn=!1,this.fireauth.authState.subscribe(u=>{u?(this.userData.next(u),sessionStorage.setItem("userDetails",JSON.stringify(this.userData.value)),JSON.parse(sessionStorage.getItem("userDetails"))):(sessionStorage.setItem("userDetails","null"),JSON.parse(sessionStorage.getItem("userDetails")))})}login(t,r){var i=this;this.fireauth.signInWithEmailAndPassword(t,r).then(function(){var u=(0,Ee.Z)(function*(c){sessionStorage.setItem("user",JSON.stringify(c.user)),i.isLoggedIn=!0,i.router.navigateByUrl("/chatbot")});return function(c){return u.apply(this,arguments)}}()).catch(u=>{alert(u.message),this.router.navigate(["/login"])})}register(t,r){this.fireauth.createUserWithEmailAndPassword(t,r).then(i=>{this.userService.createUser(i),alert("Sucsessful !"),this.router.navigate(["login"])}).catch(i=>{alert(i.message),this.router.navigate(["/login"])})}logout(){this.fireauth.signOut().then(()=>{sessionStorage.removeItem("user"),this.isLoggedIn=!1,this.router.navigate(["/auth/login"])},t=>{alert(t.message)})}forgotPassword(t){this.fireauth.sendPasswordResetEmail(t).then(()=>{this.router.navigate(["auth/login"])},r=>{alert(r.message)})}googleSignIn(){return this.fireauth.signInWithPopup(new __.Q).then(t=>{sessionStorage.setItem("user",JSON.stringify(t.user)),this.isLoggedIn=!0,this.userService.getUser(t.user?.uid).subscribe(r=>{null==r&&this.userService.createUser(t)}),this.router.navigateByUrl("/chatbot")},t=>{alert(t.message)})}isAuthenticated(){return this.isLoggedIn}getUser(){return this.userData}setDetails(t){return St(this.userData.value,t).then(()=>{}).catch(r=>{console.log(r)})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(OA),h.LFG(ar),h.LFG(vk))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wk=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),qf=(()=>{class n extends wk{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const zu=new h.OlP("NgValueAccessor"),lV={provide:zu,useExisting:(0,h.Gpc)(()=>Yv),multi:!0},dV=new h.OlP("CompositionEventMode");let Yv=(()=>{class n extends wk{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function cV(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(dV,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([lV]),h.qOj]}),n})();function Vd(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function bk(n){return null!=n&&"number"==typeof n.length}const Ni=new h.OlP("NgValidators"),Bd=new h.OlP("NgAsyncValidators"),fV=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class wC{static min(e){return function Ck(n){return e=>{if(Vd(e.value)||Vd(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Ik(n){return e=>{if(Vd(e.value)||Vd(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return Dk(e)}static requiredTrue(e){return function Sk(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Tk(n){return Vd(n.value)||fV.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Ak(n){return e=>Vd(e.value)||!bk(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function xk(n){return e=>bk(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Mk(n){if(!n)return EC;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Vd(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Fk(e)}static composeAsync(e){return Lk(e)}}function Dk(n){return Vd(n.value)?{required:!0}:null}function EC(n){return null}function Rk(n){return null!=n}function Ok(n){return(0,h.QGY)(n)?(0,Dn.D)(n):n}function kk(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Pk(n,e){return e.map(t=>t(n))}function Nk(n){return n.map(e=>function pV(n){return!n.validate}(e)?e:t=>e.validate(t))}function Fk(n){if(!n)return null;const e=n.filter(Rk);return 0==e.length?null:function(t){return kk(Pk(t,e))}}function UA(n){return null!=n?Fk(Nk(n)):null}function Lk(n){if(!n)return null;const e=n.filter(Rk);return 0==e.length?null:function(t){return function aV(...n){const e=(0,Vs.jO)(n),{args:t,keys:r}=nI(n),i=new Er.y(u=>{const{length:c}=t;if(!c)return void u.complete();const p=new Array(c);let _=c,b=c;for(let T=0;T<c;T++){let M=!1;(0,Ki.Xf)(t[T]).subscribe((0,Qe.x)(u,H=>{M||(M=!0,b--),p[T]=H},()=>_--,void 0,()=>{(!_||!M)&&(b||u.next(r?xw(r,p):p),u.complete())}))}});return e?i.pipe(Bs(e)):i}(Pk(t,e).map(Ok)).pipe((0,pt.U)(kk))}}function jA(n){return null!=n?Lk(Nk(n)):null}function Vk(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Bk(n){return n._rawValidators}function Uk(n){return n._rawAsyncValidators}function $A(n){return n?Array.isArray(n)?n:[n]:[]}function bC(n,e){return Array.isArray(n)?n.includes(e):n===e}function jk(n,e){const t=$A(e);return $A(n).forEach(i=>{bC(t,i)||t.push(i)}),t}function $k(n,e){return $A(e).filter(t=>!bC(n,t))}class Hk{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=UA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=jA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class rs extends Hk{get formDirective(){return null}get path(){return null}}class Ud extends Hk{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class zk{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let HA=(()=>{class n extends zk{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ud,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[h.qOj]}),n})(),Gk=(()=>{class n extends zk{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(rs,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[h.qOj]}),n})();const Qv="VALID",IC="INVALID",Om="PENDING",Xv="DISABLED";function qA(n){return(DC(n)?n.validators:n)||null}function qk(n){return Array.isArray(n)?UA(n):n||null}function ZA(n,e){return(DC(e)?e.asyncValidators:n)||null}function Zk(n){return Array.isArray(n)?jA(n):n||null}function DC(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Kk(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[t])throw new h.vHH(1001,"")}function Yk(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new h.vHH(1002,"")})}class SC{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=qk(this._rawValidators),this._composedAsyncValidatorFn=Zk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Qv}get invalid(){return this.status===IC}get pending(){return this.status==Om}get disabled(){return this.status===Xv}get enabled(){return this.status!==Xv}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=qk(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Zk(e)}addValidators(e){this.setValidators(jk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(jk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators($k(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators($k(e,this._rawAsyncValidators))}hasValidator(e){return bC(this._rawValidators,e)}hasAsyncValidator(e){return bC(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Om,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Xv,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Qv,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Qv||this.status===Om)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xv:Qv}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Om,this._hasOwnPendingAsyncValidator=!0;const t=Ok(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?Xv:this.errors?IC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Om)?Om:this._anyControlsHaveStatus(IC)?IC:Qv}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){DC(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class Jv extends SC{constructor(e,t,r){super(qA(t),ZA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Yk(this,0,e),Object.keys(e).forEach(r=>{Kk(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class Qk extends Jv{}function ew(n,e){KA(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function bV(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Xk(n,e)})}(n,e),function IV(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function CV(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Xk(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function EV(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function AC(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),MC(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function xC(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function KA(n,e){const t=Bk(n);null!==e.validator?n.setValidators(Vk(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Uk(n);null!==e.asyncValidator?n.setAsyncValidators(Vk(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();xC(e._rawValidators,i),xC(e._rawAsyncValidators,i)}function MC(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=Bk(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.validator);u.length!==i.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const i=Uk(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.asyncValidator);u.length!==i.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return xC(e._rawValidators,r),xC(e._rawAsyncValidators,r),t}function Xk(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function YA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function QA(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===Yv?t=u:function TV(n){return Object.getPrototypeOf(n.constructor)===qf}(u)?r=u:i=u}),i||r||t||null}function nP(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function rP(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const km=class extends SC{constructor(e=null,t,r){super(qA(t),ZA(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),DC(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=rP(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){nP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){nP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){rP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let uP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),cP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const JA=new h.OlP("NgModelWithFormControlWarning"),LV={provide:Ud,useExisting:(0,h.Gpc)(()=>ex)};let ex=(()=>{class n extends Ud{constructor(t,r,i,u){super(),this._ngModelWarningConfig=u,this.update=new h.vpe,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=QA(0,i)}set isDisabled(t){}ngOnChanges(t){if(this._isControlChanged(t)){const r=t.form.previousValue;r&&AC(r,this,!1),ew(this.form,this),this.form.updateValueAndValidity({emitEvent:!1})}YA(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&AC(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36(Ni,10),h.Y36(Bd,10),h.Y36(zu,10),h.Y36(JA,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[h._Bn([LV]),h.qOj,h.TTD]}),n})();const VV={provide:rs,useExisting:(0,h.Gpc)(()=>RC)};let RC=(()=>{class n extends rs{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(MC(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return ew(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){AC(t.control||null,t,!1),function AV(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function tP(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(AC(r||null,t),(n=>n instanceof km)(i)&&(ew(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function Jk(n,e){KA(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function DV(n,e){return MC(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){KA(this.form,this),this._oldForm&&MC(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ni,10),h.Y36(Bd,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([VV]),h.qOj,h.TTD]}),n})();const jV={provide:Ud,useExisting:(0,h.Gpc)(()=>rx)};let rx=(()=>{class n extends Ud{constructor(t,r,i,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=QA(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),YA(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function TC(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36(rs,13),h.Y36(Ni,10),h.Y36(Bd,10),h.Y36(zu,10),h.Y36(JA,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([jV]),h.qOj,h.TTD]}),n})(),Zf=(()=>{class n{constructor(){this._validator=EC}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):EC,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,features:[h.TTD]}),n})();const YV={provide:Ni,useExisting:(0,h.Gpc)(()=>OC),multi:!0};let OC=(()=>{class n extends Zf{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=h.D6c,this.createValidator=t=>Dk}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&h.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[h._Bn([YV]),h.qOj]}),n})(),DP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[cP]}),n})(),nB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[DP]}),n})(),ox=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:JA,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[DP]}),n})();class SP extends SC{constructor(e,t,r){super(qA(t),ZA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Yk(this,0,e),e.forEach((r,i)=>{Kk(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function TP(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let rB=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let u={};return TP(r)?u=r:null!==r&&(u.validators=r.validator,u.asyncValidators=r.asyncValidator),new Jv(i,u)}record(t,r=null){const i=this._reduceControls(t);return new Qk(i,r)}control(t,r,i){let u={};return this.useNonNullable?(TP(r)?u=r:(u.validators=r,u.asyncValidators=i),new km(t,{...u,nonNullable:!0})):new km(t,r,i)}array(t,r,i){const u=t.map(c=>this._createControl(c));return new SP(u,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof km||t instanceof SC?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:ox}),n})(),iB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[nB,ec]}),n})(),sB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Kv,vk],imports:[ox,ec,Xs.hO,iB]}),n})(),AP=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!!this.authService.isAuthenticated()||(this.router.navigate(["/auth/login"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Kv),h.LFG(ar))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function xP(n){return Wn((e,t)=>n<=t)}let fB=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[fB]}),n})();const MP=new Set;let Pm,mB=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):_B}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function yB(n){if(!MP.has(n))try{Pm||(Pm=document.createElement("style"),Pm.setAttribute("type","text/css"),document.head.appendChild(Pm)),Pm.sheet&&(Pm.sheet.insertRule(`@media ${n} {body{ }}`,0),MP.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(zr))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function _B(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let vB=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new gn.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return RP(Ls(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let u=gu(RP(Ls(t)).map(c=>this._registerQuery(c).observable));return u=yp(u.pipe(xo(1)),u.pipe(xP(1),function gB(n,e=Mt.z){return(0,ht.e)((t,r)=>{let i=null,u=null,c=null;const p=()=>{if(i){i.unsubscribe(),i=null;const b=u;u=null,r.next(b)}};function _(){const b=c+n,T=e.now();if(T<b)return i=this.schedule(void 0,b-T),void r.add(i);p()}t.subscribe((0,Qe.x)(r,b=>{u=b,c=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{p(),r.complete()},void 0,()=>{u=i=null}))})}(0))),u.pipe((0,pt.U)(c=>{const p={matches:!1,breakpoints:{}};return c.forEach(({matches:_,query:b})=>{p.matches=p.matches||_,p.breakpoints[b]=_}),p}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),u={observable:new Er.y(c=>{const p=_=>this._zone.run(()=>c.next(_));return r.addListener(p),()=>{r.removeListener(p)}}).pipe(mu(r),(0,pt.U)(({matches:c})=>({query:t,matches:c})),fh(this._destroySubject)),mql:r};return this._queries.set(t,u),u}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(mB),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function RP(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}let PP=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function CB(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function bB(n){try{return n.frameElement}catch{return null}}(function RB(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===FP(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),u=FP(t);return t.hasAttribute("contenteditable")?-1!==u:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function xB(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==u:"video"===i?-1!==u&&(null!==u||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function MB(n){return!function DB(n){return function TB(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function IB(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function SB(n){return function AB(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||NP(n))}(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(zr))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function NP(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function FP(n){if(!NP(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class OB{constructor(e,t,r,i,u=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,u||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return r?.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(xo(1)).subscribe(e)}}let kB=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new OB(t,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(PP),h.LFG(h.R0b),h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const FB=new h.OlP("cdk-input-modality-detector-options"),LB={ignoreKeys:[18,17,224,91,16]},Nm=To({passive:!0,capture:!0});let VB=(()=>{class n{constructor(t,r,i,u){this._platform=t,this._mostRecentTarget=null,this._modality=new or(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(p=>p===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=ds(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<650||(this._modality.next(function PB(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}(c)?"keyboard":"mouse"),this._mostRecentTarget=ds(c))},this._onTouchstart=c=>{!function NB(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(c)?(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ds(c)):this._modality.next("keyboard")},this._options={...LB,...u},this.modalityDetected=this._modality.pipe(xP(1)),this.modalityChanged=this.modalityDetected.pipe(sk()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,Nm),i.addEventListener("mousedown",this._onMousedown,Nm),i.addEventListener("touchstart",this._onTouchstart,Nm)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Nm),document.removeEventListener("mousedown",this._onMousedown,Nm),document.removeEventListener("touchstart",this._onTouchstart,Nm))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(zr),h.LFG(h.R0b),h.LFG(ue),h.LFG(FB,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const UB=new h.OlP("cdk-focus-monitor-default-options"),kC=To({passive:!0,capture:!0});let jB=(()=>{class n{constructor(t,r,i,u,c){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new gn.x,this._rootNodeFocusAndBlurListener=p=>{for(let b=ds(p);b;b=b.parentElement)"focus"===p.type?this._onFocus(p,b):this._onBlur(p,b)},this._document=u,this._detectionMode=c?.detectionMode||0}monitor(t,r=!1){const i=Ti(t);if(!this._platform.isBrowser||1!==i.nodeType)return ot(null);const u=function sh(n){if(function uw(){if(null==wc){const n=typeof document<"u"?document.head:null;wc=!(!n||!n.createShadowRoot&&!n.attachShadow)}return wc}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),c=this._elementInfo.get(i);if(c)return r&&(c.checkChildren=!0),c.subject;const p={checkChildren:r,subject:new gn.x,rootNode:u};return this._elementInfo.set(i,p),this._registerGlobalListeners(p),p.subject}stopMonitoring(t){const r=Ti(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const u=Ti(t);u===this._getDocument().activeElement?this._getClosestElementsInfo(u).forEach(([p,_])=>this._originChanged(p,r,_)):(this._setOrigin(r),"function"==typeof u.focus&&u.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),u=ds(t);!i||!i.checkChildren&&r!==u||this._originChanged(r,this._getFocusOrigin(u),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,kC),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,kC)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(fh(this._stopInputModalityDetector)).subscribe(u=>{this._setOrigin(u,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,kC),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,kC),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,u)=>{(u===t||i.checkChildren&&u.contains(t))&&r.push([u,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const u=t.labels;if(u)for(let c=0;c<u.length;c++)if(u[c].contains(r))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.R0b),h.LFG(zr),h.LFG(VB),h.LFG(ue,8),h.LFG(UB,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const VP="cdk-high-contrast-black-on-white",BP="cdk-high-contrast-white-on-black",ax="cdk-high-contrast-active";let $B=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=(0,h.f3M)(vB).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,u=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),u){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(ax,VP,BP),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(ax,VP):2===r&&t.add(ax,BP)}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(zr),h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),HB=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG($B))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[pB]}),n})();function zB(n,e){}class ux{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let GB=(()=>{class n extends ai{constructor(t,r,i,u,c,p,_,b){super(),this._elementRef=t,this._focusTrapFactory=r,this._config=u,this._interactivityChecker=c,this._ngZone=p,this._overlayRef=_,this._focusMonitor=b,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=T=>{this._portalOutlet.hasAttached();const M=this._portalOutlet.attachDomPortal(T);return this._contentAttached(),M},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=i}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),r}attachTemplatePortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let r=null;if("string"==typeof t?r=this._document.querySelector(t):"boolean"==typeof t?r=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(r=t),this._config.restoreFocus&&r&&"function"==typeof r.focus){const i=oh(),u=this._elementRef.nativeElement;(!i||i===this._document.body||i===u||u.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,r=oh();return t===r||t.contains(r)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=oh())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(kB),h.Y36(ue,8),h.Y36(ux),h.Y36(PP),h.Y36(h.R0b),h.Y36(ww),h.Y36(jB))},n.\u0275cmp=h.Xpm({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(t,r){if(1&t&&h.Gf(hh,7),2&t){let i;h.iGM(i=h.CRH())&&(r._portalOutlet=i.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,r){2&t&&h.uIk("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[h.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,r){1&t&&h.YNc(0,zB,0,0,"ng-template",0)},dependencies:[hh],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),n})();class PC{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new gn.x,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(r=>{27===r.keyCode&&!this.disableClose&&!function hB(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(e,t){if(this.containerInstance){const r=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this.overlayRef.dispose(),r.next(e),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const UP=new h.OlP("DialogScrollStrategy"),WB=new h.OlP("DialogData"),qB=new h.OlP("DefaultDialogConfig"),KB={provide:UP,deps:[ph],useFactory:function ZB(n){return()=>n.scrollStrategies.block()}};let YB=0,jP=(()=>{class n{constructor(t,r,i,u,c,p){this._overlay=t,this._injector=r,this._defaultOptions=i,this._parentDialog=u,this._overlayContainer=c,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new gn.x,this._afterOpenedAtThisLevel=new gn.x,this._ariaHiddenElements=new Map,this.afterAllClosed=ey(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(mu(void 0))),this._scrollStrategy=p}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(t,r){(r={...this._defaultOptions||new ux,...r}).id=r.id||"cdk-dialog-"+YB++,r.id&&this.getDialogById(r.id);const u=this._getOverlayConfig(r),c=this._overlay.create(u),p=new PC(c,r),_=this._attachContainer(c,p,r);return p.containerInstance=_,this._attachDialogContent(t,p,_,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(p),p.closed.subscribe(()=>this._removeOpenDialog(p,!0)),this.afterOpened.next(p),p}closeAll(){lx(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){lx(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),lx(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const r=new WC({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachContainer(t,r,i){const u=i.injector||i.viewContainerRef?.injector,c=[{provide:ux,useValue:i},{provide:PC,useValue:r},{provide:ww,useValue:t}];let p;i.container?"function"==typeof i.container?p=i.container:(p=i.container.type,c.push(...i.container.providers(i))):p=GB;const _=new Et(p,i.viewContainerRef,h.zs3.create({parent:u||this._injector,providers:c}),i.componentFactoryResolver);return t.attach(_).instance}_attachDialogContent(t,r,i,u){if(t instanceof h.Rgc){const c=this._createInjector(u,r,i,void 0);let p={$implicit:u.data,dialogRef:r};u.templateContext&&(p={...p,..."function"==typeof u.templateContext?u.templateContext():u.templateContext}),i.attachTemplatePortal(new Gt(t,null,p,c))}else{const c=this._createInjector(u,r,i,this._injector),p=i.attachComponentPortal(new Et(t,u.viewContainerRef,c,u.componentFactoryResolver));r.componentInstance=p.instance}}_createInjector(t,r,i,u){const c=t.injector||t.viewContainerRef?.injector,p=[{provide:WB,useValue:t.data},{provide:PC,useValue:r}];return t.providers&&("function"==typeof t.providers?p.push(...t.providers(r,t,i)):p.push(...t.providers)),t.direction&&(!c||!c.get(uh,null,h.XFs.Optional))&&p.push({provide:uh,useValue:{value:t.direction,change:ot()}}),h.zs3.create({parent:c||u,providers:p})}_removeOpenDialog(t,r){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((u,c)=>{u?c.setAttribute("aria-hidden",u):c.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const r=t.parentElement.children;for(let i=r.length-1;i>-1;i--){const u=r[i];u!==t&&"SCRIPT"!==u.nodeName&&"STYLE"!==u.nodeName&&!u.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(u,u.getAttribute("aria-hidden")),u.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ph),h.LFG(h.zs3),h.LFG(qB,8),h.LFG(n,12),h.LFG(Cc),h.LFG(UP))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function lx(n,e){let t=n.length;for(;t--;)e(n[t])}let QB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[jP,KB],imports:[XC,wl,HB,wl]}),n})(),XB=(()=>{class n{constructor(t){this.dialogRef=t,this.email=""}onSubmitRestPass(){this.dialogRef.close(this.email)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(PC))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-forgot-password"]],decls:0,vars:0,template:function(t,r){},styles:[".content[_ngcontent-%COMP%]{padding:32px;color:var(--text02)}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:1em;margin-top:1em}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}"]}),n})();function JB(n,e){1&n&&(h.TgZ(0,"div"),h._uU(1,"Email is required."),h.qZA())}function eU(n,e){1&n&&(h.TgZ(0,"div"),h._uU(1,"Invalid email address."),h.qZA())}function tU(n,e){if(1&n&&(h.TgZ(0,"div",16),h.YNc(1,JB,2,0,"div",17),h.YNc(2,eU,2,0,"div",17),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngIf",t.errorRequired),h.xp6(1),h.Q6J("ngIf",t.errorEmail)}}function nU(n,e){1&n&&(h.TgZ(0,"div"),h._uU(1,"Password is required."),h.qZA())}function rU(n,e){1&n&&(h.TgZ(0,"div"),h._uU(1,"Password must be at least 6 characters long. "),h.qZA())}function iU(n,e){if(1&n&&(h.TgZ(0,"div",16),h.YNc(1,nU,2,0,"div",17),h.YNc(2,rU,2,0,"div",17),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngIf",t.errorPasswordRequired),h.xp6(1),h.Q6J("ngIf",t.errorPasswordminlength)}}let $P=(()=>{class n{constructor(t,r,i,u,c){this.loginService=t,this.dialog=r,this.fb=i,this.router=u,this.route=c,this.mode="login",this.isLoggedIn=!1,this.loginForm=this.fb.group({email:["",[wC.required,wC.email]],password:["",[wC.required,wC.minLength(6)]]}),this.isLoading=!1}ngOnInit(){this.route.title.subscribe(t=>{this.mode=t})}get isEmailInvalid(){return!!this.loginForm.get("email")?.invalid}get isEmailTouchedOrDirty(){return!(!this.loginForm.get("email")?.dirty&&!this.loginForm.get("email")?.touched)}get errorRequired(){return!!this.loginForm.get("email")?.errors?.required}get errorEmail(){return!!this.loginForm.get("email")?.errors?.email}get isPasswordInvalid(){return!!this.loginForm.get("email")?.invalid}get isPasswordTouchedOrDirty(){return!(!this.loginForm.get("email")?.dirty&&!this.loginForm.get("email")?.touched)}get errorPasswordRequired(){return!!this.loginForm.get("password")?.errors?.required}get errorPasswordminlength(){return!!this.loginForm.get("password")?.errors?.minlength}get negationOfMode(){return"register"===this.mode?"login":"register"}get navButtonLabel(){return this.negationOfMode}openDialog(){this.dialog.open(XB).closed.subscribe(r=>{null!=r&&this.loginService.forgotPassword(r)})}onSubmitLogin(){if(this.isLoading)return;this.isLoading=!0;const t=this.loginForm.get("email").value,r=this.loginForm.get("password").value;"login"===this.mode?this.loginService.login(t,r):this.loginService.register(t,r),this.isLoading=!1}goToRegisterPage(){this.router.navigateByUrl(`/auth/${this.negationOfMode}`)}signInWithGoogle(){this.loginService.googleSignIn()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Kv),h.Y36(jP),h.Y36(rB),h.Y36(ar),h.Y36(Sl))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-login"]],decls:24,vars:8,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-md-6"],[1,"card","mt-5","bg-opacity-50"],[1,"card-body","text-white"],[1,"card-title","text-center","text-capitalize"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control","bg-transparent"],["class","text-danger",4,"ngIf"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password",1,"form-control","bg-transparent"],["type","submit",1,"btn","btn-primary","text-white","w-100","text-capitalize",3,"disabled"],["type","button",1,"btn","btn-secondary","w-100","mt-3","text-capitalize",3,"click"],["type","button",1,"btn","btn-danger","w-100","mt-3",3,"click"],[1,"text-danger"],[4,"ngIf"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),h._uU(6),h.qZA(),h.TgZ(7,"form",6),h.NdJ("ngSubmit",function(){return r.onSubmitLogin()}),h.TgZ(8,"div",7)(9,"label",8),h._uU(10,"Email"),h.qZA(),h._UZ(11,"input",9),h.YNc(12,tU,3,2,"div",10),h.qZA(),h.TgZ(13,"div",7)(14,"label",11),h._uU(15,"Password"),h.qZA(),h._UZ(16,"input",12),h.YNc(17,iU,3,2,"div",10),h.qZA(),h.TgZ(18,"button",13),h._uU(19),h.qZA(),h.TgZ(20,"button",14),h.NdJ("click",function(){return r.goToRegisterPage()}),h._uU(21),h.qZA(),h.TgZ(22,"button",15),h.NdJ("click",function(){return r.signInWithGoogle()}),h._uU(23),h.qZA()()()()()()()),2&t&&(h.xp6(6),h.Oqu(r.mode),h.xp6(1),h.Q6J("formGroup",r.loginForm),h.xp6(5),h.Q6J("ngIf",r.isEmailInvalid&&r.isEmailTouchedOrDirty),h.xp6(5),h.Q6J("ngIf",r.isPasswordInvalid&&r.isPasswordTouchedOrDirty),h.xp6(1),h.Q6J("disabled",r.loginForm.invalid),h.xp6(1),h.Oqu(r.mode),h.xp6(2),h.Oqu(r.navButtonLabel),h.xp6(2),h.hij("",r.mode," with Google "))},dependencies:[uP,Yv,HA,Gk,RC,rx,zn],styles:[".card[_ngcontent-%COMP%]{background:rgba(255,255,255,.1);box-shadow:0 8px 32px #bb171e33;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:10px;border:none}"]}),n})();class HP{}class zP{}class Gu{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),u=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,u),this.headers.has(u)?this.headers.get(u).push(c):this.headers.set(u,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Gu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Gu;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Gu?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const u=e.value;if(u){let c=this.headers.get(t);if(!c)return;c=c.filter(p=>-1===u.indexOf(p)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class sU{encodeKey(e){return GP(e)}encodeValue(e){return GP(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const aU=/%(\d[a-f0-9])/gi,uU={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function GP(n){return encodeURIComponent(n).replace(aU,(e,t)=>uU[t]??e)}function NC(n){return`${n}`}class Wl{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new sU,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function oU(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const u=i.indexOf("="),[c,p]=-1==u?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,u)),e.decodeValue(i.slice(u+1))],_=t.get(c)||[];_.push(p),t.set(c,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(NC):[NC(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Wl({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(NC(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(NC(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class lU{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function WP(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function qP(n){return typeof Blob<"u"&&n instanceof Blob}function ZP(n){return typeof FormData<"u"&&n instanceof FormData}class nw{constructor(e,t,r,i){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function cU(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,u=i):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new Gu),this.context||(this.context=new lU),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const p=t.indexOf("?");this.urlWithParams=t+(-1===p?"?":p<t.length-1?"&":"")+c}}else this.params=new Wl,this.urlWithParams=t}serializeBody(){return null===this.body?null:WP(this.body)||qP(this.body)||ZP(this.body)||function dU(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Wl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ZP(this.body)?null:qP(this.body)?this.body.type||null:WP(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Wl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,c=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,p=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let _=e.headers||this.headers,b=e.params||this.params;const T=e.context??this.context;return void 0!==e.setHeaders&&(_=Object.keys(e.setHeaders).reduce((M,H)=>M.set(H,e.setHeaders[H]),_)),e.setParams&&(b=Object.keys(e.setParams).reduce((M,H)=>M.set(H,e.setParams[H]),b)),new nw(t,r,u,{params:b,headers:_,context:T,reportProgress:p,responseType:i,withCredentials:c})}}var Lr=(()=>((Lr=Lr||{})[Lr.Sent=0]="Sent",Lr[Lr.UploadProgress=1]="UploadProgress",Lr[Lr.ResponseHeader=2]="ResponseHeader",Lr[Lr.DownloadProgress=3]="DownloadProgress",Lr[Lr.Response=4]="Response",Lr[Lr.User=5]="User",Lr))();class cx{constructor(e,t=200,r="OK"){this.headers=e.headers||new Gu,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class dx extends cx{constructor(e={}){super(e),this.type=Lr.ResponseHeader}clone(e={}){return new dx({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class FC extends cx{constructor(e={}){super(e),this.type=Lr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new FC({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class KP extends cx{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function hx(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let YP=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let u;if(t instanceof nw)u=t;else{let _,b;_=i.headers instanceof Gu?i.headers:new Gu(i.headers),i.params&&(b=i.params instanceof Wl?i.params:new Wl({fromObject:i.params})),u=new nw(t,r,void 0!==i.body?i.body:null,{headers:_,context:i.context,params:b,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=ot(u).pipe(Cl(_=>this.handler.handle(_)));if(t instanceof nw||"events"===i.observe)return c;const p=c.pipe(Wn(_=>_ instanceof FC));switch(i.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return p.pipe((0,pt.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return p.pipe((0,pt.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return p.pipe((0,pt.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return p.pipe((0,pt.U)(_=>_.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Wl).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,hx(i,r))}post(t,r,i={}){return this.request("POST",t,hx(i,r))}put(t,r,i={}){return this.request("PUT",t,hx(i,r))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(HP))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class QP{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const XP=new h.OlP("HTTP_INTERCEPTORS");let hU=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const fU=/^\)\]\}',?\n/;let JP=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Er.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((K,te)=>i.setRequestHeader(K,te.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const K=t.detectContentTypeHeader();null!==K&&i.setRequestHeader("Content-Type",K)}if(t.responseType){const K=t.responseType.toLowerCase();i.responseType="json"!==K?K:"text"}const u=t.serializeBody();let c=null;const p=()=>{if(null!==c)return c;const K=i.statusText||"OK",te=new Gu(i.getAllResponseHeaders()),Me=function pU(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return c=new dx({headers:te,status:i.status,statusText:K,url:Me}),c},_=()=>{let{headers:K,status:te,statusText:Me,url:Ue}=p(),gt=null;204!==te&&(gt=typeof i.response>"u"?i.responseText:i.response),0===te&&(te=gt?200:0);let Nt=te>=200&&te<300;if("json"===t.responseType&&"string"==typeof gt){const Ut=gt;gt=gt.replace(fU,"");try{gt=""!==gt?JSON.parse(gt):null}catch(jt){gt=Ut,Nt&&(Nt=!1,gt={error:jt,text:gt})}}Nt?(r.next(new FC({body:gt,headers:K,status:te,statusText:Me,url:Ue||void 0})),r.complete()):r.error(new KP({error:gt,headers:K,status:te,statusText:Me,url:Ue||void 0}))},b=K=>{const{url:te}=p(),Me=new KP({error:K,status:i.status||0,statusText:i.statusText||"Unknown Error",url:te||void 0});r.error(Me)};let T=!1;const M=K=>{T||(r.next(p()),T=!0);let te={type:Lr.DownloadProgress,loaded:K.loaded};K.lengthComputable&&(te.total=K.total),"text"===t.responseType&&!!i.responseText&&(te.partialText=i.responseText),r.next(te)},H=K=>{let te={type:Lr.UploadProgress,loaded:K.loaded};K.lengthComputable&&(te.total=K.total),r.next(te)};return i.addEventListener("load",_),i.addEventListener("error",b),i.addEventListener("timeout",b),i.addEventListener("abort",b),t.reportProgress&&(i.addEventListener("progress",M),null!==u&&i.upload&&i.upload.addEventListener("progress",H)),i.send(u),r.next({type:Lr.Sent}),()=>{i.removeEventListener("error",b),i.removeEventListener("abort",b),i.removeEventListener("load",_),i.removeEventListener("timeout",b),t.reportProgress&&(i.removeEventListener("progress",M),null!==u&&i.upload&&i.upload.removeEventListener("progress",H)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Os))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const fx=new h.OlP("XSRF_COOKIE_NAME"),px=new h.OlP("XSRF_HEADER_NAME");class eN{}let gU=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=za(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue),h.LFG(h.Lbi),h.LFG(fx))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),gx=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const u=this.tokenService.getToken();return null!==u&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,u)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(eN),h.LFG(px))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),mU=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(XP,[]);this.chain=r.reduceRight((i,u)=>new QP(i,u),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(zP),h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),yU=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:gx,useClass:hU}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:fx,useValue:t.cookieName}:[],t.headerName?{provide:px,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[gx,{provide:XP,useExisting:gx,multi:!0},{provide:eN,useClass:gU},{provide:fx,useValue:"XSRF-TOKEN"},{provide:px,useValue:"X-XSRF-TOKEN"}]}),n})(),_U=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[YP,{provide:HP,useClass:mU},JP,{provide:zP,useExisting:JP}],imports:[yU.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})(),vU=(()=>{class n{constructor(t){this.httpClient=t,this.API_PATH="https://robomatic-ai.p.rapidapi.com/api"}requestApi(t){const r=(new Wl).set("in",t).set("op","in").set("cbot","1").set("SessionID","RapidAPI1").set("cbid","1").set("key","RHMN5hnQ4wTYZBGCF3dfxzypt68rVP").set("ChatSource","RapidAPI").set("duration","1"),i=new Gu({"content-type":"application/x-www-form-urlencoded","X-RapidAPI-Key":"384c0a3f76mshc3607e387041829p1b16a3jsnd83dc21c25fc","X-RapidAPI-Host":"robomatic-ai.p.rapidapi.com"});return this.httpClient.post(this.API_PATH,r,{headers:i}).pipe(_u(this.handleError),(0,pt.U)(u=>u.out))}handleError(t){return console.error(`Name: ${t.name} \nMessage: ${t.message} \nReturned code: ${t.status} \n`),bl("Something bad happened; please try difrent query ;).")}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(YP))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const wU=["scrollContainer"];function EU(n,e){if(1&n&&(h.TgZ(0,"div",10)(1,"div",11)(2,"span"),h._uU(3),h.qZA()(),h._UZ(4,"i",12),h.qZA()),2&n){const t=h.oxw().$implicit;h.xp6(3),h.Oqu(t.mess)}}function bU(n,e){if(1&n&&(h.TgZ(0,"div",13),h._UZ(1,"i",14),h.TgZ(2,"div",11)(3,"span"),h._uU(4),h.qZA()()()),2&n){const t=h.oxw().$implicit;h.xp6(4),h.Oqu(t.mess)}}function CU(n,e){if(1&n&&(h.TgZ(0,"span"),h.YNc(1,EU,5,1,"div",9),h.YNc(2,bU,5,1,"div",4),h.qZA()),2&n){const t=e.$implicit;h.xp6(1),h.Q6J("ngIf","user"===t.sender),h.xp6(1),h.Q6J("ngIf","bot"===t.sender)}}function IU(n,e){if(1&n&&(h.ynx(0),h.YNc(1,CU,3,2,"span",8),h.BQk()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngForOf",t.conversation)}}function DU(n,e){1&n&&(h.TgZ(0,"div",13),h._UZ(1,"i",14),h.TgZ(2,"div",11)(3,"span",15),h._uU(4,"typing"),h.qZA()()())}function SU(n,e){1&n&&(h.TgZ(0,"div",16)(1,"div",17)(2,"div",18),h._UZ(3,"i",19),h.qZA(),h.TgZ(4,"h5"),h._uU(5,"Below are sample queries"),h.qZA(),h.TgZ(6,"small"),h._uU(7,"Hi how are you? "),h._UZ(8,"br"),h._uU(9,"Tell me, what city is the capital of Croatia? "),h._UZ(10,"br"),h._uU(11,"What's the weather like in Rzesz\xf3w today? "),h.qZA()(),h.TgZ(12,"div",17)(13,"div",18),h._UZ(14,"i",20),h.qZA(),h.TgZ(15,"h5"),h._uU(16,"Capabilities"),h.qZA(),h.TgZ(17,"small"),h._uU(18,"Answers simple questions"),h._UZ(19,"br"),h._uU(20," can respond to multiple requests"),h._UZ(21,"br"),h._uU(22," Remembers what user said earlier in the conversation "),h.qZA()(),h.TgZ(23,"div",17)(24,"div",18),h._UZ(25,"i",21),h.qZA(),h.TgZ(26,"h5"),h._uU(27,"Limitations"),h.qZA(),h.TgZ(28,"small"),h._uU(29,"speaks only English "),h._UZ(30,"br"),h._uU(31," sometimes it takes a moment to think ;) "),h._UZ(32,"br"),h._uU(33," Does not answer complex questions and issues "),h.qZA()()())}let tN=(()=>{class n{constructor(t,r,i){this.service=t,this.router=r,this.loginService=i,this.message=new km(""),this.conversation=[],this.loading=!1,this.number=0}ngAfterViewChecked(){this.scrollToBottom()}send(){this.message.value&&(this.conversation?.push({sender:"user",mess:this.message.value}),this.loading=!0,this.service.requestApi(this.message.value).subscribe(t=>{this.loading=!1,this.conversation?.push({sender:"bot",mess:t})}),this.number++,this.message.reset(""))}logOut(){this.loginService.logout()}scrollToBottom(){try{this.scrollContainer.nativeElement.scrollTop=this.scrollContainer.nativeElement.scrollHeight}catch{}}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(vU),h.Y36(ar),h.Y36(Kv))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-chatbot"]],viewQuery:function(t,r){if(1&t&&h.Gf(wU,5),2&t){let i;h.iGM(i=h.CRH())&&(r.scrollContainer=i.first)}},decls:10,vars:4,consts:[[1,"container"],[1,"conversation","mb-5"],["scrollContainer",""],[4,"ngIf","ngIfElse"],["class","response row align-items-center",4,"ngIf"],["empty",""],["id","message","rows","3","required","",1,"form-control",3,"formControl","keydown.enter"],[1,"btn","text-white","logOutButton",3,"click"],[4,"ngFor","ngForOf"],["class","request row align-items-center",4,"ngIf"],[1,"request","row","align-items-center"],[1,"message"],[1,"uil","uil-user"],[1,"response","row","align-items-center"],[1,"uil","uil-robot"],[1,"type"],[1,"row","text-center","gap-2","justify-content-center"],[1,"col-lg-3","col-md-5","col-lg-sm-12"],[1,"mb-2"],[1,"uil","uil-lightbulb-alt"],[1,"uil","uil-bolt-alt"],[1,"uil","uil-exclamation-octagon"]],template:function(t,r){if(1&t&&(h.TgZ(0,"div",0)(1,"div",1,2),h.YNc(3,IU,2,1,"ng-container",3),h.YNc(4,DU,5,0,"div",4),h.YNc(5,SU,34,0,"ng-template",null,5,h.W1O),h.qZA(),h.TgZ(7,"textarea",6),h.NdJ("keydown.enter",function(){return r.send()}),h.qZA()(),h.TgZ(8,"button",7),h.NdJ("click",function(){return r.logOut()}),h._uU(9,"Logout"),h.qZA()),2&t){const i=h.MAs(6);h.xp6(3),h.Q6J("ngIf",r.conversation.length>0)("ngIfElse",i),h.xp6(1),h.Q6J("ngIf",r.loading),h.xp6(3),h.Q6J("formControl",r.message)}},dependencies:[is,zn,Yv,HA,OC,ex],styles:['@charset "UTF-8";.conversation[_ngcontent-%COMP%]{width:100%;height:50vh;overflow-y:auto}.conversation[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:-moz-fit-content;width:fit-content;margin:1em 0;width:100%}.conversation[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{display:flex;align-items:center;width:max-content;padding:1em;border-radius:12px;border:1px solid #fff;color:#afafaf;word-break:break-all;max-width:80%}.conversation[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:.4em;padding:.4em;border:1px solid #fff;border-radius:12px;width:auto;height:-moz-fit-content;height:fit-content}.conversation[_ngcontent-%COMP%]   .request[_ngcontent-%COMP%]{justify-content:flex-end}.conversation[_ngcontent-%COMP%]   .response[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]:after{overflow:hidden;display:inline-block;vertical-align:bottom;animation:ellipsis steps(4,end) .9s infinite;content:"\\2026";width:0px}@keyframes ellipsis{to{width:16px}}.form-control[_ngcontent-%COMP%]{color:#afafaf;background-color:#342f44;border:none}.form-control[_ngcontent-%COMP%]:focus{border:none;box-shadow:0 0 0 .2rem #ffffff40}.credits[_ngcontent-%COMP%]{width:100%}@media (max-width: 767px){.conversation[_ngcontent-%COMP%]{height:72vh!important}}.logOutButton[_ngcontent-%COMP%]{font-size:1.2rem;position:absolute;right:0;top:0}']}),n})();const TU=[{path:"auth",children:[{path:"login",component:$P,title:"login"},{path:"register",component:$P,title:"register"}]},{path:"chatbot",component:tN,canActivate:[AP]},{path:"",redirectTo:"auth/login",pathMatch:"full"},{path:"**",redirectTo:"auth/login",pathMatch:"full"}];let AU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[RE.forRoot(TU)]}),n})(),xU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[OE,tN]}),n.\u0275inj=h.cJS({providers:[{provide:Xs.Dh,useValue:Jy.firebaseConfig},Kv,AP],imports:[_o,sB,QB,AU,Xs.hO,RE,ox,_U,uD(()=>lD(Jy.firebaseConfig)),ob(()=>PD()),kL(()=>PL())]}),n})();Jy.production&&(0,h.G48)(),ha().bootstrapModule(xU).catch(n=>console.error(n))},5867:(dt,Se,F)=>{F.d(Se,{C6:()=>h.getApps,KN:()=>h.registerVersion,Mq:()=>h.getApp,ZF:()=>h.initializeApp});var h=F(9681);(0,h.registerVersion)("firebase","9.12.0","app")},127:(dt,Se,F)=>{F.d(Se,{Z:()=>h.Z});var h=F(3942);h.Z.registerVersion("firebase","9.12.0","app-compat")},5881:(dt,Se,F)=>{F.r(Se);var h=F(5861),j=F(3942),P=F(9934),oe=F(2090),ue=(F(9681),F(1877),F(4859));function fe(){return window}function G(){return(G=(0,h.Z)(function*(U,O,V){var re;const{BuildInfo:Fe}=fe();(0,P.aq)(O.sessionId,"AuthEvent did not contain a session ID");const at=yield ge(O.sessionId),ut={};return(0,P.ar)()?ut.ibi=Fe.packageName:(0,P.as)()?ut.apn=Fe.packageName:(0,P.at)(U,"operation-not-supported-in-this-environment"),Fe.displayName&&(ut.appDisplayName=Fe.displayName),ut.sessionId=at,(0,P.au)(U,V,O.type,void 0,null!==(re=O.eventId)&&void 0!==re?re:void 0,ut)})).apply(this,arguments)}function $e(){return($e=(0,h.Z)(function*(U){const{BuildInfo:O}=fe(),V={};(0,P.ar)()?V.iosBundleId=O.packageName:(0,P.as)()?V.androidPackageName=O.packageName:(0,P.at)(U,"operation-not-supported-in-this-environment"),yield(0,P.av)(U,V)})).apply(this,arguments)}function st(){return(st=(0,h.Z)(function*(U,O,V){const{cordova:re}=fe();let Fe=()=>{};try{yield new Promise((at,ut)=>{let Te=null;function Ve(){var Pt;at();const cn=null===(Pt=re.plugins.browsertab)||void 0===Pt?void 0:Pt.close;"function"==typeof cn&&cn(),"function"==typeof V?.close&&V.close()}function xt(){Te||(Te=window.setTimeout(()=>{ut((0,P.aw)(U,"redirect-cancelled-by-user"))},2e3))}function ln(){"visible"===document?.visibilityState&&xt()}O.addPassiveListener(Ve),document.addEventListener("resume",xt,!1),(0,P.as)()&&document.addEventListener("visibilitychange",ln,!1),Fe=()=>{O.removePassiveListener(Ve),document.removeEventListener("resume",xt,!1),document.removeEventListener("visibilitychange",ln,!1),Te&&window.clearTimeout(Te)}})}finally{Fe()}})).apply(this,arguments)}function ge(U){return tt.apply(this,arguments)}function tt(){return(tt=(0,h.Z)(function*(U){const O=Xe(U),V=yield crypto.subtle.digest("SHA-256",O);return Array.from(new Uint8Array(V)).map(Fe=>Fe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Xe(U){if((0,P.aq)(/[0-9a-zA-Z]+/.test(U),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(U);const O=new ArrayBuffer(U.length),V=new Uint8Array(O);for(let re=0;re<U.length;re++)V[re]=U.charCodeAt(re);return V}class ke extends P.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(O=>{this.resolveInialized=O})}addPassiveListener(O){this.passiveListeners.add(O)}removePassiveListener(O){this.passiveListeners.delete(O)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(O){return this.resolveInialized(),this.passiveListeners.forEach(V=>V(O)),super.onEvent(O)}initialized(){var O=this;return(0,h.Z)(function*(){yield O.initPromise})()}}function se(U){return he.apply(this,arguments)}function he(){return(he=(0,h.Z)(function*(U){const O=yield ee()._get(pe(U));return O&&(yield ee()._remove(pe(U))),O})).apply(this,arguments)}function X(){const U=[],O="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let V=0;V<20;V++){const re=Math.floor(Math.random()*O.length);U.push(O.charAt(re))}return U.join("")}function ee(){return(0,P.ay)(P.b)}function pe(U){return(0,P.az)("authEvent",U.config.apiKey,U.name)}function je(U){if(!U?.includes("?"))return{};const[O,...V]=U.split("?");return(0,oe.zd)(V.join("?"))}function Ze(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,P.aw)("no-auth-event")}}function zt(){var U;return(null===(U=self?.location)||void 0===U?void 0:U.protocol)||null}function _r(U=(0,oe.z$)()){return!("file:"!==zt()&&"ionic:"!==zt()&&"capacitor:"!==zt()||!U.toLowerCase().match(/iphone|ipad|ipod|android/))}function Li(){try{const U=self.localStorage,O=P.aI();if(U)return U.setItem(O,"1"),U.removeItem(O),!function Fi(U=(0,oe.z$)()){return function Tr(){return(0,oe.w1)()&&11===document?.documentMode}()||function kn(U=(0,oe.z$)()){return/Edge\/\d+/.test(U)}(U)}()||(0,oe.hl)()}catch{return Ar()&&(0,oe.hl)()}return!1}function Ar(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Un(){return(function Lt(){return"http:"===zt()||"https:"===zt()}()||(0,oe.ru)()||_r())&&!function bi(){return(0,oe.b$)()||(0,oe.UG)()}()&&Li()&&!Ar()}function mi(){return _r()&&typeof document<"u"}function Je(){return(Je=(0,h.Z)(function*(){return!!mi()&&new Promise(U=>{const O=setTimeout(()=>{U(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(O),U(!0)})})})).apply(this,arguments)}const jn={LOCAL:"local",NONE:"none",SESSION:"session"},yn=P.ax,fr="persistence";function En(U){return bn.apply(this,arguments)}function bn(){return(bn=(0,h.Z)(function*(U){yield U._initializationPromise;const O=mt(),V=P.az(fr,U.config.apiKey,U.name);O&&O.setItem(V,U._getPersistence())})).apply(this,arguments)}function mt(){var U;try{return(null===(U=function Kn(){return typeof window<"u"?window:null}())||void 0===U?void 0:U.sessionStorage)||null}catch{return null}}const yt=P.ax;class Tt{constructor(){this.browserResolver=P.ay(P.k),this.cordovaResolver=P.ay(class tn{constructor(){this._redirectPersistence=P.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize(O){var V=this;return(0,h.Z)(function*(){const re=O._key();let Fe=V.eventManagers.get(re);return Fe||(Fe=new ke(O),V.eventManagers.set(re,Fe),V.attachCallbackListeners(O,Fe)),Fe})()}_openPopup(O){(0,P.at)(O,"operation-not-supported-in-this-environment")}_openRedirect(O,V,re,Fe){var at=this;return(0,h.Z)(function*(){!function we(U){var O,V,re,Fe,at,ut,Te,Ve,xt,ln;const Pt=fe();(0,P.ax)("function"==typeof(null===(O=Pt?.universalLinks)||void 0===O?void 0:O.subscribe),U,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,P.ax)(typeof(null===(V=Pt?.BuildInfo)||void 0===V?void 0:V.packageName)<"u",U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,P.ax)("function"==typeof(null===(at=null===(Fe=null===(re=Pt?.cordova)||void 0===re?void 0:re.plugins)||void 0===Fe?void 0:Fe.browsertab)||void 0===at?void 0:at.openUrl),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(Ve=null===(Te=null===(ut=Pt?.cordova)||void 0===ut?void 0:ut.plugins)||void 0===Te?void 0:Te.browsertab)||void 0===Ve?void 0:Ve.isAvailable),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(ln=null===(xt=Pt?.cordova)||void 0===xt?void 0:xt.InAppBrowser)||void 0===ln?void 0:ln.open),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(O);const ut=yield at._initialize(O);yield ut.initialized(),ut.resetRedirect(),(0,P.aD)(),yield at._originValidation(O);const Te=function Ce(U,O,V=null){return{type:O,eventId:V,urlResponse:null,sessionId:X(),postBody:null,tenantId:U.tenantId,error:(0,P.aw)(U,"no-auth-event")}}(O,re,Fe);yield function We(U,O){return ee()._set(pe(U),O)}(O,Te);const Ve=yield function z(U,O,V){return G.apply(this,arguments)}(O,Te,V),xt=yield function Pe(U){const{cordova:O}=fe();return new Promise(V=>{O.plugins.browsertab.isAvailable(re=>{let Fe=null;re?O.plugins.browsertab.openUrl(U):Fe=O.InAppBrowser.open(U,(0,P.ap)()?"_blank":"_system","location=yes"),V(Fe)})})}(Ve);return function Ie(U,O,V){return st.apply(this,arguments)}(O,ut,xt)})()}_isIframeWebStorageSupported(O,V){throw new Error("Method not implemented.")}_originValidation(O){const V=O._key();return this.originValidationPromises[V]||(this.originValidationPromises[V]=function J(U){return $e.apply(this,arguments)}(O)),this.originValidationPromises[V]}attachCallbackListeners(O,V){const{universalLinks:re,handleOpenURL:Fe,BuildInfo:at}=fe(),ut=setTimeout((0,h.Z)(function*(){yield se(O),V.onEvent(Ze())}),500),Te=function(){var ln=(0,h.Z)(function*(Pt){clearTimeout(ut);const cn=yield se(O);let Bi=null;cn&&Pt?.url&&(Bi=function ve(U,O){var V,re;const Fe=function Be(U){const O=je(U),V=O.link?decodeURIComponent(O.link):void 0,re=je(V).link,Fe=O.deep_link_id?decodeURIComponent(O.deep_link_id):void 0;return je(Fe).link||Fe||re||V||U}(O);if(Fe.includes("/__/auth/callback")){const at=je(Fe),ut=at.firebaseError?function ae(U){try{return JSON.parse(U)}catch{return null}}(decodeURIComponent(at.firebaseError)):null,Te=null===(re=null===(V=ut?.code)||void 0===V?void 0:V.split("auth/"))||void 0===re?void 0:re[1],Ve=Te?(0,P.aw)(Te):null;return Ve?{type:U.type,eventId:U.eventId,tenantId:U.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:U.type,eventId:U.eventId,tenantId:U.tenantId,sessionId:U.sessionId,urlResponse:Fe,postBody:null}}return null}(cn,Pt.url)),V.onEvent(Bi||Ze())});return function(cn){return ln.apply(this,arguments)}}();typeof re<"u"&&"function"==typeof re.subscribe&&re.subscribe(null,Te);const Ve=Fe,xt=`${at.packageName.toLowerCase()}://`;fe().handleOpenURL=function(){var ln=(0,h.Z)(function*(Pt){if(Pt.toLowerCase().startsWith(xt)&&Te({url:Pt}),"function"==typeof Ve)try{Ve(Pt)}catch(cn){console.error(cn)}});return function(Pt){return ln.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=P.a,this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize(O){var V=this;return(0,h.Z)(function*(){return yield V.selectUnderlyingResolver(),V.assertedUnderlyingResolver._initialize(O)})()}_openPopup(O,V,re,Fe){var at=this;return(0,h.Z)(function*(){return yield at.selectUnderlyingResolver(),at.assertedUnderlyingResolver._openPopup(O,V,re,Fe)})()}_openRedirect(O,V,re,Fe){var at=this;return(0,h.Z)(function*(){return yield at.selectUnderlyingResolver(),at.assertedUnderlyingResolver._openRedirect(O,V,re,Fe)})()}_isIframeWebStorageSupported(O,V){this.assertedUnderlyingResolver._isIframeWebStorageSupported(O,V)}_originValidation(O){return this.assertedUnderlyingResolver._originValidation(O)}get _shouldInitProactively(){return mi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var O=this;return(0,h.Z)(function*(){if(O.underlyingResolver)return;const V=yield function Vi(){return Je.apply(this,arguments)}();O.underlyingResolver=V?O.cordovaResolver:O.browserResolver})()}}function Vr(U){return U.unwrap()}function vr(U){return xr(U)}function xr(U){const{_tokenResponse:O}=U instanceof oe.ZR?U.customData:U;if(!O)return null;if(!(U instanceof oe.ZR)&&"temporaryProof"in O&&"phoneNumber"in O)return P.P.credentialFromResult(U);const V=O.providerId;if(!V||V===P.o.PASSWORD)return null;let re;switch(V){case P.o.GOOGLE:re=P.Q;break;case P.o.FACEBOOK:re=P.N;break;case P.o.GITHUB:re=P.T;break;case P.o.TWITTER:re=P.W;break;default:const{oauthIdToken:Fe,oauthAccessToken:at,oauthTokenSecret:ut,pendingToken:Te,nonce:Ve}=O;return at||ut||Fe||Te?Te?V.startsWith("saml.")?P.aL._create(V,Te):P.J._fromParams({providerId:V,signInMethod:V,pendingToken:Te,idToken:Fe,accessToken:at}):new P.U(V).credential({idToken:Fe,accessToken:at,rawNonce:Ve}):null}return U instanceof oe.ZR?re.credentialFromError(U):re.credentialFromResult(U)}function Ft(U,O){return O.catch(V=>{throw V instanceof oe.ZR&&function Dt(U,O){var V,re;const Fe=null===(V=O.customData)||void 0===V?void 0:V._tokenResponse;if("auth/multi-factor-auth-required"===(null===(re=O)||void 0===re?void 0:re.code))O.resolver=new sr(U,P.an(U,O));else if(Fe){const at=xr(O),ut=O;at&&(ut.credential=at,ut.tenantId=Fe.tenantId||void 0,ut.email=Fe.email||void 0,ut.phoneNumber=Fe.phoneNumber||void 0)}}(U,V),V}).then(V=>{const Fe=V.user;return{operationType:V.operationType,credential:vr(V),additionalUserInfo:P.al(V),user:Sn.getOrCreate(Fe)}})}function Jr(U,O){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,h.Z)(function*(U,O){const V=yield O;return{verificationId:V.verificationId,confirm:re=>Ft(U,V.confirm(re))}})).apply(this,arguments)}class sr{constructor(O,V){this.resolver=V,this.auth=function Yn(U){return U.wrapped()}(O)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(O){return Ft(Vr(this.auth),this.resolver.resolveSignIn(O))}}class Sn{constructor(O){this._delegate=O,this.multiFactor=P.ao(O)}static getOrCreate(O){return Sn.USER_MAP.has(O)||Sn.USER_MAP.set(O,new Sn(O)),Sn.USER_MAP.get(O)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(O){return this._delegate.getIdTokenResult(O)}getIdToken(O){return this._delegate.getIdToken(O)}linkAndRetrieveDataWithCredential(O){return this.linkWithCredential(O)}linkWithCredential(O){var V=this;return(0,h.Z)(function*(){return Ft(V.auth,P.Z(V._delegate,O))})()}linkWithPhoneNumber(O,V){var re=this;return(0,h.Z)(function*(){return Jr(re.auth,P.l(re._delegate,O,V))})()}linkWithPopup(O){var V=this;return(0,h.Z)(function*(){return Ft(V.auth,P.d(V._delegate,O,Tt))})()}linkWithRedirect(O){var V=this;return(0,h.Z)(function*(){return yield En(P.aE(V.auth)),P.g(V._delegate,O,Tt)})()}reauthenticateAndRetrieveDataWithCredential(O){return this.reauthenticateWithCredential(O)}reauthenticateWithCredential(O){var V=this;return(0,h.Z)(function*(){return Ft(V.auth,P._(V._delegate,O))})()}reauthenticateWithPhoneNumber(O,V){return Jr(this.auth,P.r(this._delegate,O,V))}reauthenticateWithPopup(O){return Ft(this.auth,P.e(this._delegate,O,Tt))}reauthenticateWithRedirect(O){var V=this;return(0,h.Z)(function*(){return yield En(P.aE(V.auth)),P.h(V._delegate,O,Tt)})()}sendEmailVerification(O){return P.ab(this._delegate,O)}unlink(O){var V=this;return(0,h.Z)(function*(){return yield P.ak(V._delegate,O),V})()}updateEmail(O){return P.ag(this._delegate,O)}updatePassword(O){return P.ah(this._delegate,O)}updatePhoneNumber(O){return P.u(this._delegate,O)}updateProfile(O){return P.af(this._delegate,O)}verifyBeforeUpdateEmail(O,V){return P.ac(this._delegate,O,V)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Sn.USER_MAP=new WeakMap;const nt=P.ax;let De=(()=>{class U{constructor(V,re){if(this.app=V,re.isInitialized())return this._delegate=re.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Fe}=V.options;nt(Fe,"invalid-api-key",{appName:V.name}),nt(Fe,"invalid-api-key",{appName:V.name});const at=typeof window<"u"?Tt:void 0;this._delegate=re.initialize({options:{persistence:bt(Fe,V.name),popupRedirectResolver:at}}),this._delegate._updateErrorMap(P.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Sn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(V){this._delegate.languageCode=V}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(V){this._delegate.tenantId=V}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(V,re){P.G(this._delegate,V,re)}applyActionCode(V){return P.a2(this._delegate,V)}checkActionCode(V){return P.a3(this._delegate,V)}confirmPasswordReset(V,re){return P.a1(this._delegate,V,re)}createUserWithEmailAndPassword(V,re){var Fe=this;return(0,h.Z)(function*(){return Ft(Fe._delegate,P.a5(Fe._delegate,V,re))})()}fetchProvidersForEmail(V){return this.fetchSignInMethodsForEmail(V)}fetchSignInMethodsForEmail(V){return P.aa(this._delegate,V)}isSignInWithEmailLink(V){return P.a8(this._delegate,V)}getRedirectResult(){var V=this;return(0,h.Z)(function*(){nt(Un(),V._delegate,"operation-not-supported-in-this-environment");const re=yield P.j(V._delegate,Tt);return re?Ft(V._delegate,Promise.resolve(re)):{credential:null,user:null}})()}addFrameworkForLogging(V){!function un(U,O){(0,P.aE)(U)._logFramework(O)}(this._delegate,V)}onAuthStateChanged(V,re,Fe){const{next:at,error:ut,complete:Te}=rt(V,re,Fe);return this._delegate.onAuthStateChanged(at,ut,Te)}onIdTokenChanged(V,re,Fe){const{next:at,error:ut,complete:Te}=rt(V,re,Fe);return this._delegate.onIdTokenChanged(at,ut,Te)}sendSignInLinkToEmail(V,re){return P.a7(this._delegate,V,re)}sendPasswordResetEmail(V,re){return P.a0(this._delegate,V,re||void 0)}setPersistence(V){var re=this;return(0,h.Z)(function*(){let Fe;switch(function Cs(U,O){yn(Object.values(jn).includes(O),U,"invalid-persistence-type"),(0,oe.b$)()?yn(O!==jn.SESSION,U,"unsupported-persistence-type"):(0,oe.UG)()?yn(O===jn.NONE,U,"unsupported-persistence-type"):Ar()?yn(O===jn.NONE||O===jn.LOCAL&&(0,oe.hl)(),U,"unsupported-persistence-type"):yn(O===jn.NONE||Li(),U,"unsupported-persistence-type")}(re._delegate,V),V){case jn.SESSION:Fe=P.a;break;case jn.LOCAL:Fe=(yield P.ay(P.i)._isAvailable())?P.i:P.b;break;case jn.NONE:Fe=P.L;break;default:return P.at("argument-error",{appName:re._delegate.name})}return re._delegate.setPersistence(Fe)})()}signInAndRetrieveDataWithCredential(V){return this.signInWithCredential(V)}signInAnonymously(){return Ft(this._delegate,P.X(this._delegate))}signInWithCredential(V){return Ft(this._delegate,P.Y(this._delegate,V))}signInWithCustomToken(V){return Ft(this._delegate,P.$(this._delegate,V))}signInWithEmailAndPassword(V,re){return Ft(this._delegate,P.a6(this._delegate,V,re))}signInWithEmailLink(V,re){return Ft(this._delegate,P.a9(this._delegate,V,re))}signInWithPhoneNumber(V,re){return Jr(this._delegate,P.s(this._delegate,V,re))}signInWithPopup(V){var re=this;return(0,h.Z)(function*(){return nt(Un(),re._delegate,"operation-not-supported-in-this-environment"),Ft(re._delegate,P.c(re._delegate,V,Tt))})()}signInWithRedirect(V){var re=this;return(0,h.Z)(function*(){return nt(Un(),re._delegate,"operation-not-supported-in-this-environment"),yield En(re._delegate),P.f(re._delegate,V,Tt)})()}updateCurrentUser(V){return this._delegate.updateCurrentUser(V)}verifyPasswordResetCode(V){return P.a4(this._delegate,V)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return U.Persistence=jn,U})();function rt(U,O,V){let re=U;"function"!=typeof U&&({next:re,error:O,complete:V}=U);const Fe=re;return{next:ut=>Fe(ut&&Sn.getOrCreate(ut)),error:O,complete:V}}function bt(U,O){const V=function pn(U,O){const V=mt();if(!V)return[];const re=P.az(fr,U,O);switch(V.getItem(re)){case jn.NONE:return[P.L];case jn.LOCAL:return[P.i,P.a];case jn.SESSION:return[P.a];default:return[]}}(U,O);if(typeof self<"u"&&!V.includes(P.i)&&V.push(P.i),typeof window<"u")for(const re of[P.b,P.a])V.includes(re)||V.push(re);return V.includes(P.L)||V.push(P.L),V}class It{constructor(){this.providerId="phone",this._delegate=new P.P(Vr(j.Z.auth()))}static credential(O,V){return P.P.credential(O,V)}verifyPhoneNumber(O,V){return this._delegate.verifyPhoneNumber(O,V)}unwrap(){return this._delegate}}It.PHONE_SIGN_IN_METHOD=P.P.PHONE_SIGN_IN_METHOD,It.PROVIDER_ID=P.P.PROVIDER_ID;const Yt=P.ax;class W{constructor(O,V,re=j.Z.app()){var Fe;Yt(null===(Fe=re.options)||void 0===Fe?void 0:Fe.apiKey,"invalid-api-key",{appName:re.name}),this._delegate=new P.R(O,V,re.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Y(U){U.INTERNAL.registerComponent(new ue.wA("auth-compat",O=>{const V=O.getProvider("app-compat").getImmediate(),re=O.getProvider("auth");return new De(V,re)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:P.A.EMAIL_SIGNIN,PASSWORD_RESET:P.A.PASSWORD_RESET,RECOVER_EMAIL:P.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:P.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:P.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:P.A.VERIFY_EMAIL}},EmailAuthProvider:P.M,FacebookAuthProvider:P.N,GithubAuthProvider:P.T,GoogleAuthProvider:P.Q,OAuthProvider:P.U,SAMLAuthProvider:P.V,PhoneAuthProvider:It,PhoneMultiFactorGenerator:P.m,RecaptchaVerifier:W,TwitterAuthProvider:P.W,Auth:De,AuthCredential:P.H,Error:oe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),U.registerVersion("@firebase/auth-compat","0.2.22")}(j.Z)},9751:(dt,Se,F)=>{F.d(Se,{y:()=>fe});var h=F(930),j=F(727),P=F(8822),oe=F(9635),le=F(2416),ye=F(576),ue=F(2806);let fe=(()=>{class J{constructor(Pe){Pe&&(this._subscribe=Pe)}lift(Pe){const Ie=new J;return Ie.source=this,Ie.operator=Pe,Ie}subscribe(Pe,Ie,st){const we=function G(J){return J&&J instanceof h.Lv||function z(J){return J&&(0,ye.m)(J.next)&&(0,ye.m)(J.error)&&(0,ye.m)(J.complete)}(J)&&(0,j.Nn)(J)}(Pe)?Pe:new h.Hp(Pe,Ie,st);return(0,ue.x)(()=>{const{operator:ge,source:tt}=this;we.add(ge?ge.call(we,tt):tt?this._subscribe(we):this._trySubscribe(we))}),we}_trySubscribe(Pe){try{return this._subscribe(Pe)}catch(Ie){Pe.error(Ie)}}forEach(Pe,Ie){return new(Ie=_e(Ie))((st,we)=>{const ge=new h.Hp({next:tt=>{try{Pe(tt)}catch(Xe){we(Xe),ge.unsubscribe()}},error:we,complete:st});this.subscribe(ge)})}_subscribe(Pe){var Ie;return null===(Ie=this.source)||void 0===Ie?void 0:Ie.subscribe(Pe)}[P.L](){return this}pipe(...Pe){return(0,oe.U)(Pe)(this)}toPromise(Pe){return new(Pe=_e(Pe))((Ie,st)=>{let we;this.subscribe(ge=>we=ge,ge=>st(ge),()=>Ie(we))})}}return J.create=$e=>new J($e),J})();function _e(J){var $e;return null!==($e=J??le.v.Promise)&&void 0!==$e?$e:Promise}},7579:(dt,Se,F)=>{F.d(Se,{x:()=>ue});var h=F(9751),j=F(727);const oe=(0,F(3888).d)(_e=>function(){_e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=F(8737),ye=F(2806);let ue=(()=>{class _e extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const J=new fe(this,this);return J.operator=G,J}_throwIfClosed(){if(this.closed)throw new oe}next(G){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(G)}})}error(G){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:J}=this;for(;J.length;)J.shift().error(G)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:J,isStopped:$e,observers:Pe}=this;return J||$e?j.Lc:(this.currentObservers=null,Pe.push(G),new j.w0(()=>{this.currentObservers=null,(0,le.P)(Pe,G)}))}_checkFinalizedStatuses(G){const{hasError:J,thrownError:$e,isStopped:Pe}=this;J?G.error($e):Pe&&G.complete()}asObservable(){const G=new h.y;return G.source=this,G}}return _e.create=(z,G)=>new fe(z,G),_e})();class fe extends ue{constructor(z,G){super(),this.destination=z,this.source=G}next(z){var G,J;null===(J=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===J||J.call(G,z)}error(z){var G,J;null===(J=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===J||J.call(G,z)}complete(){var z,G;null===(G=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===G||G.call(z)}_subscribe(z){var G,J;return null!==(J=null===(G=this.source)||void 0===G?void 0:G.subscribe(z))&&void 0!==J?J:j.Lc}}},930:(dt,Se,F)=>{F.d(Se,{Hp:()=>st,Lv:()=>J});var h=F(576),j=F(727),P=F(2416),oe=F(7849),le=F(5032);const ye=_e("C",void 0,void 0);function _e(Ne,ke,Ce){return{kind:Ne,value:ke,error:Ce}}var z=F(3410),G=F(2806);class J extends j.w0{constructor(ke){super(),this.isStopped=!1,ke?(this.destination=ke,(0,j.Nn)(ke)&&ke.add(this)):this.destination=Xe}static create(ke,Ce,We){return new st(ke,Ce,We)}next(ke){this.isStopped?tt(function fe(Ne){return _e("N",Ne,void 0)}(ke),this):this._next(ke)}error(ke){this.isStopped?tt(function ue(Ne){return _e("E",void 0,Ne)}(ke),this):(this.isStopped=!0,this._error(ke))}complete(){this.isStopped?tt(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ke){this.destination.next(ke)}_error(ke){try{this.destination.error(ke)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function Pe(Ne,ke){return $e.call(Ne,ke)}class Ie{constructor(ke){this.partialObserver=ke}next(ke){const{partialObserver:Ce}=this;if(Ce.next)try{Ce.next(ke)}catch(We){we(We)}}error(ke){const{partialObserver:Ce}=this;if(Ce.error)try{Ce.error(ke)}catch(We){we(We)}else we(ke)}complete(){const{partialObserver:ke}=this;if(ke.complete)try{ke.complete()}catch(Ce){we(Ce)}}}class st extends J{constructor(ke,Ce,We){let se;if(super(),(0,h.m)(ke)||!ke)se={next:ke??void 0,error:Ce??void 0,complete:We??void 0};else{let he;this&&P.v.useDeprecatedNextContext?(he=Object.create(ke),he.unsubscribe=()=>this.unsubscribe(),se={next:ke.next&&Pe(ke.next,he),error:ke.error&&Pe(ke.error,he),complete:ke.complete&&Pe(ke.complete,he)}):se=ke}this.destination=new Ie(se)}}function we(Ne){P.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Ne):(0,oe.h)(Ne)}function tt(Ne,ke){const{onStoppedNotification:Ce}=P.v;Ce&&z.z.setTimeout(()=>Ce(Ne,ke))}const Xe={closed:!0,next:le.Z,error:function ge(Ne){throw Ne},complete:le.Z}},727:(dt,Se,F)=>{F.d(Se,{Lc:()=>ye,w0:()=>le,Nn:()=>ue});var h=F(576);const P=(0,F(3888).d)(_e=>function(G){_e(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((J,$e)=>`${$e+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var oe=F(8737);class le{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Pe of G)Pe.remove(this);else G.remove(this);const{initialTeardown:J}=this;if((0,h.m)(J))try{J()}catch(Pe){z=Pe instanceof P?Pe.errors:[Pe]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const Pe of $e)try{fe(Pe)}catch(Ie){z=z??[],Ie instanceof P?z=[...z,...Ie.errors]:z.push(Ie)}}if(z)throw new P(z)}}add(z){var G;if(z&&z!==this)if(this.closed)fe(z);else{if(z instanceof le){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(z)}}_hasParent(z){const{_parentage:G}=this;return G===z||Array.isArray(G)&&G.includes(z)}_addParent(z){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(z),G):G?[G,z]:z}_removeParent(z){const{_parentage:G}=this;G===z?this._parentage=null:Array.isArray(G)&&(0,oe.P)(G,z)}remove(z){const{_finalizers:G}=this;G&&(0,oe.P)(G,z),z instanceof le&&z._removeParent(this)}}le.EMPTY=(()=>{const _e=new le;return _e.closed=!0,_e})();const ye=le.EMPTY;function ue(_e){return _e instanceof le||_e&&"closed"in _e&&(0,h.m)(_e.remove)&&(0,h.m)(_e.add)&&(0,h.m)(_e.unsubscribe)}function fe(_e){(0,h.m)(_e)?_e():_e.unsubscribe()}},2416:(dt,Se,F)=>{F.d(Se,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(dt,Se,F)=>{F.d(Se,{E:()=>j});const j=new(F(9751).y)(le=>le.complete())},8996:(dt,Se,F)=>{F.d(Se,{D:()=>ke});var h=F(8421),j=F(5363),P=F(9468),ye=F(9751),fe=F(2202),_e=F(576),z=F(9672);function J(Ce,We){if(!Ce)throw new Error("Iterable cannot be null");return new ye.y(se=>{(0,z.f)(se,We,()=>{const he=Ce[Symbol.asyncIterator]();(0,z.f)(se,We,()=>{he.next().then(ve=>{ve.done?se.complete():se.next(ve.value)})},0,!0)})})}var $e=F(3670),Pe=F(8239),Ie=F(1144),st=F(6495),we=F(2206),ge=F(4532),tt=F(3260);function ke(Ce,We){return We?function Ne(Ce,We){if(null!=Ce){if((0,$e.c)(Ce))return function oe(Ce,We){return(0,h.Xf)(Ce).pipe((0,P.R)(We),(0,j.Q)(We))}(Ce,We);if((0,Ie.z)(Ce))return function ue(Ce,We){return new ye.y(se=>{let he=0;return We.schedule(function(){he===Ce.length?se.complete():(se.next(Ce[he++]),se.closed||this.schedule())})})}(Ce,We);if((0,Pe.t)(Ce))return function le(Ce,We){return(0,h.Xf)(Ce).pipe((0,P.R)(We),(0,j.Q)(We))}(Ce,We);if((0,we.D)(Ce))return J(Ce,We);if((0,st.T)(Ce))return function G(Ce,We){return new ye.y(se=>{let he;return(0,z.f)(se,We,()=>{he=Ce[fe.h](),(0,z.f)(se,We,()=>{let ve,X;try{({value:ve,done:X}=he.next())}catch(ee){return void se.error(ee)}X?se.complete():se.next(ve)},0,!0)}),()=>(0,_e.m)(he?.return)&&he.return()})}(Ce,We);if((0,tt.L)(Ce))return function Xe(Ce,We){return J((0,tt.Q)(Ce),We)}(Ce,We)}throw(0,ge.z)(Ce)}(Ce,We):(0,h.Xf)(Ce)}},8421:(dt,Se,F)=>{F.d(Se,{Xf:()=>$e});var h=F(655),j=F(1144),P=F(8239),oe=F(9751),le=F(3670),ye=F(2206),ue=F(4532),fe=F(6495),_e=F(3260),z=F(576),G=F(7849),J=F(8822);function $e(Ne){if(Ne instanceof oe.y)return Ne;if(null!=Ne){if((0,le.c)(Ne))return function Pe(Ne){return new oe.y(ke=>{const Ce=Ne[J.L]();if((0,z.m)(Ce.subscribe))return Ce.subscribe(ke);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ne);if((0,j.z)(Ne))return function Ie(Ne){return new oe.y(ke=>{for(let Ce=0;Ce<Ne.length&&!ke.closed;Ce++)ke.next(Ne[Ce]);ke.complete()})}(Ne);if((0,P.t)(Ne))return function st(Ne){return new oe.y(ke=>{Ne.then(Ce=>{ke.closed||(ke.next(Ce),ke.complete())},Ce=>ke.error(Ce)).then(null,G.h)})}(Ne);if((0,ye.D)(Ne))return ge(Ne);if((0,fe.T)(Ne))return function we(Ne){return new oe.y(ke=>{for(const Ce of Ne)if(ke.next(Ce),ke.closed)return;ke.complete()})}(Ne);if((0,_e.L)(Ne))return function tt(Ne){return ge((0,_e.Q)(Ne))}(Ne)}throw(0,ue.z)(Ne)}function ge(Ne){return new oe.y(ke=>{(function Xe(Ne,ke){var Ce,We,se,he;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Ce=(0,h.KL)(Ne);!(We=yield Ce.next()).done;)if(ke.next(We.value),ke.closed)return}catch(ve){se={error:ve}}finally{try{We&&!We.done&&(he=Ce.return)&&(yield he.call(Ce))}finally{if(se)throw se.error}}ke.complete()})})(Ne,ke).catch(Ce=>ke.error(Ce))})}},6451:(dt,Se,F)=>{F.d(Se,{T:()=>ye});var h=F(8189),j=F(8421),P=F(515),oe=F(3269),le=F(8996);function ye(...ue){const fe=(0,oe.yG)(ue),_e=(0,oe._6)(ue,1/0),z=ue;return z.length?1===z.length?(0,j.Xf)(z[0]):(0,h.J)(_e)((0,le.D)(z,fe)):P.E}},5403:(dt,Se,F)=>{F.d(Se,{x:()=>j});var h=F(930);function j(oe,le,ye,ue,fe){return new P(oe,le,ye,ue,fe)}class P extends h.Lv{constructor(le,ye,ue,fe,_e,z){super(le),this.onFinalize=_e,this.shouldUnsubscribe=z,this._next=ye?function(G){try{ye(G)}catch(J){le.error(J)}}:super._next,this._error=fe?function(G){try{fe(G)}catch(J){le.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(G){le.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(le=this.onFinalize)||void 0===le||le.call(this))}}}},4004:(dt,Se,F)=>{F.d(Se,{U:()=>P});var h=F(4482),j=F(5403);function P(oe,le){return(0,h.e)((ye,ue)=>{let fe=0;ye.subscribe((0,j.x)(ue,_e=>{ue.next(oe.call(le,_e,fe++))}))})}},8189:(dt,Se,F)=>{F.d(Se,{J:()=>P});var h=F(5577),j=F(4671);function P(oe=1/0){return(0,h.z)(j.y,oe)}},5577:(dt,Se,F)=>{F.d(Se,{z:()=>fe});var h=F(4004),j=F(8421),P=F(4482),oe=F(9672),le=F(5403),ue=F(576);function fe(_e,z,G=1/0){return(0,ue.m)(z)?fe((J,$e)=>(0,h.U)((Pe,Ie)=>z(J,Pe,$e,Ie))((0,j.Xf)(_e(J,$e))),G):("number"==typeof z&&(G=z),(0,P.e)((J,$e)=>function ye(_e,z,G,J,$e,Pe,Ie,st){const we=[];let ge=0,tt=0,Xe=!1;const Ne=()=>{Xe&&!we.length&&!ge&&z.complete()},ke=We=>ge<J?Ce(We):we.push(We),Ce=We=>{Pe&&z.next(We),ge++;let se=!1;(0,j.Xf)(G(We,tt++)).subscribe((0,le.x)(z,he=>{$e?.(he),Pe?ke(he):z.next(he)},()=>{se=!0},void 0,()=>{if(se)try{for(ge--;we.length&&ge<J;){const he=we.shift();Ie?(0,oe.f)(z,Ie,()=>Ce(he)):Ce(he)}Ne()}catch(he){z.error(he)}}))};return _e.subscribe((0,le.x)(z,ke,()=>{Xe=!0,Ne()})),()=>{st?.()}}(J,$e,_e,G)))}},5363:(dt,Se,F)=>{F.d(Se,{Q:()=>oe});var h=F(9672),j=F(4482),P=F(5403);function oe(le,ye=0){return(0,j.e)((ue,fe)=>{ue.subscribe((0,P.x)(fe,_e=>(0,h.f)(fe,le,()=>fe.next(_e),ye),()=>(0,h.f)(fe,le,()=>fe.complete(),ye),_e=>(0,h.f)(fe,le,()=>fe.error(_e),ye)))})}},3099:(dt,Se,F)=>{F.d(Se,{B:()=>le});var h=F(8421),j=F(7579),P=F(930),oe=F(4482);function le(ue={}){const{connector:fe=(()=>new j.x),resetOnError:_e=!0,resetOnComplete:z=!0,resetOnRefCountZero:G=!0}=ue;return J=>{let $e,Pe,Ie,st=0,we=!1,ge=!1;const tt=()=>{Pe?.unsubscribe(),Pe=void 0},Xe=()=>{tt(),$e=Ie=void 0,we=ge=!1},Ne=()=>{const ke=$e;Xe(),ke?.unsubscribe()};return(0,oe.e)((ke,Ce)=>{st++,!ge&&!we&&tt();const We=Ie=Ie??fe();Ce.add(()=>{st--,0===st&&!ge&&!we&&(Pe=ye(Ne,G))}),We.subscribe(Ce),!$e&&st>0&&($e=new P.Hp({next:se=>We.next(se),error:se=>{ge=!0,tt(),Pe=ye(Xe,_e,se),We.error(se)},complete:()=>{we=!0,tt(),Pe=ye(Xe,z),We.complete()}}),(0,h.Xf)(ke).subscribe($e))})(J)}}function ye(ue,fe,..._e){if(!0===fe)return void ue();if(!1===fe)return;const z=new P.Hp({next:()=>{z.unsubscribe(),ue()}});return fe(..._e).subscribe(z)}},9468:(dt,Se,F)=>{F.d(Se,{R:()=>j});var h=F(4482);function j(P,oe=0){return(0,h.e)((le,ye)=>{ye.add(P.schedule(()=>le.subscribe(ye),oe))})}},8505:(dt,Se,F)=>{F.d(Se,{b:()=>le});var h=F(576),j=F(4482),P=F(5403),oe=F(4671);function le(ye,ue,fe){const _e=(0,h.m)(ye)||ue||fe?{next:ye,error:ue,complete:fe}:ye;return _e?(0,j.e)((z,G)=>{var J;null===(J=_e.subscribe)||void 0===J||J.call(_e);let $e=!0;z.subscribe((0,P.x)(G,Pe=>{var Ie;null===(Ie=_e.next)||void 0===Ie||Ie.call(_e,Pe),G.next(Pe)},()=>{var Pe;$e=!1,null===(Pe=_e.complete)||void 0===Pe||Pe.call(_e),G.complete()},Pe=>{var Ie;$e=!1,null===(Ie=_e.error)||void 0===Ie||Ie.call(_e,Pe),G.error(Pe)},()=>{var Pe,Ie;$e&&(null===(Pe=_e.unsubscribe)||void 0===Pe||Pe.call(_e)),null===(Ie=_e.finalize)||void 0===Ie||Ie.call(_e)}))}):oe.y}},4408:(dt,Se,F)=>{F.d(Se,{o:()=>le});var h=F(727);class j extends h.w0{constructor(ue,fe){super()}schedule(ue,fe=0){return this}}const P={setInterval(ye,ue,...fe){const{delegate:_e}=P;return _e?.setInterval?_e.setInterval(ye,ue,...fe):setInterval(ye,ue,...fe)},clearInterval(ye){const{delegate:ue}=P;return(ue?.clearInterval||clearInterval)(ye)},delegate:void 0};var oe=F(8737);class le extends j{constructor(ue,fe){super(ue,fe),this.scheduler=ue,this.work=fe,this.pending=!1}schedule(ue,fe=0){if(this.closed)return this;this.state=ue;const _e=this.id,z=this.scheduler;return null!=_e&&(this.id=this.recycleAsyncId(z,_e,fe)),this.pending=!0,this.delay=fe,this.id=this.id||this.requestAsyncId(z,this.id,fe),this}requestAsyncId(ue,fe,_e=0){return P.setInterval(ue.flush.bind(ue,this),_e)}recycleAsyncId(ue,fe,_e=0){if(null!=_e&&this.delay===_e&&!1===this.pending)return fe;P.clearInterval(fe)}execute(ue,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(ue,fe);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,fe){let z,_e=!1;try{this.work(ue)}catch(G){_e=!0,z=G||new Error("Scheduled action threw falsy error")}if(_e)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:ue,scheduler:fe}=this,{actions:_e}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(_e,this),null!=ue&&(this.id=this.recycleAsyncId(fe,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(dt,Se,F)=>{F.d(Se,{v:()=>P});var h=F(6063);class j{constructor(le,ye=j.now){this.schedulerActionCtor=le,this.now=ye}schedule(le,ye=0,ue){return new this.schedulerActionCtor(this,le).schedule(ue,ye)}}j.now=h.l.now;class P extends j{constructor(le,ye=j.now){super(le,ye),this.actions=[],this._active=!1,this._scheduled=void 0}flush(le){const{actions:ye}=this;if(this._active)return void ye.push(le);let ue;this._active=!0;do{if(ue=le.execute(le.state,le.delay))break}while(le=ye.shift());if(this._active=!1,ue){for(;le=ye.shift();)le.unsubscribe();throw ue}}}},4986:(dt,Se,F)=>{F.d(Se,{P:()=>oe,z:()=>P});var h=F(4408);const P=new(F(7565).v)(h.o),oe=P},6063:(dt,Se,F)=>{F.d(Se,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(dt,Se,F)=>{F.d(Se,{z:()=>h});const h={setTimeout(j,P,...oe){const{delegate:le}=h;return le?.setTimeout?le.setTimeout(j,P,...oe):setTimeout(j,P,...oe)},clearTimeout(j){const{delegate:P}=h;return(P?.clearTimeout||clearTimeout)(j)},delegate:void 0}},2202:(dt,Se,F)=>{F.d(Se,{h:()=>j});const j=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(dt,Se,F)=>{F.d(Se,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(dt,Se,F)=>{F.d(Se,{_6:()=>ye,jO:()=>oe,yG:()=>le});var h=F(576),j=F(3532);function P(ue){return ue[ue.length-1]}function oe(ue){return(0,h.m)(P(ue))?ue.pop():void 0}function le(ue){return(0,j.K)(P(ue))?ue.pop():void 0}function ye(ue,fe){return"number"==typeof P(ue)?ue.pop():fe}},8737:(dt,Se,F)=>{function h(j,P){if(j){const oe=j.indexOf(P);0<=oe&&j.splice(oe,1)}}F.d(Se,{P:()=>h})},3888:(dt,Se,F)=>{function h(j){const oe=j(le=>{Error.call(le),le.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}F.d(Se,{d:()=>h})},2806:(dt,Se,F)=>{F.d(Se,{O:()=>oe,x:()=>P});var h=F(2416);let j=null;function P(le){if(h.v.useDeprecatedSynchronousErrorHandling){const ye=!j;if(ye&&(j={errorThrown:!1,error:null}),le(),ye){const{errorThrown:ue,error:fe}=j;if(j=null,ue)throw fe}}else le()}function oe(le){h.v.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=le)}},9672:(dt,Se,F)=>{function h(j,P,oe,le=0,ye=!1){const ue=P.schedule(function(){oe(),ye?j.add(this.schedule(null,le)):this.unsubscribe()},le);if(j.add(ue),!ye)return ue}F.d(Se,{f:()=>h})},4671:(dt,Se,F)=>{function h(j){return j}F.d(Se,{y:()=>h})},1144:(dt,Se,F)=>{F.d(Se,{z:()=>h});const h=j=>j&&"number"==typeof j.length&&"function"!=typeof j},2206:(dt,Se,F)=>{F.d(Se,{D:()=>j});var h=F(576);function j(P){return Symbol.asyncIterator&&(0,h.m)(P?.[Symbol.asyncIterator])}},576:(dt,Se,F)=>{function h(j){return"function"==typeof j}F.d(Se,{m:()=>h})},3670:(dt,Se,F)=>{F.d(Se,{c:()=>P});var h=F(8822),j=F(576);function P(oe){return(0,j.m)(oe[h.L])}},6495:(dt,Se,F)=>{F.d(Se,{T:()=>P});var h=F(2202),j=F(576);function P(oe){return(0,j.m)(oe?.[h.h])}},8239:(dt,Se,F)=>{F.d(Se,{t:()=>j});var h=F(576);function j(P){return(0,h.m)(P?.then)}},3260:(dt,Se,F)=>{F.d(Se,{L:()=>oe,Q:()=>P});var h=F(655),j=F(576);function P(le){return(0,h.FC)(this,arguments,function*(){const ue=le.getReader();try{for(;;){const{value:fe,done:_e}=yield(0,h.qq)(ue.read());if(_e)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(fe)}}finally{ue.releaseLock()}})}function oe(le){return(0,j.m)(le?.getReader)}},3532:(dt,Se,F)=>{F.d(Se,{K:()=>j});var h=F(576);function j(P){return P&&(0,h.m)(P.schedule)}},4482:(dt,Se,F)=>{F.d(Se,{A:()=>j,e:()=>P});var h=F(576);function j(oe){return(0,h.m)(oe?.lift)}function P(oe){return le=>{if(j(le))return le.lift(function(ye){try{return oe(ye,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(dt,Se,F)=>{function h(){}F.d(Se,{Z:()=>h})},9635:(dt,Se,F)=>{F.d(Se,{U:()=>P,z:()=>j});var h=F(4671);function j(...oe){return P(oe)}function P(oe){return 0===oe.length?h.y:1===oe.length?oe[0]:function(ye){return oe.reduce((ue,fe)=>fe(ue),ye)}}},7849:(dt,Se,F)=>{F.d(Se,{h:()=>P});var h=F(2416),j=F(3410);function P(oe){j.z.setTimeout(()=>{const{onUnhandledError:le}=h.v;if(!le)throw oe;le(oe)})}},4532:(dt,Se,F)=>{function h(j){return new TypeError(`You provided ${null!==j&&"object"==typeof j?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Se,{z:()=>h})},655:(dt,Se,F)=>{function oe(X,ee){var pe={};for(var ae in X)Object.prototype.hasOwnProperty.call(X,ae)&&ee.indexOf(ae)<0&&(pe[ae]=X[ae]);if(null!=X&&"function"==typeof Object.getOwnPropertySymbols){var Be=0;for(ae=Object.getOwnPropertySymbols(X);Be<ae.length;Be++)ee.indexOf(ae[Be])<0&&Object.prototype.propertyIsEnumerable.call(X,ae[Be])&&(pe[ae[Be]]=X[ae[Be]])}return pe}function fe(X,ee,pe,ae){return new(pe||(pe=Promise))(function(je,vt){function tn(un){try{Ze(ae.next(un))}catch(wn){vt(wn)}}function $t(un){try{Ze(ae.throw(un))}catch(wn){vt(wn)}}function Ze(un){un.done?je(un.value):function Be(je){return je instanceof pe?je:new pe(function(vt){vt(je)})}(un.value).then(tn,$t)}Ze((ae=ae.apply(X,ee||[])).next())})}function we(X){return this instanceof we?(this.v=X,this):new we(X)}function ge(X,ee,pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Be,ae=pe.apply(X,ee||[]),je=[];return Be={},vt("next"),vt("throw"),vt("return"),Be[Symbol.asyncIterator]=function(){return this},Be;function vt(Jt){ae[Jt]&&(Be[Jt]=function(en){return new Promise(function(zt,Lt){je.push([Jt,en,zt,Lt])>1||tn(Jt,en)})})}function tn(Jt,en){try{!function $t(Jt){Jt.value instanceof we?Promise.resolve(Jt.value.v).then(Ze,un):wn(je[0][2],Jt)}(ae[Jt](en))}catch(zt){wn(je[0][3],zt)}}function Ze(Jt){tn("next",Jt)}function un(Jt){tn("throw",Jt)}function wn(Jt,en){Jt(en),je.shift(),je.length&&tn(je[0][0],je[0][1])}}function Xe(X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,ee=X[Symbol.asyncIterator];return ee?ee.call(X):(X=function J(X){var ee="function"==typeof Symbol&&Symbol.iterator,pe=ee&&X[ee],ae=0;if(pe)return pe.call(X);if(X&&"number"==typeof X.length)return{next:function(){return X&&ae>=X.length&&(X=void 0),{value:X&&X[ae++],done:!X}}};throw new TypeError(ee?"Object is not iterable.":"Symbol.iterator is not defined.")}(X),pe={},ae("next"),ae("throw"),ae("return"),pe[Symbol.asyncIterator]=function(){return this},pe);function ae(je){pe[je]=X[je]&&function(vt){return new Promise(function(tn,$t){!function Be(je,vt,tn,$t){Promise.resolve($t).then(function(Ze){je({value:Ze,done:tn})},vt)}(tn,$t,(vt=X[je](vt)).done,vt.value)})}}}F.d(Se,{FC:()=>ge,KL:()=>Xe,_T:()=>oe,mG:()=>fe,qq:()=>we})},4650:(dt,Se,F)=>{F.d(Se,{$8M:()=>iu,$Z:()=>lE,AFp:()=>g0,AaK:()=>fe,BQk:()=>ag,CRH:()=>Qb,CZH:()=>Zg,CqO:()=>u_,D6c:()=>vv,EJc:()=>Rt,F4k:()=>ug,FYo:()=>Tc,FiY:()=>xe,G48:()=>Ul,Gf:()=>_d,GfV:()=>Mw,Gpc:()=>G,JOm:()=>ko,LFG:()=>Nn,LSH:()=>Km,Lbi:()=>TM,Lck:()=>hd,MAs:()=>sg,MMx:()=>fd,NdJ:()=>l_,OlP:()=>In,Oqu:()=>ab,PXZ:()=>em,Q6J:()=>Vh,QGY:()=>Hh,QP$:()=>Fe,QbO:()=>Bt,Qsj:()=>oI,R0b:()=>Ri,RDi:()=>oh,Rgc:()=>cf,SBq:()=>gu,Sil:()=>Ye,Suo:()=>vd,TTD:()=>ss,TgZ:()=>Bh,W1O:()=>Q_,X6Q:()=>rm,XFs:()=>Je,Xpm:()=>De,Xts:()=>gw,Y36:()=>Uc,YKP:()=>xb,YNc:()=>Jc,Yjl:()=>U,Yz7:()=>en,Z0I:()=>bi,ZZ4:()=>zo,_Bn:()=>rf,_UZ:()=>jh,_Vd:()=>Da,_c5:()=>F0,_uU:()=>DD,aQg:()=>cm,c2e:()=>Cd,cJS:()=>Lt,cg1:()=>ub,dDg:()=>xS,dqk:()=>Tt,eFA:()=>Oi,ekj:()=>nb,eoX:()=>Ou,f3M:()=>ml,g9A:()=>y0,h0i:()=>dd,hGG:()=>_v,hij:()=>v_,iGM:()=>K_,ifc:()=>yt,ip1:()=>p0,jDz:()=>pd,kL8:()=>WD,lG2:()=>Y,lqb:()=>El,lri:()=>Id,n5z:()=>cs,oAB:()=>Yt,oxw:()=>HE,q4F:()=>bl,qLn:()=>Mo,qOj:()=>Ws,qZA:()=>Uh,rWj:()=>Va,sBO:()=>S0,sIi:()=>Ph,s_b:()=>ff,soG:()=>On,tb:()=>_0,tp0:()=>_t,uIk:()=>qc,vHH:()=>Ie,vpe:()=>Ks,wAp:()=>St,xp6:()=>sE,ynx:()=>og,z2F:()=>nm,zSh:()=>Iw,zs3:()=>Tl});var h=F(7579),j=F(727),P=F(9751),oe=F(6451),le=F(3099);function ye(s){for(let o in s)if(s[o]===ye)return o;throw Error("Could not find renamed property on target object.")}function ue(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function fe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(fe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function _e(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const z=ye({__forward_ref__:ye});function G(s){return s.__forward_ref__=G,s.toString=function(){return fe(this())},s}function J(s){return $e(s)?s():s}function $e(s){return"function"==typeof s&&s.hasOwnProperty(z)&&s.__forward_ref__===G}class Ie extends Error{constructor(o,a){super(function st(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function we(s){return"string"==typeof s?s:null==s?"":String(s)}function ke(s,o){throw new Ie(-201,!1)}function $t(s,o){null==s&&function Ze(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function en(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Lt(s){return{providers:s.providers||[],imports:s.imports||[]}}function _r(s){return Tr(s,Ar)||Tr(s,mi)}function bi(s){return null!==_r(s)}function Tr(s,o){return s.hasOwnProperty(o)?s[o]:null}function Li(s){return s&&(s.hasOwnProperty(Un)||s.hasOwnProperty(Vi))?s[Un]:null}const Ar=ye({\u0275prov:ye}),Un=ye({\u0275inj:ye}),mi=ye({ngInjectableDef:ye}),Vi=ye({ngInjectorDef:ye});var Je=(()=>((Je=Je||{})[Je.Default=0]="Default",Je[Je.Host=1]="Host",Je[Je.Self=2]="Self",Je[Je.SkipSelf=4]="SkipSelf",Je[Je.Optional=8]="Optional",Je))();let Kn;function yn(s){const o=Kn;return Kn=s,o}function fr(s,o,a){const l=_r(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Je.Optional?null:void 0!==o?o:void ke(fe(s))}function En(s){return{toString:s}.toString()}var bn=(()=>((bn=bn||{})[bn.OnPush=0]="OnPush",bn[bn.Default=1]="Default",bn))(),yt=(()=>{return(s=yt||(yt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",yt;var s})();const Tt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),vr={},Dt=[],xr=ye({\u0275cmp:ye}),Ft=ye({\u0275dir:ye}),Jr=ye({\u0275pipe:ye}),Zt=ye({\u0275mod:ye}),sr=ye({\u0275fac:ye}),Sn=ye({__NG_ELEMENT_ID__:ye});let nt=0;function De(s){return En(()=>{const a=!0===s.standalone,l={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===bn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Dt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||yt.Emulated,id:"c"+nt++,styles:s.styles||Dt,_:null,setInput:null,schemas:s.schemas||null,tView:null},f=s.dependencies,y=s.features;return d.inputs=$(s.inputs,l),d.outputs=$(s.outputs),y&&y.forEach(w=>w(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(bt).filter(It):null,d.pipeDefs=f?()=>("function"==typeof f?f():f).map(re).filter(It):null,d})}function bt(s){return O(s)||V(s)}function It(s){return null!==s}function Yt(s){return En(()=>({type:s.type,bootstrap:s.bootstrap||Dt,declarations:s.declarations||Dt,imports:s.imports||Dt,exports:s.exports||Dt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function $(s,o){if(null==s)return vr;const a={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=l,o&&(o[d]=f)}return a}const Y=De;function U(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function O(s){return s[xr]||null}function V(s){return s[Ft]||null}function re(s){return s[Jr]||null}function Fe(s){const o=O(s)||V(s)||re(s);return null!==o&&o.standalone}function at(s,o){const a=s[Zt]||null;if(!a&&!0===o)throw new Error(`Type ${fe(s)} does not have '\u0275mod' property.`);return a}function Qn(s){return Array.isArray(s)&&"object"==typeof s[1]}function ti(s){return Array.isArray(s)&&!0===s[1]}function eo(s){return 0!=(8&s.flags)}function Wu(s){return 2==(2&s.flags)}function Zo(s){return 1==(1&s.flags)}function Ur(s){return null!==s.template}function qu(s){return 0!=(256&s[2])}function gr(s,o){return s.hasOwnProperty(sr)?s[sr]:null}class io{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function ss(){return Xl}function Xl(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ku),Wa}function Wa(){const s=so(this),o=s?.current;if(o){const a=s.previous;if(a===vr)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function Ku(s,o,a,l){const d=so(s)||function ec(s,o){return s[Jl]=o}(s,{previous:vr,current:null}),f=d.current||(d.current={}),y=d.previous,w=this.declaredInputs[a],C=y[w];f[w]=new io(C&&C.currentValue,o,y===vr),s[l]=o}ss.ngInherit=!0;const Jl="__ngSimpleChanges__";function so(s){return s[Jl]||null}function Pn(s){for(;Array.isArray(s);)s=s[0];return s}function yi(s,o){return Pn(o[s])}function mr(s,o){return Pn(o[s.index])}function Os(s,o){return s.data[o]}function nn(s,o){const a=o[s];return Qn(a)?a:a[0]}function os(s){return 64==(64&s[2])}function si(s,o){return null==o?null:s[o]}function Qo(s){s[18]=0}function Ln(s,o){s[5]+=o;let a=s,l=s[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const Ot={lFrame:ua(null),bindingsEnabled:!0};function ks(){return Ot.bindingsEnabled}function Re(){return Ot.lFrame.lView}function Wt(){return Ot.lFrame.tView}function Xn(){let s=uo();for(;null!==s&&64===s.type;)s=s.parent;return s}function uo(){return Ot.lFrame.currentTNode}function Mr(s,o){const a=Ot.lFrame;a.currentTNode=s,a.isParent=o}function Ka(){return Ot.lFrame.isParent}function lo(){Ot.lFrame.isParent=!1}function sa(){return Ot.lFrame.bindingIndex++}function ic(s,o){const a=Ot.lFrame;a.bindingIndex=a.bindingRootIndex=s,co(o)}function co(s){Ot.lFrame.currentDirectiveIndex=s}function oa(){return Ot.lFrame.currentQueryIndex}function tl(s){Ot.lFrame.currentQueryIndex=s}function aa(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function sc(s,o,a){if(a&Je.SkipSelf){let d=o,f=s;for(;!(d=d.parent,null!==d||a&Je.Host||(d=aa(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;o=d,s=f}const l=Ot.lFrame=Wd();return l.currentTNode=o,l.lView=s,!0}function ho(s){const o=Wd(),a=s[1];Ot.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Wd(){const s=Ot.lFrame,o=null===s?null:s.child;return null===o?ua(s):o}function ua(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function qd(){const s=Ot.lFrame;return Ot.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const oc=qd;function as(){const s=qd();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Mn(){return Ot.lFrame.selectedIndex}function Gi(s){Ot.lFrame.selectedIndex=s}function Rn(){const s=Ot.lFrame;return Os(s.tView,s.selectedIndex)}function Ya(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const f=s.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:C,ngAfterViewChecked:S,ngOnDestroy:k}=f;y&&(s.contentHooks||(s.contentHooks=[])).push(-a,y),w&&((s.contentHooks||(s.contentHooks=[])).push(a,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,w)),C&&(s.viewHooks||(s.viewHooks=[])).push(-a,C),S&&((s.viewHooks||(s.viewHooks=[])).push(a,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,S)),null!=k&&(s.destroyHooks||(s.destroyHooks=[])).push(a,k)}}function fo(s,o,a){go(s,o,3,a)}function po(s,o,a,l){(3&s[2])===a&&go(s,o,a,l)}function lc(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function go(s,o,a,l){const f=l??-1,y=o.length-1;let w=0;for(let C=void 0!==l?65535&s[18]:0;C<y;C++)if("number"==typeof o[C+1]){if(w=o[C],null!=l&&w>=l)break}else o[C]<0&&(s[18]+=65536),(w<f||-1==f)&&(cc(s,a,o,C),s[18]=(4294901760&s[18])+C+2),C++}function cc(s,o,a,l){const d=a[l]<0,f=a[l+1],w=s[d?-a[l]:a[l]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{f.call(w)}finally{}}}else try{f.call(w)}finally{}}class oi{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Wi(s,o,a){let l=0;for(;l<a.length;){const d=a[l];if("number"==typeof d){if(0!==d)break;l++;const f=a[l++],y=a[l++],w=a[l++];s.setAttribute(o,y,w,f)}else{const f=d,y=a[++l];al(f)?s.setProperty(o,f,y):s.setAttribute(o,f,y),l++}}return l}function la(s){return 3===s||4===s||6===s}function al(s){return 64===s.charCodeAt(0)}function ca(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||hc(s,a,d,null,-1===a||2===a?o[++l]:null)}}return s}function hc(s,o,a,l,d){let f=0,y=s.length;if(-1===o)y=-1;else for(;f<s.length;){const w=s[f++];if("number"==typeof w){if(w===o){y=-1;break}if(w>o){y=f-1;break}}}for(;f<s.length;){const w=s[f];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==d&&(s[f+1]=d));if(l===s[f+1])return void(s[f+2]=d)}f++,null!==l&&f++,null!==d&&f++}-1!==y&&(s.splice(y,0,o),f=y+1),s.splice(f++,0,a),null!==l&&s.splice(f++,0,l),null!==d&&s.splice(f++,0,d)}function Yd(s){return-1!==s}function er(s){return 32767&s}function ls(s,o){let a=function Qd(s){return s>>16}(s),l=o;for(;a>0;)l=l[15],a--;return l}let ul=!0;function da(s){const o=ul;return ul=s,o}let fc=0;const $r={};function qi(s,o){const a=tu(s,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,ll(l.data,s),ll(o,null),ll(l.blueprint,null));const d=ha(s,o),f=s.injectorIndex;if(Yd(d)){const y=er(d),w=ls(d,o),C=w[1].data;for(let S=0;S<8;S++)o[f+S]=w[y+S]|C[y+S]}return o[f+8]=d,f}function ll(s,o){s.push(0,0,0,0,0,0,0,0,o)}function tu(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function ha(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){if(l=Co(d),null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Ns(s,o,a){!function pc(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Sn)&&(l=a[Sn]),null==l&&(l=a[Sn]=fc++);const d=255&l;o.data[s+(d>>5)]|=1<<d}(s,o,a)}function yo(s,o,a){if(a&Je.Optional||void 0!==s)return s;ke()}function _o(s,o,a,l){if(a&Je.Optional&&void 0===l&&(l=null),0==(a&(Je.Self|Je.Host))){const d=s[9],f=yn(void 0);try{return d?d.get(o,l,a&Je.Optional):fr(o,l,a&Je.Optional)}finally{yn(f)}}return yo(l,0,a)}function vo(s,o,a,l=Je.Default,d){if(null!==s){if(1024&o[2]){const y=function eh(s,o,a,l,d){let f=s,y=o;for(;null!==f&&null!==y&&1024&y[2]&&!(256&y[2]);){const w=gc(f,y,a,l|Je.Self,$r);if(w!==$r)return w;let C=f.parent;if(!C){const S=y[21];if(S){const k=S.get(a,$r,l);if(k!==$r)return k}C=Co(y),y=y[15]}f=C}return d}(s,o,a,l,$r);if(y!==$r)return y}const f=gc(s,o,a,l,$r);if(f!==$r)return f}return _o(o,a,l,d)}function gc(s,o,a,l,d){const f=function Jd(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Sn)?s[Sn]:void 0;return"number"==typeof o?o>=0?255&o:cl:o}(a);if("function"==typeof f){if(!sc(o,s,l))return l&Je.Host?yo(d,0,l):_o(o,a,l,d);try{const y=f(l);if(null!=y||l&Je.Optional)return y;ke()}finally{oc()}}else if("number"==typeof f){let y=null,w=tu(s,o),C=-1,S=l&Je.Host?o[16][6]:null;for((-1===w||l&Je.SkipSelf)&&(C=-1===w?ha(s,o):o[w+8],-1!==C&&ru(l,!1)?(y=o[1],w=er(C),o=ls(C,o)):w=-1);-1!==w;){const k=o[1];if(wo(f,w,k.data)){const L=nu(w,o,a,y,l,S);if(L!==$r)return L}C=o[w+8],-1!==C&&ru(l,o[1].data[w+8]===S)&&wo(f,w,o)?(y=k,w=er(C),o=ls(C,o)):w=-1}}return d}function nu(s,o,a,l,d,f){const y=o[1],w=y.data[s+8],k=pa(w,y,a,null==l?Wu(w)&&ul:l!=y&&0!=(3&w.type),d&Je.Host&&f===w);return null!==k?Di(o,y,k,w):$r}function pa(s,o,a,l,d){const f=s.providerIndexes,y=o.data,w=1048575&f,C=s.directiveStart,k=f>>20,q=d?w+k:s.directiveEnd;for(let ie=l?w:w+k;ie<q;ie++){const be=y[ie];if(ie<C&&a===be||ie>=C&&be.type===a)return ie}if(d){const ie=y[C];if(ie&&Ur(ie)&&ie.type===a)return C}return null}function Di(s,o,a,l){let d=s[a];const f=o.data;if(function ol(s){return s instanceof oi}(d)){const y=d;y.resolving&&function tt(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ie(-200,`Circular dependency in DI detected for ${s}${a}`)}(function ge(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():we(s)}(f[a]));const w=da(y.canSeeViewProviders);y.resolving=!0;const C=y.injectImpl?yn(y.injectImpl):null;sc(s,l,Je.Default);try{d=s[a]=y.factory(void 0,f,s,l),o.firstCreatePass&&a>=l.directiveStart&&function sl(s,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(l){const y=Xl(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,y)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,f))}(a,f[a],o)}finally{null!==C&&yn(C),da(w),y.resolving=!1,oc()}}return d}function wo(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function ru(s,o){return!(s&Je.Self||s&Je.Host&&o)}class Eo{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return vo(this._tNode,this._lView,o,l,a)}}function cl(){return new Eo(Xn(),Re())}function cs(s){return En(()=>{const o=s.prototype.constructor,a=o[sr]||bo(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const f=d[sr]||bo(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function bo(s){return $e(s)?()=>{const o=bo(J(s));return o&&o()}:gr(s)}function Co(s){const o=s[1],a=o.type;return 2===a?o.declTNode:1===a?s[6]:null}function iu(s){return function fa(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const f=a[d];if(la(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(f===o)return a[d+1];d+=2}}}return null}(Xn(),s)}const Io="__parameters__";function So(s,o,a){return En(()=>{const l=function dl(s){return function(...a){if(s){const l=s(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...f){if(this instanceof d)return l.apply(this,f),this;const y=new d(...f);return w.annotation=y,w;function w(C,S,k){const L=C.hasOwnProperty(Io)?C[Io]:Object.defineProperty(C,Io,{value:[]})[Io];for(;L.length<=k;)L.push(null);return(L[k]=L[k]||[]).push(y),C}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class In{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=en({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Rr(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let l=s[a];Array.isArray(l)?(o===s&&(o=s.slice(0,a)),Rr(l,o)):o!==s&&o.push(l)}return o}function Zi(s,o){s.forEach(a=>Array.isArray(a)?Zi(a,o):o(a))}function Ls(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function _n(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function on(s,o,a){let l=tr(s,o);return l>=0?s[1|l]=a:(l=~l,function Dn(s,o,a,l){let d=s.length;if(d==o)s.push(a,l);else if(1===d)s.push(l,s[0]),s[0]=a;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=a,s[o+1]=l}}(s,l,o,a)),l}function fl(s,o){const a=tr(s,o);if(a>=0)return s[1|a]}function tr(s,o){return function ou(s,o,a){let l=0,d=s.length>>a;for(;d!==l;){const f=l+(d-l>>1),y=s[f<<a];if(o===y)return f<<a;y>o?d=f:l=f+1}return~(d<<a)}(s,o,1)}const Ai={},ya="__NG_DI_FLAG__",xi="ngTempTokenPath",Yi=/\n/gm,Qi="__source";let _a;function va(s){const o=_a;return _a=s,o}function _c(s,o=Je.Default){if(void 0===_a)throw new Ie(-203,!1);return null===_a?fr(s,void 0,o):_a.get(s,o&Je.Optional?null:void 0,o)}function Nn(s,o=Je.Default){return(function jn(){return Kn}()||_c)(J(s),o)}function ml(s,o=Je.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),Nn(s,o)}function I(s){const o=[];for(let a=0;a<s.length;a++){const l=J(s[a]);if(Array.isArray(l)){if(0===l.length)throw new Ie(900,!1);let d,f=Je.Default;for(let y=0;y<l.length;y++){const w=l[y],C=R(w);"number"==typeof C?-1===C?d=w.token:f|=C:d=w}o.push(Nn(d,f))}else o.push(Nn(l))}return o}function D(s,o){return s[ya]=o,s.prototype[ya]=o,s}function R(s){return s[ya]}const xe=D(So("Optional"),8),_t=D(So("SkipSelf"),4);let sh;function oh(s){sh=s}class Gm{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ao(s){return s instanceof Gm?s.changingThisBreaksApplicationSecurity:s}const g=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var qn=(()=>((qn=qn||{})[qn.NONE=0]="NONE",qn[qn.HTML=1]="HTML",qn[qn.STYLE=2]="STYLE",qn[qn.SCRIPT=3]="SCRIPT",qn[qn.URL=4]="URL",qn[qn.RESOURCE_URL=5]="RESOURCE_URL",qn))();function Km(s){const o=function gp(){const s=Re();return s&&s[12]}();return o?o.sanitize(qn.URL,s)||"":function Ia(s,o){const a=function qm(s){return s instanceof Gm&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?Ao(s):function m(s){return(s=String(s)).match(g)?s:"unsafe:"+s}(we(s))}const gw=new In("ENVIRONMENT_INITIALIZER"),mw=new In("INJECTOR",-1),qC=new In("INJECTOR_DEF_TYPES");class ZC{get(o,a=Ai){if(a===Ai){const l=new Error(`NullInjectorError: No provider for ${fe(o)}!`);throw l.name="NullInjectorError",l}return a}}function yw(...s){return{\u0275providers:_w(0,s)}}function _w(s,...o){const a=[],l=new Set;let d;return Zi(o,f=>{const y=f;Cc(y,a,[],l)&&(d||(d=[]),d.push(y))}),void 0!==d&&vw(d,a),a}function vw(s,o){for(let a=0;a<s.length;a++){const{providers:d}=s[a];Zi(d,f=>{o.push(f)})}}function Cc(s,o,a,l){if(!(s=J(s)))return!1;let d=null,f=Li(s);const y=!f&&O(s);if(f||y){if(y&&!y.standalone)return!1;d=s}else{const C=s.ngModule;if(f=Li(C),!f)return!1;d=C}const w=l.has(d);if(y){if(w)return!1;if(l.add(d),y.dependencies){const C="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const S of C)Cc(S,o,a,l)}}else{if(!f)return!1;{if(null!=f.imports&&!w){let S;l.add(d);try{Zi(f.imports,k=>{Cc(k,o,a,l)&&(S||(S=[]),S.push(k))})}finally{}void 0!==S&&vw(S,o)}if(!w){const S=gr(d)||(()=>new d);o.push({provide:d,useFactory:S,deps:Dt},{provide:qC,useValue:d,multi:!0},{provide:gw,useValue:()=>Nn(d),multi:!0})}const C=f.providers;null==C||w||Zi(C,k=>{o.push(k)})}}return d!==s&&void 0!==s.providers}const Ew=ye({provide:String,useValue:ye});function Qm(s){return null!==s&&"object"==typeof s&&Ew in s}function pu(s){return"function"==typeof s}const Iw=new In("Set Injector scope."),Xm={},Dw={};let Jm;function mp(){return void 0===Jm&&(Jm=new ZC),Jm}class El{}class ph extends El{constructor(o,a,l,d){super(),this.parent=a,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Dc(o,y=>this.processProvider(y)),this.records.set(mw,Ic(void 0,this)),d.has("environment")&&this.records.set(El,Ic(void 0,this));const f=this.records.get(Iw);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(qC.multi,Dt,Je.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=va(this),l=yn(void 0);try{return o()}finally{va(a),yn(l)}}get(o,a=Ai,l=Je.Default){this.assertNotDestroyed();const d=va(this),f=yn(void 0);try{if(!(l&Je.SkipSelf)){let w=this.records.get(o);if(void 0===w){const C=function _x(s){return"function"==typeof s||"object"==typeof s&&s instanceof In}(o)&&_r(o);w=C&&this.injectableDefInScope(C)?Ic(Sw(o),Xm):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(l&Je.Self?mp():this.parent).get(o,a=l&Je.Optional&&a===Ai?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[xi]=y[xi]||[]).unshift(fe(o)),d)throw y;return function B(s,o,a,l){const d=s[xi];throw o[Qi]&&d.unshift(o[Qi]),s.message=function Q(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=fe(o);if(Array.isArray(o))d=o.map(fe).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let w=o[y];f.push(y+":"+("string"==typeof w?JSON.stringify(w):fe(w)))}d=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${s.replace(Yi,"\n  ")}`}("\n"+s.message,d,a,l),s.ngTokenPath=d,s[xi]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{yn(f),va(d)}}resolveInjectorInitializers(){const o=va(this),a=yn(void 0);try{const l=this.get(gw.multi,Dt,Je.Self);for(const d of l)d()}finally{va(o),yn(a)}}toString(){const o=[],a=this.records;for(const l of a.keys())o.push(fe(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ie(205,!1)}processProvider(o){let a=pu(o=J(o))?o:J(o&&o.provide);const l=function yx(s){return Qm(s)?Ic(void 0,s.useValue):Ic(YC(s),Xm)}(o);if(pu(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Ic(void 0,Xm,!0),d.factory=()=>I(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,l)}hydrate(o,a){return a.value===Xm&&(a.value=Dw,a.value=a.factory()),"object"==typeof a.value&&a.value&&function XC(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=J(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Sw(s){const o=_r(s),a=null!==o?o.factory:gr(s);if(null!==a)return a;if(s instanceof In)throw new Ie(204,!1);if(s instanceof Function)return function KC(s){const o=s.length;if(o>0)throw function Ti(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}(o,"?"),new Ie(204,!1);const a=function kn(s){const o=s&&(s[Ar]||s[mi]);if(o){const a=function Fi(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new Ie(204,!1)}function YC(s,o,a){let l;if(pu(s)){const d=J(s);return gr(d)||Sw(d)}if(Qm(s))l=()=>J(s.useValue);else if(function fu(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...I(s.deps||[]));else if(function bw(s){return!(!s||!s.useExisting)}(s))l=()=>Nn(J(s.useExisting));else{const d=J(s&&(s.useClass||s.provide));if(!function QC(s){return!!s.deps}(s))return gr(d)||Sw(d);l=()=>new d(...I(s.deps))}return l}function Ic(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function JC(s){return!!s.\u0275providers}function Dc(s,o){for(const a of s)Array.isArray(a)?Dc(a,o):JC(a)?Dc(a.\u0275providers,o):o(a)}class Tw{}class rI{resolveComponentFactory(o){throw function tI(s){const o=Error(`No component factory found for ${fe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Da=(()=>{class s{}return s.NULL=new rI,s})();function xw(){return Sc(Xn(),Re())}function Sc(s,o){return new gu(mr(s,o))}let gu=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=xw,s})();function iI(s){return s instanceof gu?s.nativeElement:s}class Tc{}let oI=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function yp(){const s=Re(),a=nn(Xn().index,s);return(Qn(a)?a:s)[11]}(),s})(),ey=(()=>{class s{}return s.\u0275prov=en({token:s,providedIn:"root",factory:()=>null}),s})();class Mw{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const bl=new Mw("14.2.2"),gh={};function ry(s){return s.ngOriginalError}class Mo{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&ry(o);for(;a&&ry(a);)a=ry(a);return a||null}}const Oo=new Map;let sy=0;const Ep="__ngContext__";function Cr(s,o){Qn(o)?(s[Ep]=o[20],function dI(s){Oo.set(s[20],s)}(o)):s[Ep]=o}function fs(s){return s instanceof Function?s():s}var ko=(()=>((ko=ko||{})[ko.Important=1]="Important",ko[ko.DashCase=2]="DashCase",ko))();function fy(s,o){return undefined(s,o)}function Eu(s){const o=s[3];return ti(o)?o[3]:o}function wh(s){return zw(s[13])}function Hw(s){return zw(s[4])}function zw(s){for(;null!==s&&!ti(s);)s=s[4];return s}function Ac(s,o,a,l,d){if(null!=l){let f,y=!1;ti(l)?f=l:Qn(l)&&(y=!0,l=l[0]);const w=Pn(l);0===s&&null!==a?null==d?Dp(o,a,w):wi(o,a,w,d||null,!0):1===s&&null!==a?wi(o,a,w,d||null,!0):2===s?function Ey(s,o,a){const l=Tp(s,o);l&&function Sp(s,o,a,l){s.removeChild(o,a,l)}(s,l,o,a)}(o,w,y):3===s&&o.destroyNode(w),null!=f&&function Sa(s,o,a,l,d){const f=a[7];f!==Pn(a)&&Ac(o,s,l,f,d);for(let w=10;w<a.length;w++){const C=a[w];kc(C[1],C,s,o,l,f)}}(o,s,f,a,d)}}function Ip(s,o,a){return s.createElement(o,a)}function Zw(s,o){const a=s[9],l=a.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,Ln(d,-1)),a.splice(l,1)}function Eh(s,o){if(s.length<=10)return;const a=10+o,l=s[a];if(l){const d=l[17];null!==d&&d!==s&&Zw(d,l),o>0&&(s[a-1][4]=l[4]);const f=_n(s,10+o);!function Gw(s,o){kc(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const y=f[19];null!==y&&y.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function Oc(s,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&kc(s,o,a,3,null,null),function _I(s){let o=s[13];if(!o)return gy(s[1],s);for(;o;){let a=null;if(Qn(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==s;)Qn(o)&&gy(o[1],o),o=o[3];null===o&&(o=s),Qn(o)&&gy(o[1],o),a=o&&o[4]}o=a}}(o)}}function gy(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function wI(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof oi)){const f=a[l+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const w=d[f[y]],C=f[y+1];try{C.call(w)}finally{}}else try{f.call(d)}finally{}}}}(s,o),function my(s,o){const a=s.cleanup,l=o[7];let d=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+1],w="function"==typeof y?y(o):Pn(o[y]),C=l[d=a[f+2]],S=a[f+3];"boolean"==typeof S?w.removeEventListener(a[f],C,S):S>=0?l[d=S]():l[d=-S].unsubscribe(),f+=2}else{const y=l[d=a[f+1]];a[f].call(y)}if(null!==l){for(let f=d+1;f<l.length;f++)(0,l[f])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&ti(o[3])){a!==o[3]&&Zw(a,o);const l=o[19];null!==l&&l.detachView(s)}!function Fw(s){Oo.delete(s[20])}(o)}}function yy(s,o,a){return function _y(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=s.data[l.directiveStart].encapsulation;if(d===yt.None||d===yt.Emulated)return null}return mr(l,a)}(s,o.parent,a)}function wi(s,o,a,l,d){s.insertBefore(o,a,l,d)}function Dp(s,o,a){s.appendChild(o,a)}function bu(s,o,a,l,d){null!==l?wi(s,o,a,l,d):Dp(s,o,a)}function Tp(s,o){return s.parentNode(o)}let Qw=function Yw(s,o,a){return 40&s.type?mr(s,a):null};function Ap(s,o,a,l){const d=yy(s,l,o),f=o[11],w=function Kw(s,o,a){return Qw(s,o,a)}(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let C=0;C<a.length;C++)bu(f,d,a[C],w,!1);else bu(f,d,a,w,!1)}function xp(s,o){if(null!==o){const a=o.type;if(3&a)return mr(o,s);if(4&a)return wy(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return xp(s,l);{const d=s[o.index];return ti(d)?wy(-1,d):Pn(d)}}if(32&a)return fy(o,s)()||Pn(s[o.index]);{const l=Jw(s,o);return null!==l?Array.isArray(l)?l[0]:xp(Eu(s[16]),l):xp(s,o.next)}}return null}function Jw(s,o){return null!==o?s[16][6].projection[o.projection]:null}function wy(s,o){const a=10+s+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return xp(l,d)}return o[7]}function by(s,o,a,l,d,f,y){for(;null!=a;){const w=l[a.index],C=a.type;if(y&&0===o&&(w&&Cr(Pn(w),l),a.flags|=4),64!=(64&a.flags))if(8&C)by(s,o,a.child,l,d,f,!1),Ac(o,s,d,w,f);else if(32&C){const S=fy(a,l);let k;for(;k=S();)Ac(o,s,d,k,f);Ac(o,s,d,w,f)}else 16&C?Mp(s,o,l,a,d,f):Ac(o,s,d,w,f);a=y?a.projectionNext:a.next}}function kc(s,o,a,l,d,f){by(a,l,s.firstChild,o,d,f,!1)}function Mp(s,o,a,l,d,f){const y=a[16],C=y[6].projection[l.projection];if(Array.isArray(C))for(let S=0;S<C.length;S++)Ac(o,s,d,C[S],f);else by(s,o,C,y[3],d,f,!0)}function Iy(s,o,a){s.setAttribute(o,"style",a)}function Rp(s,o,a){""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a)}function eE(s,o,a){let l=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const f=o.length;if(d+f===l||s.charCodeAt(d+f)<=32)return d}a=d+1}}const Dy="ng-template";function CI(s,o,a){let l=0;for(;l<s.length;){let d=s[l++];if(a&&"class"===d){if(d=s[l],-1!==eE(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<s.length&&"string"==typeof(d=s[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function bh(s){return 4===s.type&&s.value!==Dy}function tE(s,o,a){return o===(4!==s.type||a?s.value:Dy)}function Sy(s,o,a){let l=4;const d=s.attrs||[],f=function Ch(s){for(let o=0;o<s.length;o++)if(la(s[o]))return o;return s.length}(d);let y=!1;for(let w=0;w<o.length;w++){const C=o[w];if("number"!=typeof C){if(!y)if(4&l){if(l=2|1&l,""!==C&&!tE(s,C,a)||""===C&&1===o.length){if(ps(l))return!1;y=!0}}else{const S=8&l?C:o[++w];if(8&l&&null!==s.attrs){if(!CI(s.attrs,S,a)){if(ps(l))return!1;y=!0}continue}const L=Ty(8&l?"class":C,d,bh(s),a);if(-1===L){if(ps(l))return!1;y=!0;continue}if(""!==S){let q;q=L>f?"":d[L+1].toLowerCase();const ie=8&l?q:null;if(ie&&-1!==eE(ie,S,0)||2&l&&S!==q){if(ps(l))return!1;y=!0}}}}else{if(!y&&!ps(l)&&!ps(C))return!1;if(y&&ps(C))continue;y=!1,l=C|1&l}}return ps(l)||y}function ps(s){return 0==(1&s)}function Ty(s,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let f=!1;for(;d<o.length;){const y=o[d];if(y===s)return d;if(3===y||6===y)f=!0;else{if(1===y||2===y){let w=o[++d];for(;"string"==typeof w;)w=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=f?1:2}return-1}return function DI(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function Op(s,o,a=!1){for(let l=0;l<o.length;l++)if(Sy(s,o[l],a))return!0;return!1}function kp(s,o){return s?":not("+o.trim()+")":o}function nE(s){let o=s[0],a=1,l=2,d="",f=!1;for(;a<s.length;){let y=s[a];if("string"==typeof y)if(2&l){const w=s[++a];d+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?d+="."+y:4&l&&(d+=" "+y);else""!==d&&!ps(y)&&(o+=kp(f,d),d=""),l=y,f=f||!ps(l);a++}return""!==d&&(o+=kp(f,d)),o}const Vt={};function sE(s){Nc(Wt(),Re(),Mn()+s,!1)}function Nc(s,o,a,l){if(!l)if(3==(3&o[2])){const f=s.preOrderCheckHooks;null!==f&&fo(o,f,a)}else{const f=s.preOrderHooks;null!==f&&po(o,f,0,a)}Gi(a)}function AI(s,o=null,a=null,l){const d=Pp(s,o,a,l);return d.resolveInjectorInitializers(),d}function Pp(s,o=null,a=null,l,d=new Set){const f=[a||Dt,yw(s)];return l=l||("object"==typeof s?void 0:fe(s)),new ph(f,o||mp(),l||null,d)}let Tl=(()=>{class s{static create(a,l){if(Array.isArray(a))return AI({name:""},l,a,"");{const d=a.name??"";return AI({name:d},a.parent,a.providers,d)}}}return s.THROW_IF_NOT_FOUND=Ai,s.NULL=new ZC,s.\u0275prov=en({token:s,providedIn:"any",factory:()=>Nn(mw)}),s.__NG_ELEMENT_ID__=-1,s})();function Uc(s,o=Je.Default){const a=Re();return null===a?Nn(s,o):vo(Xn(),a,J(s),o)}function lE(){throw new Error("invalid")}function Lp(s,o){return s<<17|o<<2}function zs(s){return s>>17&32767}function Vp(s){return 2|s}function Ta(s){return(131068&s)>>2}function Ah(s,o){return-131069&s|o<<2}function xh(s){return 1|s}function YI(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],f=a[l+1];if(-1!==f){const y=s.data[f];tl(d),y.contentQueries(2,o[f],f)}}}function Wp(s,o,a,l,d,f,y,w,C,S,k){const L=o.blueprint.slice();return L[0]=d,L[2]=76|l,(null!==k||s&&1024&s[2])&&(L[2]|=1024),Qo(L),L[3]=L[15]=s,L[8]=a,L[10]=y||s&&s[10],L[11]=w||s&&s[11],L[12]=C||s&&s[12]||null,L[9]=S||s&&s[9]||null,L[6]=f,L[20]=function cI(){return sy++}(),L[21]=k,L[16]=2==o.type?s[16]:L,L}function $c(s,o,a,l,d){let f=s.data[o];if(null===f)f=function Hc(s,o,a,l,d){const f=uo(),y=Ka(),C=s.data[o]=function eD(s,o,a,l,d,f){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,o,l,d);return null===s.firstChild&&(s.firstChild=C),null!==f&&(y?null==f.child&&null!==C.parent&&(f.child=C):null===f.next&&(f.next=C)),C}(s,o,a,l,d),function rc(){return Ot.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=l,f.attrs=d;const y=function Za(){const s=Ot.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Mr(f,!0),f}function Al(s,o,a,l){if(0===a)return-1;const d=o.length;for(let f=0;f<a;f++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function Oh(s,o,a){ho(o);try{const l=s.viewQuery;null!==l&&eg(1,l,a);const d=s.template;null!==d&&EE(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&YI(s,o),s.staticViewQueries&&eg(2,s.viewQuery,a);const f=s.components;null!==f&&function XI(s,o){for(let a=0;a<o.length;a++)RE(s,o[a])}(o,f)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,as()}}function zc(s,o,a,l){const d=o[2];if(128!=(128&d)){ho(o);try{Qo(o),function ia(s){return Ot.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&EE(s,o,a,2,l);const y=3==(3&d);if(y){const S=s.preOrderCheckHooks;null!==S&&fo(o,S,null)}else{const S=s.preOrderHooks;null!==S&&po(o,S,0,null),lc(o,0)}if(function ME(s){for(let o=wh(s);null!==o;o=Hw(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],f=d[3];0==(512&d[2])&&Ln(f,1),d[2]|=512}}}(o),function jx(s){for(let o=wh(s);null!==o;o=Hw(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];os(l)&&zc(d,l,d.template,l[8])}}(o),null!==s.contentQueries&&YI(s,o),y){const S=s.contentCheckHooks;null!==S&&fo(o,S)}else{const S=s.contentHooks;null!==S&&po(o,S,1),lc(o,1)}!function wE(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Gi(~d);else{const f=d,y=a[++l],w=a[++l];ic(y,f),w(2,o[f])}}}finally{Gi(-1)}}(s,o);const w=s.components;null!==w&&function QI(s,o){for(let a=0;a<o.length;a++)rD(s,o[a])}(o,w);const C=s.viewQuery;if(null!==C&&eg(2,C,l),y){const S=s.viewCheckHooks;null!==S&&fo(o,S)}else{const S=s.viewHooks;null!==S&&po(o,S,2),lc(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Ln(o[3],-1))}finally{as()}}}function EE(s,o,a,l,d){const f=Mn(),y=2&l;try{Gi(-1),y&&o.length>22&&Nc(s,o,22,!1),a(l,d)}finally{Gi(f)}}function bE(s,o,a){if(eo(o)){const d=o.directiveEnd;for(let f=o.directiveStart;f<d;f++){const y=s.data[f];y.contentQueries&&y.contentQueries(1,a[f],f)}}}function Gc(s,o,a){!ks()||(function Kp(s,o,a,l){const d=a.directiveStart,f=a.directiveEnd;s.firstCreatePass||qi(a,o),Cr(l,o);const y=a.initialInputs;for(let w=d;w<f;w++){const C=s.data[w],S=Ur(C);S&&tD(o,a,C);const k=Di(o,s,w,a);Cr(k,o),null!==y&&xE(0,w-d,k,C,0,y),S&&(nn(a.index,o)[8]=k)}}(s,o,a,mr(a,o)),128==(128&a.flags)&&function Bx(s,o,a){const l=a.directiveStart,d=a.directiveEnd,f=a.index,y=function Gd(){return Ot.lFrame.currentDirectiveIndex}();try{Gi(f);for(let w=l;w<d;w++){const C=s.data[w],S=o[w];co(w),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&Wy(C,S)}}finally{Gi(-1),co(y)}}(s,o,a))}function jy(s,o,a=mr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let f=0;f<l.length;f+=2){const y=l[f+1],w=-1===y?a(o,s):s[y];s[d++]=w}}}function CE(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=$y(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function $y(s,o,a,l,d,f,y,w,C,S){const k=22+l,L=k+d,q=function JI(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:Vt);return a}(k,L),ie="function"==typeof S?S():S;return q[1]={type:s,blueprint:q,template:a,queries:null,viewQuery:w,declTNode:o,data:q.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:C,consts:ie,incompleteFirstPass:!1}}function ar(s,o,a,l){const d=sD(o);null===a?d.push(l):(d.push(a),s.firstCreatePass&&OE(s).push(l,d.length-1))}function Hy(s,o,a){for(let l in s)if(s.hasOwnProperty(l)){const d=s[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function qp(s,o){const l=o.directiveEnd,d=s.data,f=o.attrs,y=[];let w=null,C=null;for(let S=o.directiveStart;S<l;S++){const k=d[S],L=k.inputs,q=null===f||bh(o)?null:nD(L,f);y.push(q),w=Hy(L,S,w),C=Hy(k.outputs,S,C)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=w,o.outputs=C}function DE(s,o){const a=nn(o,s);16&a[2]||(a[2]|=32)}function Gy(s,o,a,l){let d=!1;if(ks()){const f=function Wc(s,o,a){const l=s.directiveRegistry;let d=null;if(l)for(let f=0;f<l.length;f++){const y=l[f];Op(a,y.selectors,!1)&&(d||(d=[]),Ns(qi(a,o),s,y.type),Ur(y)?(Yp(s,a),d.unshift(y)):d.push(y))}return d}(s,o,a),y=null===l?null:{"":-1};if(null!==f){d=!0,qy(a,s.data.length,f.length);for(let k=0;k<f.length;k++){const L=f[k];L.providersResolver&&L.providersResolver(L)}let w=!1,C=!1,S=Al(s,o,f.length,null);for(let k=0;k<f.length;k++){const L=f[k];a.mergedAttrs=ca(a.mergedAttrs,L.hostAttrs),Qp(s,a,o,S,L),AE(S,L,y),null!==L.contentQueries&&(a.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(a.flags|=128);const q=L.type.prototype;!w&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),w=!0),!C&&(q.ngOnChanges||q.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),C=!0),S++}qp(s,a)}y&&function Ux(s,o,a){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const f=a[o[d+1]];if(null==f)throw new Ie(-301,!1);l.push(o[d],f)}}}(a,l,y)}return a.mergedAttrs=ca(a.mergedAttrs,a.attrs),d}function Zp(s,o,a,l,d,f){const y=f.hostBindings;if(y){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const C=~o.index;(function TE(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(w)!=C&&w.push(C),w.push(l,d,y)}}function Wy(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Yp(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function AE(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;Ur(o)&&(a[""]=s)}}function qy(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function Qp(s,o,a,l,d){s.data[l]=d;const f=d.factory||(d.factory=gr(d.type)),y=new oi(f,Ur(d),Uc);s.blueprint[l]=y,a[l]=y,Zp(s,o,0,l,Al(s,a,d.hostVars,Vt),d)}function tD(s,o,a){const l=mr(o,s),d=CE(a),f=s[10],y=Xp(s,Wp(s,d,null,a.onPush?32:16,l,o,f,f.createRenderer(l,a),null,null,null));s[o.index]=y}function Po(s,o,a,l,d,f){const y=mr(s,o);!function Zy(s,o,a,l,d,f,y){if(null==f)s.removeAttribute(o,d,a);else{const w=null==y?we(f):y(f,l||"",d);s.setAttribute(o,d,w,a)}}(o[11],y,f,s.value,a,l,d)}function xE(s,o,a,l,d,f){const y=f[o];if(null!==y){const w=l.setInput;for(let C=0;C<y.length;){const S=y[C++],k=y[C++],L=y[C++];null!==w?l.setInput(a,L,S,k):a[k]=L}}}function nD(s,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function kh(s,o,a,l){return new Array(s,!0,!1,o,null,0,l,a,null,null)}function rD(s,o){const a=nn(o,s);if(os(a)){const l=a[1];48&a[2]?zc(l,a,l.template,a[8]):a[5]>0&&Ky(a)}}function Ky(s){for(let l=wh(s);null!==l;l=Hw(l))for(let d=10;d<l.length;d++){const f=l[d];if(os(f))if(512&f[2]){const y=f[1];zc(y,f,y.template,f[8])}else f[5]>0&&Ky(f)}const a=s[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=nn(a[l],s);os(d)&&d[5]>0&&Ky(d)}}function RE(s,o){const a=nn(o,s),l=a[1];(function iD(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),Oh(l,a,a[8])}function Xp(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Yy(s){for(;s;){s[2]|=32;const o=Eu(s);if(qu(s)&&!o)return s;s=o}return null}function Jp(s,o,a,l=!0){const d=o[10];d.begin&&d.begin();try{zc(s,o,s.template,a)}catch(y){throw l&&hn(o,y),y}finally{d.end&&d.end()}}function eg(s,o,a){tl(0),o(s,a)}function sD(s){return s[7]||(s[7]=[])}function OE(s){return s.cleanup||(s.cleanup=[])}function hn(s,o){const a=s[9],l=a?a.get(Mo,null):null;l&&l.handleError(o)}function Iu(s,o,a,l,d){for(let f=0;f<a.length;){const y=a[f++],w=a[f++],C=o[y],S=s.data[y];null!==S.setInput?S.setInput(C,d,l,w):C[w]=d}}function Qy(s,o,a){let l=a?s.styles:null,d=a?s.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const w=o[y];"number"==typeof w?f=w:1==f?d=_e(d,w):2==f&&(l=_e(l,w+": "+o[++y]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=d:s.classesWithoutHost=d}function tg(s,o,a,l,d=!1){for(;null!==a;){const f=o[a.index];if(null!==f&&l.push(Pn(f)),ti(f))for(let w=10;w<f.length;w++){const C=f[w],S=C[1].firstChild;null!==S&&tg(C[1],C,S,l)}const y=a.type;if(8&y)tg(s,o,a.child,l);else if(32&y){const w=fy(a,o);let C;for(;C=w();)l.push(C)}else if(16&y){const w=Jw(o,a);if(Array.isArray(w))l.push(...w);else{const C=Eu(o[16]);tg(C[1],C,w,l,!0)}}a=d?a.projectionNext:a.next}return l}class xl{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return tg(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ti(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(Eh(o,l),_n(a,l))}this._attachedToViewContainer=!1}Oc(this._lView[1],this._lView)}onDestroy(o){ar(this._lView[1],this._lView,null,o)}markForCheck(){Yy(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Jp(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Rc(s,o){kc(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ie(902,!1);this._appRef=o}}class oD extends xl{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Jp(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class Xy extends Da{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=O(o);return new ng(a,this.ngModule)}}function kE(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class uD{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,l){const d=this.injector.get(o,gh,l);return d!==gh||a===gh?d:this.parentInjector.get(o,a,l)}}class ng extends Tw{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function rE(s){return s.map(nE).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return kE(this.componentDef.inputs)}get outputs(){return kE(this.componentDef.outputs)}create(o,a,l,d){let f=(d=d||this.ngModule)instanceof El?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new uD(o,f):o,w=y.get(Tc,null);if(null===w)throw new Ie(407,!1);const C=y.get(ey,null),S=w.createRenderer(null,this.componentDef),k=this.componentDef.selectors[0][0]||"div",L=l?function IE(s,o,a){return s.selectRootElement(o,a===yt.ShadowDom)}(S,l,this.componentDef.encapsulation):Ip(w.createRenderer(null,this.componentDef),k,function aD(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(k)),q=this.componentDef.onPush?288:272,ie=$y(0,null,null,1,0,null,null,null,null,null),be=Wp(null,ie,null,q,null,null,w,S,C,y,null);let ze,Ke;ho(be);try{const Ge=function Gx(s,o,a,l,d,f){const y=a[1];a[22]=s;const C=$c(y,22,2,"#host",null),S=C.mergedAttrs=o.hostAttrs;null!==S&&(Qy(C,S,!0),null!==s&&(Wi(d,s,S),null!==C.classes&&Rp(d,s,C.classes),null!==C.styles&&Iy(d,s,C.styles)));const k=l.createRenderer(s,o),L=Wp(a,CE(o),null,o.onPush?32:16,a[22],C,l,k,f||null,null,null);return y.firstCreatePass&&(Ns(qi(C,a),y,o.type),Yp(y,C),qy(C,a.length,1)),Xp(a,L),a[22]=L}(L,this.componentDef,be,w,S);if(L)if(l)Wi(S,L,["ng-version",bl.full]);else{const{attrs:Ct,classes:Oe}=function iE(s){const o=[],a=[];let l=1,d=2;for(;l<s.length;){let f=s[l];if("string"==typeof f)2===d?""!==f&&o.push(f,s[++l]):8===d&&a.push(f);else{if(!ps(d))break;d=f}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Ct&&Wi(S,L,Ct),Oe&&Oe.length>0&&Rp(S,L,Oe.join(" "))}if(Ke=Os(ie,22),void 0!==a){const Ct=Ke.projection=[];for(let Oe=0;Oe<this.ngContentSelectors.length;Oe++){const At=a[Oe];Ct.push(null!=At?Array.from(At):null)}}ze=function Wx(s,o,a,l){const d=a[1],f=function Vx(s,o,a){const l=Xn();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Qp(s,l,o,Al(s,o,1,null),a),qp(s,l));const d=Di(o,s,l.directiveStart,l);Cr(d,o);const f=mr(l,o);return f&&Cr(f,o),d}(d,a,o);if(s[8]=a[8]=f,null!==l)for(const w of l)w(f,o);if(o.contentQueries){const w=Xn();o.contentQueries(1,f,w.directiveStart)}const y=Xn();return!d.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Gi(y.index),Zp(a[1],y,0,y.directiveStart,y.directiveEnd,o),Wy(o,f)),f}(Ge,this.componentDef,be,[Jy]),Oh(ie,be,null)}finally{as()}return new lD(this.componentType,ze,Sc(Ke,be),be,Ke)}}class lD extends class eI{}{constructor(o,a,l,d,f){super(),this.location=l,this._rootLView=d,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new oD(d),this.componentType=o}setInput(o,a){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){const f=this._rootLView;Iu(f[1],f,d,o,a),DE(f,this._tNode.index)}}get injector(){return new Eo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function Jy(){const s=Xn();Ya(Re()[1],s)}function Ws(s){let o=function Ee(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const l=[s];for(;o;){let d;if(Ur(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ie(903,!1);d=o.\u0275dir}if(d){if(a){l.push(d);const y=s;y.inputs=rn(s.inputs),y.declaredInputs=rn(s.declaredInputs),y.outputs=rn(s.outputs);const w=d.hostBindings;w&&cD(s,w);const C=d.viewQuery,S=d.contentQueries;if(C&&Du(s,C),S&&PE(s,S),ue(s.inputs,d.inputs),ue(s.declaredInputs,d.declaredInputs),ue(s.outputs,d.outputs),Ur(d)&&d.data.animation){const k=s.data;k.animation=(k.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let y=0;y<f.length;y++){const w=f[y];w&&w.ngInherit&&w(s),w===Ws&&(a=!1)}}o=Object.getPrototypeOf(o)}!function rg(s){let o=0,a=null;for(let l=s.length-1;l>=0;l--){const d=s[l];d.hostVars=o+=d.hostVars,d.hostAttrs=ca(d.hostAttrs,a=ca(a,d.hostAttrs))}}(l)}function rn(s){return s===vr?{}:s===Dt?[]:s}function Du(s,o){const a=s.viewQuery;s.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function PE(s,o){const a=s.contentQueries;s.contentQueries=a?(l,d,f)=>{o(l,d,f),a(l,d,f)}:o}function cD(s,o){const a=s.hostBindings;s.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let Ml=null;function Ra(){if(!Ml){const s=Tt.Symbol;if(s&&s.iterator)Ml=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Ml=l)}}}return Ml}function Ph(s){return!!e_(s)&&(Array.isArray(s)||!(s instanceof Map)&&Ra()in s)}function e_(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function vn(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function qc(s,o,a,l){const d=Re();return vn(d,sa(),o)&&(Wt(),Po(Rn(),d,s,o,a,l)),qc}function Jc(s,o,a,l,d,f,y,w){const C=Re(),S=Wt(),k=s+22,L=S.firstCreatePass?function UE(s,o,a,l,d,f,y,w,C){const S=o.consts,k=$c(o,s,4,y||null,si(S,w));Gy(o,a,k,si(S,C)),Ya(o,k);const L=k.tViews=$y(2,k,l,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,k),L.queries=o.queries.embeddedTView(k)),k}(k,S,C,o,a,l,d,f,y):S.data[k];Mr(L,!1);const q=C[11].createComment("");Ap(S,C,q,L),Cr(q,C),Xp(C,C[k]=kh(q,C,q,L)),Zo(L)&&Gc(S,C,L),null!=y&&jy(C,L,w)}function sg(s){return function Ci(s,o){return s[o]}(function ra(){return Ot.lFrame.contextLView}(),22+s)}function Vh(s,o,a){const l=Re();return vn(l,sa(),o)&&function Xi(s,o,a,l,d,f,y,w){const C=mr(o,a);let k,S=o.inputs;!w&&null!=S&&(k=S[l])?(Iu(s,a,k,l,d),Wu(o)&&DE(a,o.index)):3&o.type&&(l=function zy(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=y?y(d,o.value||"",l):d,f.setProperty(C,l,d))}(Wt(),Rn(),l,s,o,l[11],a,!1),Vh}function s_(s,o,a,l,d){const y=d?"class":"style";Iu(s,a,o.inputs[y],y,l)}function Bh(s,o,a,l){const d=Re(),f=Wt(),y=22+s,w=d[11],C=d[y]=Ip(w,o,function il(){return Ot.lFrame.currentNamespace}()),S=f.firstCreatePass?function o_(s,o,a,l,d,f,y){const w=o.consts,S=$c(o,s,2,d,si(w,f));return Gy(o,a,S,si(w,y)),null!==S.attrs&&Qy(S,S.attrs,!1),null!==S.mergedAttrs&&Qy(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(y,f,d,0,o,a,l):f.data[y];Mr(S,!0);const k=S.mergedAttrs;null!==k&&Wi(w,C,k);const L=S.classes;null!==L&&Rp(w,C,L);const q=S.styles;return null!==q&&Iy(w,C,q),64!=(64&S.flags)&&Ap(f,d,C,S),0===function Jo(){return Ot.lFrame.elementDepthCount}()&&Cr(C,d),function nc(){Ot.lFrame.elementDepthCount++}(),Zo(S)&&(Gc(f,d,S),bE(f,S,d)),null!==l&&jy(d,S),Bh}function Uh(){let s=Xn();Ka()?lo():(s=s.parent,Mr(s,!1));const o=s;!function ea(){Ot.lFrame.elementDepthCount--}();const a=Wt();return a.firstCreatePass&&(Ya(a,s),eo(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Xa(s){return 0!=(16&s.flags)}(o)&&s_(a,o,Re(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Ja(s){return 0!=(32&s.flags)}(o)&&s_(a,o,Re(),o.stylesWithoutHost,!1),Uh}function jh(s,o,a,l){return Bh(s,o,a,l),Uh(),jh}function og(s,o,a){const l=Re(),d=Wt(),f=s+22,y=d.firstCreatePass?function gD(s,o,a,l,d){const f=o.consts,y=si(f,l),w=$c(o,s,8,"ng-container",y);return null!==y&&Qy(w,y,!0),Gy(o,a,w,si(f,d)),null!==o.queries&&o.queries.elementStart(o,w),w}(f,d,l,o,a):d.data[f];Mr(y,!0);const w=l[f]=l[11].createComment("");return Ap(d,l,w,y),Cr(w,l),Zo(y)&&(Gc(d,l,y),bE(d,y,l)),null!=a&&jy(l,y),og}function ag(){let s=Xn();const o=Wt();return Ka()?lo():(s=s.parent,Mr(s,!1)),o.firstCreatePass&&(Ya(o,s),eo(s)&&o.queries.elementEnd(s)),ag}function Hh(s){return!!s&&"function"==typeof s.then}function ug(s){return!!s&&"function"==typeof s.subscribe}const u_=ug;function l_(s,o,a,l){const d=Re(),f=Wt(),y=Xn();return function d_(s,o,a,l,d,f,y,w){const C=Zo(l),k=s.firstCreatePass&&OE(s),L=o[8],q=sD(o);let ie=!0;if(3&l.type||w){const Ke=mr(l,o),Ge=w?w(Ke):Ke,Ct=q.length,Oe=w?mn=>w(Pn(mn[l.index])):l.index;let At=null;if(!w&&C&&(At=function ed(s,o,a,l){const d=s.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const y=d[f];if(y===a&&d[f+1]===l){const w=o[7],C=d[f+2];return w.length>C?w[C]:null}"string"==typeof y&&(f+=2)}return null}(s,o,d,l.index)),null!==At)(At.__ngLastListenerFn__||At).__ngNextListenerFn__=f,At.__ngLastListenerFn__=f,ie=!1;else{f=$E(l,o,L,f,!1);const mn=a.listen(Ge,d,f);q.push(f,mn),k&&k.push(d,Oe,Ct,Ct+1)}}else f=$E(l,o,L,f,!1);const be=l.outputs;let ze;if(ie&&null!==be&&(ze=be[d])){const Ke=ze.length;if(Ke)for(let Ge=0;Ge<Ke;Ge+=2){const xn=o[ze[Ge]][ze[Ge+1]].subscribe(f),jl=q.length;q.push(f,xn),k&&k.push(d,l.index,jl,-(jl+1))}}}(f,d,d[11],y,s,o,0,l),l_}function jE(s,o,a,l){try{return!1!==a(l)}catch(d){return hn(s,d),!1}}function $E(s,o,a,l,d){return function f(y){if(y===Function)return l;Yy(2&s.flags?nn(s.index,o):o);let C=jE(o,0,l,y),S=f.__ngNextListenerFn__;for(;S;)C=jE(o,0,S,y)&&C,S=S.__ngNextListenerFn__;return d&&!1===C&&(y.preventDefault(),y.returnValue=!1),C}}function HE(s=1){return function us(s){return(Ot.lFrame.contextLView=function ac(s,o){for(;s>0;)o=o[15],s--;return o}(s,Ot.lFrame.contextLView))[8]}(s)}function g_(s,o,a,l,d){const f=s[a+1],y=null===o;let w=l?zs(f):Ta(f),C=!1;for(;0!==w&&(!1===C||y);){const k=s[w+1];QE(s[w],o)&&(C=!0,s[w+1]=l?xh(k):Vp(k)),w=l?zs(k):Ta(k)}C&&(s[a+1]=l?Vp(f):xh(f))}function QE(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&tr(s,o)>=0}function nb(s,o){return function qs(s,o,a,l){const d=Re(),f=Wt(),y=function zi(s){const o=Ot.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}(2);f.firstUpdatePass&&function bD(s,o,a,l){const d=s.data;if(null===d[a+1]){const f=d[Mn()],y=function ED(s,o){return o>=s.expandoStartIndex}(s,a);(function ob(s,o){return 0!=(s.flags&(o?16:32))})(f,l)&&null===o&&!y&&(o=!1),o=function Jx(s,o,a,l){const d=function el(s){const o=Ot.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let f=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=rd(a=Gh(null,s,o,a,l),o.attrs,l),f=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==d)if(a=Gh(d,s,o,a,l),null===f){let C=function eM(s,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==Ta(l))return s[zs(l)]}(s,o,l);void 0!==C&&Array.isArray(C)&&(C=Gh(null,s,o,C[1],l),C=rd(C,o.attrs,l),function __(s,o,a,l){s[zs(a?o.classBindings:o.styleBindings)]=l}(s,o,l,C))}else f=function rb(s,o,a){let l;const d=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<d;f++)l=rd(l,s[f].hostAttrs,a);return rd(l,o.attrs,a)}(s,o,l)}return void 0!==f&&(l?o.residualClasses=f:o.residualStyles=f),a}(d,f,o,l),function KE(s,o,a,l,d,f){let y=f?o.classBindings:o.styleBindings,w=zs(y),C=Ta(y);s[l]=a;let k,S=!1;if(Array.isArray(a)){const L=a;k=L[1],(null===k||tr(L,k)>0)&&(S=!0)}else k=a;if(d)if(0!==C){const q=zs(s[w+1]);s[l+1]=Lp(q,w),0!==q&&(s[q+1]=Ah(s[q+1],l)),s[w+1]=function jI(s,o){return 131071&s|o<<17}(s[w+1],l)}else s[l+1]=Lp(w,0),0!==w&&(s[w+1]=Ah(s[w+1],l)),w=l;else s[l+1]=Lp(C,0),0===w?w=l:s[C+1]=Ah(s[C+1],l),C=l;S&&(s[l+1]=Vp(s[l+1])),g_(s,k,l,!0),g_(s,k,l,!1),function YE(s,o,a,l,d){const f=d?s.residualClasses:s.residualStyles;null!=f&&"string"==typeof o&&tr(f,o)>=0&&(a[l+1]=xh(a[l+1]))}(o,k,s,l,f),y=Lp(w,C),f?o.classBindings=y:o.styleBindings=y}(d,f,o,a,y,l)}}(f,s,y,l),o!==Vt&&vn(d,y,o)&&function ib(s,o,a,l,d,f,y,w){if(!(3&o.type))return;const C=s.data,S=C[w+1];fg(function Ny(s){return 1==(1&s)}(S)?sb(C,o,a,d,Ta(S),y):void 0)||(fg(f)||function dE(s){return 2==(2&s)}(S)&&(f=sb(C,null,a,d,w,y)),function Pc(s,o,a,l,d){if(o)d?s.addClass(a,l):s.removeClass(a,l);else{let f=-1===l.indexOf("-")?void 0:ko.DashCase;null==d?s.removeStyle(a,l,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=ko.Important),s.setStyle(a,l,d,f))}}(l,y,yi(Mn(),a),d,f))}(f,f.data[Mn()],d,d[11],s,d[y+1]=function ID(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=fe(Ao(s)))),s}(o,a),l,y)}(s,o,null,!0),nb}function Gh(s,o,a,l,d){let f=null;const y=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<y&&(f=o[w],l=rd(l,f.hostAttrs,d),f!==s);)w++;return null!==s&&(a.directiveStylingLast=w),l}function rd(s,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let f=0;f<o.length;f++){const y=o[f];"number"==typeof y?d=y:d===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),on(s,y,!!a||o[++f]))}return void 0===s?null:s}function sb(s,o,a,l,d,f){const y=null===o;let w;for(;d>0;){const C=s[d],S=Array.isArray(C),k=S?C[1]:C,L=null===k;let q=a[d+1];q===Vt&&(q=L?Dt:void 0);let ie=L?fl(q,l):k===l?q:void 0;if(S&&!fg(ie)&&(ie=fl(C,l)),fg(ie)&&(w=ie,y))return w;const be=s[d+1];d=y?zs(be):Ta(be)}if(null!==o){let C=f?o.residualClasses:o.residualStyles;null!=C&&(w=fl(C,l))}return w}function fg(s){return void 0!==s}function DD(s,o=""){const a=Re(),l=Wt(),d=s+22,f=l.firstCreatePass?$c(l,d,1,o,null):l.data[d],y=a[d]=function Dl(s,o){return s.createText(o)}(a[11],o);Ap(l,a,y,f),Mr(f,!1)}function ab(s){return v_("",s,""),ab}function v_(s,o,a){const l=Re(),d=function Tu(s,o,a,l){return vn(s,sa(),a)?o+we(a)+l:Vt}(l,s,o,a);return d!==Vt&&function Gs(s,o,a){const l=yi(o,s);!function xc(s,o,a){s.setValue(o,a)}(s[11],l,a)}(l,Mn(),d),v_}const id=void 0;var wM=["en",[["a","p"],["AM","PM"],id],[["AM","PM"],id,id],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],id,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],id,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",id,"{1} 'at' {0}",id],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function vM(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Wh={};function ub(s){const o=function EM(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=qD(o);if(a)return a;const l=o.split("-")[0];if(a=qD(l),a)return a;if("en"===l)return wM;throw new Ie(701,!1)}function WD(s){return ub(s)[St.PluralCase]}function qD(s){return s in Wh||(Wh[s]=Tt.ng&&Tt.ng.common&&Tt.ng.common.locales&&Tt.ng.common.locales[s]),Wh[s]}var St=(()=>((St=St||{})[St.LocaleId=0]="LocaleId",St[St.DayPeriodsFormat=1]="DayPeriodsFormat",St[St.DayPeriodsStandalone=2]="DayPeriodsStandalone",St[St.DaysFormat=3]="DaysFormat",St[St.DaysStandalone=4]="DaysStandalone",St[St.MonthsFormat=5]="MonthsFormat",St[St.MonthsStandalone=6]="MonthsStandalone",St[St.Eras=7]="Eras",St[St.FirstDayOfWeek=8]="FirstDayOfWeek",St[St.WeekendRange=9]="WeekendRange",St[St.DateFormat=10]="DateFormat",St[St.TimeFormat=11]="TimeFormat",St[St.DateTimeFormat=12]="DateTimeFormat",St[St.NumberSymbols=13]="NumberSymbols",St[St.NumberFormats=14]="NumberFormats",St[St.CurrencyCode=15]="CurrencyCode",St[St.CurrencySymbol=16]="CurrencySymbol",St[St.CurrencyName=17]="CurrencyName",St[St.Currencies=18]="Currencies",St[St.Directionality=19]="Directionality",St[St.PluralCase=20]="PluralCase",St[St.ExtraData=21]="ExtraData",St))();const sd="en-US";let qh=sd;function ef(s,o,a,l,d){if(s=J(s),Array.isArray(s))for(let f=0;f<s.length;f++)ef(s[f],o,a,l,d);else{const f=Wt(),y=Re();let w=pu(s)?s:J(s.provide),C=YC(s);const S=Xn(),k=1048575&S.providerIndexes,L=S.directiveStart,q=S.providerIndexes>>20;if(pu(s)||!s.multi){const ie=new oi(C,d,Uc),be=L_(w,o,d?k:k+q,L);-1===be?(Ns(qi(S,y),f,w),tf(f,s,o.length),o.push(w),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),a.push(ie),y.push(ie)):(a[be]=ie,y[be]=ie)}else{const ie=L_(w,o,k+q,L),be=L_(w,o,k,k+q),ze=ie>=0&&a[ie],Ke=be>=0&&a[be];if(d&&!Ke||!d&&!ze){Ns(qi(S,y),f,w);const Ge=function Ab(s,o,a,l,d){const f=new oi(s,a,Uc);return f.multi=[],f.index=o,f.componentProviders=0,F_(f,d,l&&!a),f}(d?Tb:nf,a.length,d,l,C);!d&&Ke&&(a[be].providerFactory=Ge),tf(f,s,o.length,0),o.push(w),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),a.push(Ge),y.push(Ge)}else tf(f,s,ie>-1?ie:be,F_(a[d?be:ie],C,!d&&l));!d&&l&&Ke&&a[be].componentProviders++}}}function tf(s,o,a,l){const d=pu(o),f=function Cw(s){return!!s.useClass}(o);if(d||f){const C=(f?J(o.useClass):o).prototype.ngOnDestroy;if(C){const S=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const k=S.indexOf(a);-1===k?S.push(a,[l,C]):S[k+1].push(l,C)}else S.push(a,C)}}}function F_(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function L_(s,o,a,l){for(let d=a;d<l;d++)if(o[d]===s)return d;return-1}function nf(s,o,a,l){return Ag(this.multi,[])}function Tb(s,o,a,l){const d=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=Di(a,a[1],this.providerFactory.index,l);f=w.slice(0,y),Ag(d,f);for(let C=y;C<w.length;C++)f.push(w[C])}else f=[],Ag(d,f);return f}function Ag(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function rf(s,o=[]){return a=>{a.providersResolver=(l,d)=>function Tg(s,o,a){const l=Wt();if(l.firstCreatePass){const d=Ur(s);ef(a,l.data,l.blueprint,d,!0),ef(o,l.data,l.blueprint,d,!1)}}(l,d?d(s):s,o)}}class dd{}class xb{}function hd(s,o){return new Mb(s,o??null)}class Mb extends dd{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Xy(this);const l=at(o);this._bootstrapComponents=fs(l.bootstrap),this._r3Injector=Pp(o,a,[{provide:dd,useValue:this},{provide:Da,useValue:this.componentFactoryResolver}],fe(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Pa extends xb{constructor(o){super(),this.moduleType=o}create(o){return new Mb(this.moduleType,o)}}class Rb extends dd{constructor(o,a,l){super(),this.componentFactoryResolver=new Xy(this),this.instance=null;const d=new ph([...o,{provide:dd,useValue:this},{provide:Da,useValue:this.componentFactoryResolver}],a||mp(),l,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function fd(s,o,a=null){return new Rb(s,o,a).injector}let Ob=(()=>{class s{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const l=_w(0,a.type),d=l.length>0?fd([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=en({token:s,providedIn:"environment",factory:()=>new s(Nn(El))}),s})();function pd(s){s.getStandaloneInjector=o=>o.get(Ob).getOrCreateStandaloneInjector(s)}function G_(s){return o=>{setTimeout(s,void 0,o)}}const Ks=class lf extends h.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){let d=o,f=a||(()=>null),y=l;if(o&&"object"==typeof o){const C=o;d=C.next?.bind(C),f=C.error?.bind(C),y=C.complete?.bind(C)}this.__isAsync&&(f=G_(f),d&&(d=G_(d)),y&&(y=G_(y)));const w=super.subscribe({next:d,error:f,complete:y});return o instanceof j.w0&&o.add(w),w}};function pS(){return this._results[Ra()]()}class W_{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Ra(),l=W_.prototype;l[a]||(l[a]=pS)}get changes(){return this._changes||(this._changes=new Ks)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=Rr(o);(this._changesDetected=!function rh(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],f=o[l];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let cf=(()=>{class s{}return s.__NG_ELEMENT_ID__=xu,s})();const gS=cf,df=class extends gS{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o,a){const l=this._declarationTContainer.tViews,d=Wp(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(d[19]=y.createEmbeddedView(l)),Oh(l,d,o),new xl(d)}};function xu(){return hf(Xn(),Re())}function hf(s,o){return 4&s.type?new df(o,s,Sc(s,o)):null}let ff=(()=>{class s{}return s.__NG_ELEMENT_ID__=zb,s})();function zb(){return qb(Xn(),Re())}const yd=ff,Gb=class extends yd{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Sc(this._hostTNode,this._hostLView)}get injector(){return new Eo(this._hostTNode,this._hostLView)}get parentInjector(){const o=ha(this._hostTNode,this._hostLView);if(Yd(o)){const a=ls(o,this._hostLView),l=er(o);return new Eo(a[1].data[l+8],a)}return new Eo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Wb(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){let d,f;"number"==typeof l?d=l:null!=l&&(d=l.index,f=l.injector);const y=o.createEmbeddedView(a||{},f);return this.insert(y,d),y}createComponent(o,a,l,d,f){const y=o&&!function or(s){return"function"==typeof s}(o);let w;if(y)w=a;else{const L=a||{};w=L.index,l=L.injector,d=L.projectableNodes,f=L.environmentInjector||L.ngModuleRef}const C=y?o:new ng(O(o)),S=l||this.parentInjector;if(!f&&null==C.ngModule){const q=(y?S:this.parentInjector).get(El,null);q&&(f=q)}const k=C.create(S,d,void 0,f);return this.insert(k.hostView,w),k}insert(o,a){const l=o._lView,d=l[1];if(function Xu(s){return ti(s[3])}(l)){const k=this.indexOf(o);if(-1!==k)this.detach(k);else{const L=l[3],q=new Gb(L,L[6],L[3]);q.detach(q.indexOf(o))}}const f=this._adjustIndex(a),y=this._lContainer;!function vI(s,o,a,l){const d=10+l,f=a.length;l>0&&(a[d-1][4]=o),l<f-10?(o[4]=a[d],Ls(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const y=o[17];null!==y&&a!==y&&function qw(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(y,o);const w=o[19];null!==w&&w.insertView(s),o[2]|=64}(d,l,y,f);const w=wy(f,y),C=l[11],S=Tp(C,y[7]);return null!==S&&function Ww(s,o,a,l,d,f){l[0]=d,l[6]=o,kc(s,l,a,1,d,f)}(d,y[6],C,l,S,w),o.attachToViewContainerRef(),Ls(Bg(y),f,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Wb(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Eh(this._lContainer,a);l&&(_n(Bg(this._lContainer),a),Oc(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=Eh(this._lContainer,a);return l&&null!=_n(Bg(this._lContainer),a)?new xl(l):null}_adjustIndex(o,a=0){return o??this.length+a}};function Wb(s){return s[8]}function Bg(s){return s[8]||(s[8]=[])}function qb(s,o){let a;const l=o[s.index];if(ti(l))a=l;else{let d;if(8&s.type)d=Pn(l);else{const f=o[11];d=f.createComment("");const y=mr(s,o);wi(f,Tp(f,y),d,function bI(s,o){return s.nextSibling(o)}(f,y),!1)}o[s.index]=a=kh(l,o,d,s),Xp(o,a)}return new Gb(a,s,o)}class pf{constructor(o){this.queryList=o,this.matches=null}clone(){return new pf(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ug{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let f=0;f<l;f++){const y=a.getByIndex(f);d.push(this.queries[y.indexInDeclarationView].clone())}return new Ug(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Jb(o,a).matches&&this.queries[a].setDirty()}}class q_{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class gf{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(o,d);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new gf(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Z_{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Z_(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const f=l[d];this.matchTNodeWithReadOption(o,a,mS(a,f)),this.matchTNodeWithReadOption(o,a,pa(a,o,f,!1,!1))}else l===cf?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,pa(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===gu||d===ff||d===cf&&4&a.type)this.addMatch(a.index,-2);else{const f=pa(a,o,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function mS(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function jg(s,o,a,l){return-1===a?function yS(s,o){return 11&s.type?Sc(s,o):4&s.type?hf(s,o):null}(o,s):-2===a?function mf(s,o,a){return a===gu?Sc(o,s):a===cf?hf(o,s):a===ff?qb(o,s):void 0}(s,o,l):Di(s,s[1],a,o)}function yf(s,o,a,l){const d=o[19].queries[l];if(null===d.matches){const f=s.data,y=a.matches,w=[];for(let C=0;C<y.length;C+=2){const S=y[C];w.push(S<0?null:jg(o,f[S],y[C+1],a.metadata.read))}d.matches=w}return d.matches}function _f(s,o,a,l){const d=s.queries.getByIndex(a),f=d.matches;if(null!==f){const y=yf(s,o,d,a);for(let w=0;w<f.length;w+=2){const C=f[w];if(C>0)l.push(y[w/2]);else{const S=f[w+1],k=o[-C];for(let L=10;L<k.length;L++){const q=k[L];q[17]===q[3]&&_f(q[1],q,S,l)}if(null!==k[9]){const L=k[9];for(let q=0;q<L.length;q++){const ie=L[q];_f(ie[1],ie,S,l)}}}}}return l}function K_(s){const o=Re(),a=Wt(),l=oa();tl(l+1);const d=Jb(a,l);if(s.dirty&&function Qu(s){return 4==(4&s[2])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const f=d.crossesNgTemplate?_f(a,o,l,[]):yf(a,o,d,l);s.reset(f,iI),s.notifyOnChanges()}return!0}return!1}function _d(s,o,a){const l=Wt();l.firstCreatePass&&(Xb(l,new q_(s,o,a),-1),2==(2&o)&&(l.staticViewQueries=!0)),Y_(l,Re(),o)}function vd(s,o,a,l){const d=Wt();if(d.firstCreatePass){const f=Xn();Xb(d,new q_(o,a,l),f.index),function _S(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}Y_(d,Re(),a)}function Qb(){return function ur(s,o){return s[19].queries[o].queryList}(Re(),oa())}function Y_(s,o,a){const l=new W_(4==(4&a));ar(s,o,l,l.destroy),null===o[19]&&(o[19]=new Ug),o[19].queries.push(new pf(l))}function Xb(s,o,a){null===s.queries&&(s.queries=new gf),s.queries.track(new Z_(o,a))}function Jb(s,o){return s.queries.getByIndex(o)}function Q_(s,o){return hf(s,o)}function cr(...s){}const p0=new In("Application Initializer");let Zg=(()=>{class s{constructor(a){this.appInits=a,this.resolve=cr,this.reject=cr,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(Hh(f))a.push(f);else if(u_(f)){const y=new Promise((w,C)=>{f.subscribe({complete:w,error:C})});a.push(y)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(Nn(p0,8))},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const g0=new In("AppId",{providedIn:"root",factory:function m0(){return`${Kg()}${Kg()}${Kg()}`}});function Kg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const y0=new In("Platform Initializer"),TM=new In("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),_0=new In("appBootstrapListener"),Bt=new In("AnimationModuleType");let Cd=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const On=new In("LocaleId",{providedIn:"root",factory:()=>ml(On,Je.Optional|Je.SkipSelf)||function v0(){return typeof $localize<"u"&&$localize.locale||sd}()}),Rt=new In("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class dr{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let Ye=(()=>{class s{compileModuleSync(a){return new Pa(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),f=fs(at(a).declarations).reduce((y,w)=>{const C=O(w);return C&&y.push(new ng(C)),y},[]);return new dr(l,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const b0=(()=>Promise.resolve(0))();function Xg(s){typeof Zone>"u"?b0.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Ri{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ks(!1),this.onMicrotaskEmpty=new Ks(!1),this.onStable=new Ks(!1),this.onError=new Ks(!1),typeof Zone>"u")throw new Ie(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Ji(){let s=Tt.requestAnimationFrame,o=Tt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function av(s){const o=()=>{!function Ru(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Tt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,ce(s),s.isCheckStableRunning=!0,Jg(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),ce(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,f,y,w)=>{try{return If(s),a.invokeTask(d,f,y,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||s.shouldCoalesceRunChangeDetection)&&o(),ws(s)}},onInvoke:(a,l,d,f,y,w,C)=>{try{return If(s),a.invoke(d,f,y,w,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),ws(s)}},onHasTask:(a,l,d,f)=>{a.hasTask(d,f),l===d&&("microTask"==f.change?(s._hasPendingMicrotasks=f.microTask,ce(s),Jg(s)):"macroTask"==f.change&&(s.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,d,f)=>(a.handleError(d,f),s.runOutsideAngular(()=>s.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ri.isInAngularZone())throw new Ie(909,!1)}static assertNotInAngularZone(){if(Ri.isInAngularZone())throw new Ie(909,!1)}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+d,o,C0,cr,cr);try{return f.runTask(y,a,l)}finally{f.cancelTask(y)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const C0={};function Jg(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function ce(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function If(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function ws(s){s._nesting--,Jg(s)}class AS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ks,this.onMicrotaskEmpty=new Ks,this.onStable=new Ks,this.onError=new Ks}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}const Id=new In(""),Va=new In("");let Df,xS=(()=>{class s{constructor(a,l,d){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Df||(function I0(s){Df=s}(d),d.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ri.assertNotInAngularZone(),Xg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Xg(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(Nn(Ri),Nn(Ou),Nn(Va))},s.\u0275prov=en({token:s,factory:s.\u0275fac}),s})(),Ou=(()=>{class s{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Df?.findTestabilityInTree(this,a,l)??null}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),ku=null;const D0=new In("AllowMultipleToken"),hi=new In("PlatformDestroyListeners");class em{constructor(o,a){this.name=o,this.token=a}}function Oi(s,o,a=[]){const l=`Platform: ${o}`,d=new In(l);return(f=[])=>{let y=$o();if(!y||y.injector.get(D0,!1)){const w=[...a,...f,{provide:d,useValue:!0}];s?s(w):function Yr(s){if(ku&&!ku.get(D0,!1))throw new Ie(400,!1);ku=s;const o=s.get(nr);(function uv(s){const o=s.get(y0,null);o&&o.forEach(a=>a())})(s)}(function yr(s=[],o){return Tl.create({name:o,providers:[{provide:Iw,useValue:"platform"},{provide:hi,useValue:new Set([()=>ku=null])},...s]})}(w,l))}return function RS(s){const o=$o();if(!o)throw new Ie(401,!1);return o}()}}function $o(){return ku?.get(nr)??null}let nr=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const d=function tm(s,o){let a;return a="noop"===s?new AS:("zone.js"===s?void 0:s)||new Ri(o),a}(l?.ngZone,function Pu(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(l)),f=[{provide:Ri,useValue:d}];return d.run(()=>{const y=Tl.create({providers:f,parent:this.injector,name:a.moduleType.name}),w=a.create(y),C=w.injector.get(Mo,null);if(!C)throw new Ie(402,!1);return d.runOutsideAngular(()=>{const S=d.onError.subscribe({next:k=>{C.handleError(k)}});w.onDestroy(()=>{Ys(this._modules,w),S.unsubscribe()})}),function lv(s,o,a){try{const l=a();return Hh(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(C,d,()=>{const S=w.injector.get(Zg);return S.runInitializers(),S.donePromise.then(()=>(function ad(s){$t(s,"Expected localeId to be defined"),"string"==typeof s&&(qh=s.toLowerCase().replace(/_/g,"-"))}(w.injector.get(On,sd)||sd),this._moduleDoBootstrap(w),w))})})}bootstrapModule(a,l=[]){const d=Dd({},l);return function Bl(s,o,a){const l=new Pa(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const l=a.injector.get(nm);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Ie(403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ie(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(hi,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(Nn(Tl))},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Dd(s,o){return Array.isArray(o)?o.reduce(Dd,s):{...s,...o}}let nm=(()=>{class s{constructor(a,l,d){this._zone=a,this._injector=l,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new P.y(w=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{w.next(this._stable),w.complete()})}),y=new P.y(w=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{Ri.assertNotInAngularZone(),Xg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,w.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{Ri.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{w.next(!1)}))});return()=>{C.unsubscribe(),S.unsubscribe()}});this.isStable=(0,oe.T)(f,y.pipe((0,le.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const d=a instanceof Tw;if(!this._injector.get(Zg).done)throw!d&&Fe(a),new Ie(405,false);let y;y=d?a:this._injector.get(Da).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const w=function hr(s){return s.isBoundToModule}(y)?void 0:this._injector.get(dd),S=y.create(Tl.NULL,[],l||y.selector,w),k=S.location.nativeElement,L=S.injector.get(Id,null);return L?.registerApplication(k),S.onDestroy(()=>{this.detachView(S.hostView),Ys(this.components,S),L?.unregisterApplication(k)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new Ie(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Ys(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(_0,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Ys(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new Ie(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(a){return new(a||s)(Nn(Ri),Nn(El),Nn(Mo))},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Ys(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let cv=!0,Ba=!1;function rm(){return Ba=!0,cv}function Ul(){if(Ba)throw new Error("Cannot enable prod mode after platform setup.");cv=!1}let S0=(()=>{class s{}return s.__NG_ELEMENT_ID__=Td,s})();function Td(s){return function dv(s,o,a){if(Wu(s)&&!a){const l=nn(s.index,o);return new xl(l,l)}return 47&s.type?new xl(o[16],o):null}(Xn(),Re(),16==(16&s))}class mv{constructor(){}supports(o){return Ph(o)}create(o){return new Qr(o)}}const M0=(s,o)=>o;class Qr{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||M0}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,f=null;for(;a||l;){const y=!l||a&&a.currentIndex<yv(l,d,f)?a:l,w=yv(y,d,f),C=y.currentIndex;if(y===l)d--,l=l._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{f||(f=[]);const S=w-d,k=C-d;if(S!=k){for(let q=0;q<S;q++){const ie=q<f.length?f[q]:f[q]=0,be=ie+q;k<=be&&be<S&&(f[q]=ie+1)}f[y.previousIndex]=k-S}}w!==C&&o(y,w,C)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Ph(o))throw new Ie(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,y,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)f=o[w],y=this._trackByFn(w,f),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,f,y,w)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,w),l=!0),a=a._next}else d=0,function NE(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[Ra()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,w=>{y=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,w,y,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,y,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,f,d)):o=this._addAfter(new NS(a,l),f,d),o}_verifyReinsertion(o,a,l,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new R0),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new R0),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class NS{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class FS{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class R0{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new FS,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function yv(s,o,a){const l=s.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class O0{constructor(){}supports(o){return o instanceof Map||e_(o)}create(){return new LS}}class LS{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||e_(o)))throw new Ie(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const f=d._prev,y=d._next;return f&&(f._next=y),y&&(y._prev=f),d._next=null,d._prev=null,d}const l=new VS(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class VS{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function k0(){return new zo([new mv])}let zo=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||k0()),deps:[[s,new _t,new xe]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Ie(901,!1)}}return s.\u0275prov=en({token:s,providedIn:"root",factory:k0}),s})();function P0(){return new cm([new O0])}let cm=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||P0()),deps:[[s,new _t,new xe]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new Ie(901,!1)}}return s.\u0275prov=en({token:s,providedIn:"root",factory:P0}),s})();const F0=Oi(null,"core",[]);let _v=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(Nn(nm))},s.\u0275mod=Yt({type:s}),s.\u0275inj=Lt({}),s})();function vv(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(dt,Se,F)=>{F.d(Se,{Z:()=>Ie});var h=F(2090),j=F(4859),P=F(9681),oe=F(1877);class le{constructor(we,ge){this._delegate=we,this.firebase=ge,(0,P._addComponent)(we,new j.wA("app-compat",()=>this,"PUBLIC")),this.container=we.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(we){this._delegate.automaticDataCollectionEnabled=we}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(we=>{this._delegate.checkDestroyed(),we()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(we,ge=P._DEFAULT_ENTRY_NAME){var tt;this._delegate.checkDestroyed();const Xe=this._delegate.container.getProvider(we);return!Xe.isInitialized()&&"EXPLICIT"===(null===(tt=Xe.getComponent())||void 0===tt?void 0:tt.instantiationMode)&&Xe.initialize(),Xe.getImmediate({identifier:ge})}_removeServiceInstance(we,ge=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(we).clearInstance(ge)}_addComponent(we){(0,P._addComponent)(this._delegate,we)}_addOrOverwriteComponent(we){(0,P._addOrOverwriteComponent)(this._delegate,we)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function _e(){const st=function fe(st){const we={},ge={__esModule:!0,initializeApp:function Ne(se,he={}){const ve=P.initializeApp(se,he);if((0,h.r3)(we,ve.name))return we[ve.name];const X=new st(ve,ge);return we[ve.name]=X,X},app:Xe,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Ce(se){const he=se.name,ve=he.replace("-compat","");if(P._registerComponent(se)&&"PUBLIC"===se.type){const X=(ee=Xe())=>{if("function"!=typeof ee[ve])throw ue.create("invalid-app-argument",{appName:he});return ee[ve]()};void 0!==se.serviceProps&&(0,h.ZB)(X,se.serviceProps),ge[ve]=X,st.prototype[ve]=function(...ee){return this._getService.bind(this,he).apply(this,se.multipleInstances?ee:[])}}return"PUBLIC"===se.type?ge[ve]:null},removeApp:function tt(se){delete we[se]},useAsService:function We(se,he){return"serverAuth"===he?null:he},modularAPIs:P}};function Xe(se){if(!(0,h.r3)(we,se=se||P._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:se});return we[se]}return ge.default=ge,Object.defineProperty(ge,"apps",{get:function ke(){return Object.keys(we).map(se=>we[se])}}),Xe.App=st,ge}(le);return st.INTERNAL=Object.assign(Object.assign({},st.INTERNAL),{createFirebaseNamespace:_e,extendNamespace:function we(ge){(0,h.ZB)(st,ge)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),st}(),G=new oe.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const st=self.firebase.SDK_VERSION;st&&st.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ie=z;!function Pe(st){(0,P.registerVersion)("@firebase/app-compat","0.1.36",st)}()},9681:(dt,Se,F)=>{F.r(Se),F.d(Se,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>Li,_DEFAULT_ENTRY_NAME:()=>$t,_addComponent:()=>Jt,_addOrOverwriteComponent:()=>en,_apps:()=>un,_clearComponents:()=>bi,_components:()=>wn,_getProvider:()=>Lt,_registerComponent:()=>zt,_removeServiceInstance:()=>_r,deleteApp:()=>Vi,getApp:()=>Un,getApps:()=>mi,initializeApp:()=>Ar,onLog:()=>jn,registerVersion:()=>Kn,setLogLevel:()=>yn});var h=F(5861),j=F(4859),P=F(1877),oe=F(2090),le=F(8766);class ye{constructor(De){this.container=De}getPlatformInfoString(){return this.container.getProviders().map(rt=>{if(function ue(nt){return"VERSION"===nt.getComponent()?.type}(rt)){const bt=rt.getImmediate();return`${bt.library}/${bt.version}`}return null}).filter(rt=>rt).join(" ")}}const fe="@firebase/app",z=new P.Yd("@firebase/app"),$t="[DEFAULT]",Ze={[fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},un=new Map,wn=new Map;function Jt(nt,De){try{nt.container.addComponent(De)}catch(rt){z.debug(`Component ${De.name} failed to register with FirebaseApp ${nt.name}`,rt)}}function en(nt,De){nt.container.addOrOverwriteComponent(De)}function zt(nt){const De=nt.name;if(wn.has(De))return z.debug(`There were multiple attempts to register component ${De}.`),!1;wn.set(De,nt);for(const rt of un.values())Jt(rt,nt);return!0}function Lt(nt,De){const rt=nt.container.getProvider("heartbeat").getImmediate({optional:!0});return rt&&rt.triggerHeartbeat(),nt.container.getProvider(De)}function _r(nt,De,rt=$t){Lt(nt,De).clearInstance(rt)}function bi(){wn.clear()}const kn=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Fi{constructor(De,rt,bt){this._isDeleted=!1,this._options=Object.assign({},De),this._config=Object.assign({},rt),this._name=rt.name,this._automaticDataCollectionEnabled=rt.automaticDataCollectionEnabled,this._container=bt,this.container.addComponent(new j.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this.checkDestroyed(),this._automaticDataCollectionEnabled=De}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(De){this._isDeleted=De}checkDestroyed(){if(this.isDeleted)throw kn.create("app-deleted",{appName:this._name})}}const Li="9.12.0";function Ar(nt,De={}){let rt=nt;"object"!=typeof De&&(De={name:De});const bt=Object.assign({name:$t,automaticDataCollectionEnabled:!1},De),It=bt.name;if("string"!=typeof It||!It)throw kn.create("bad-app-name",{appName:String(It)});if(rt||(rt=(0,oe.aH)()),!rt)throw kn.create("no-options");const Yt=un.get(It);if(Yt){if((0,oe.vZ)(rt,Yt.options)&&(0,oe.vZ)(bt,Yt.config))return Yt;throw kn.create("duplicate-app",{appName:It})}const W=new j.H0(It);for(const Y of wn.values())W.addComponent(Y);const $=new Fi(rt,bt,W);return un.set(It,$),$}function Un(nt=$t){const De=un.get(nt);if(!De&&nt===$t)return Ar();if(!De)throw kn.create("no-app",{appName:nt});return De}function mi(){return Array.from(un.values())}function Vi(nt){return Je.apply(this,arguments)}function Je(){return(Je=(0,h.Z)(function*(nt){const De=nt.name;un.has(De)&&(un.delete(De),yield Promise.all(nt.container.getProviders().map(rt=>rt.delete())),nt.isDeleted=!0)})).apply(this,arguments)}function Kn(nt,De,rt){var bt;let It=null!==(bt=Ze[nt])&&void 0!==bt?bt:nt;rt&&(It+=`-${rt}`);const Yt=It.match(/\s|\//),W=De.match(/\s|\//);if(Yt||W){const $=[`Unable to register library "${It}" with version "${De}":`];return Yt&&$.push(`library name "${It}" contains illegal characters (whitespace or "/")`),Yt&&W&&$.push("and"),W&&$.push(`version name "${De}" contains illegal characters (whitespace or "/")`),void z.warn($.join(" "))}zt(new j.wA(`${It}-version`,()=>({library:It,version:De}),"VERSION"))}function jn(nt,De){if(null!==nt&&"function"!=typeof nt)throw kn.create("invalid-log-argument");(0,P.Am)(nt,De)}function yn(nt){(0,P.Ub)(nt)}const En="firebase-heartbeat-store";let bn=null;function pn(){return bn||(bn=(0,le.X3)("firebase-heartbeat-database",1,{upgrade:(nt,De)=>{0===De&&nt.createObjectStore(En)}}).catch(nt=>{throw kn.create("idb-open",{originalErrorMessage:nt.message})})),bn}function yt(){return(yt=(0,h.Z)(function*(nt){var De;try{return(yield pn()).transaction(En).objectStore(En).get(Yn(nt))}catch(rt){if(rt instanceof oe.ZR)z.warn(rt.message);else{const bt=kn.create("idb-get",{originalErrorMessage:null===(De=rt)||void 0===De?void 0:De.message});z.warn(bt.message)}}})).apply(this,arguments)}function Tt(nt,De){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,h.Z)(function*(nt,De){var rt;try{const It=(yield pn()).transaction(En,"readwrite");return yield It.objectStore(En).put(De,Yn(nt)),It.done}catch(bt){if(bt instanceof oe.ZR)z.warn(bt.message);else{const It=kn.create("idb-set",{originalErrorMessage:null===(rt=bt)||void 0===rt?void 0:rt.message});z.warn(It.message)}}})).apply(this,arguments)}function Yn(nt){return`${nt.name}!${nt.options.appId}`}class xr{constructor(De){this.container=De,this._heartbeatsCache=null;const rt=this.container.getProvider("app").getImmediate();this._storage=new Zt(rt),this._heartbeatsCachePromise=this._storage.read().then(bt=>(this._heartbeatsCache=bt,bt))}triggerHeartbeat(){var De=this;return(0,h.Z)(function*(){const bt=De.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),It=Ft();if(null===De._heartbeatsCache&&(De._heartbeatsCache=yield De._heartbeatsCachePromise),De._heartbeatsCache.lastSentHeartbeatDate!==It&&!De._heartbeatsCache.heartbeats.some(Yt=>Yt.date===It))return De._heartbeatsCache.heartbeats.push({date:It,agent:bt}),De._heartbeatsCache.heartbeats=De._heartbeatsCache.heartbeats.filter(Yt=>{const W=new Date(Yt.date).valueOf();return Date.now()-W<=2592e6}),De._storage.overwrite(De._heartbeatsCache)})()}getHeartbeatsHeader(){var De=this;return(0,h.Z)(function*(){if(null===De._heartbeatsCache&&(yield De._heartbeatsCachePromise),null===De._heartbeatsCache||0===De._heartbeatsCache.heartbeats.length)return"";const rt=Ft(),{heartbeatsToSend:bt,unsentEntries:It}=function Jr(nt,De=1024){const rt=[];let bt=nt.slice();for(const It of nt){const Yt=rt.find(W=>W.agent===It.agent);if(Yt){if(Yt.dates.push(It.date),sr(rt)>De){Yt.dates.pop();break}}else if(rt.push({agent:It.agent,dates:[It.date]}),sr(rt)>De){rt.pop();break}bt=bt.slice(1)}return{heartbeatsToSend:rt,unsentEntries:bt}}(De._heartbeatsCache.heartbeats),Yt=(0,oe.L)(JSON.stringify({version:2,heartbeats:bt}));return De._heartbeatsCache.lastSentHeartbeatDate=rt,It.length>0?(De._heartbeatsCache.heartbeats=It,yield De._storage.overwrite(De._heartbeatsCache)):(De._heartbeatsCache.heartbeats=[],De._storage.overwrite(De._heartbeatsCache)),Yt})()}}function Ft(){return(new Date).toISOString().substring(0,10)}class Zt{constructor(De){this.app=De,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var De=this;return(0,h.Z)(function*(){return(yield De._canUseIndexedDBPromise)&&(yield function mt(nt){return yt.apply(this,arguments)}(De.app))||{heartbeats:[]}})()}overwrite(De){var rt=this;return(0,h.Z)(function*(){var bt;if(yield rt._canUseIndexedDBPromise){const Yt=yield rt.read();return Tt(rt.app,{lastSentHeartbeatDate:null!==(bt=De.lastSentHeartbeatDate)&&void 0!==bt?bt:Yt.lastSentHeartbeatDate,heartbeats:De.heartbeats})}})()}add(De){var rt=this;return(0,h.Z)(function*(){var bt;if(yield rt._canUseIndexedDBPromise){const Yt=yield rt.read();return Tt(rt.app,{lastSentHeartbeatDate:null!==(bt=De.lastSentHeartbeatDate)&&void 0!==bt?bt:Yt.lastSentHeartbeatDate,heartbeats:[...Yt.heartbeats,...De.heartbeats]})}})()}}function sr(nt){return(0,oe.L)(JSON.stringify({version:2,heartbeats:nt})).length}!function Sn(nt){zt(new j.wA("platform-logger",De=>new ye(De),"PRIVATE")),zt(new j.wA("heartbeat",De=>new xr(De),"PRIVATE")),Kn(fe,"0.8.1",nt),Kn(fe,"0.8.1","esm2017"),Kn("fire-js","")}("")},4859:(dt,Se,F)=>{F.d(Se,{H0:()=>fe,wA:()=>P});var h=F(5861),j=F(2090);class P{constructor(z,G,J){this.name=z,this.instanceFactory=G,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const oe="[DEFAULT]";class le{constructor(z,G){this.name=z,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const G=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(G)){const J=new j.BH;if(this.instancesDeferred.set(G,J),this.isInitialized(G)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:G});$e&&J.resolve($e)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(z){var G;const J=this.normalizeInstanceIdentifier(z?.identifier),$e=null!==(G=z?.optional)&&void 0!==G&&G;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Pe){if($e)return null;throw Pe}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function ue(_e){return"EAGER"===_e.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[G,J]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(G);try{const Pe=this.getOrInitializeService({instanceIdentifier:$e});J.resolve(Pe)}catch{}}}}clearInstance(z=oe){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,h.Z)(function*(){const G=Array.from(z.instances.values());yield Promise.all([...G.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...G.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=oe){return this.instances.has(z)}getOptions(z=oe){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:G={}}=z,J=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:J,options:G});for(const[Pe,Ie]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Pe)&&Ie.resolve($e);return $e}onInit(z,G){var J;const $e=this.normalizeInstanceIdentifier(G),Pe=null!==(J=this.onInitCallbacks.get($e))&&void 0!==J?J:new Set;Pe.add(z),this.onInitCallbacks.set($e,Pe);const Ie=this.instances.get($e);return Ie&&z(Ie,$e),()=>{Pe.delete(z)}}invokeOnInitCallbacks(z,G){const J=this.onInitCallbacks.get(G);if(J)for(const $e of J)try{$e(z,G)}catch{}}getOrInitializeService({instanceIdentifier:z,options:G={}}){let J=this.instances.get(z);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(_e=z,_e===oe?void 0:_e),options:G}),this.instances.set(z,J),this.instancesOptions.set(z,G),this.invokeOnInitCallbacks(J,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,J)}catch{}var _e;return J||null}normalizeInstanceIdentifier(z=oe){return this.component?this.component.multipleInstances?z:oe:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const G=this.getProvider(z.name);if(G.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);G.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const G=new le(z,this);return this.providers.set(z,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(dt,Se,F)=>{F.d(Se,{Am:()=>_e,Ub:()=>fe,Yd:()=>ue,in:()=>j});const h=[];var j=(()=>{return(z=j||(j={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",j;var z})();const P={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},oe=j.INFO,le={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},ye=(z,G,...J)=>{if(G<z.logLevel)return;const $e=(new Date).toISOString(),Pe=le[G];if(!Pe)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Pe](`[${$e}]  ${z.name}:`,...J)};class ue{constructor(G){this.name=G,this._logLevel=oe,this._logHandler=ye,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in j))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?P[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...G),this._logHandler(this,j.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...G),this._logHandler(this,j.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,j.INFO,...G),this._logHandler(this,j.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,j.WARN,...G),this._logHandler(this,j.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...G),this._logHandler(this,j.ERROR,...G)}}function fe(z){h.forEach(G=>{G.setLogLevel(z)})}function _e(z,G){for(const J of h){let $e=null;G&&G.level&&($e=P[G.level]),J.userLogHandler=null===z?null:(Pe,Ie,...st)=>{const we=st.map(ge=>{if(null==ge)return null;if("string"==typeof ge)return ge;if("number"==typeof ge||"boolean"==typeof ge)return ge.toString();if(ge instanceof Error)return ge.message;try{return JSON.stringify(ge)}catch{return null}}).filter(ge=>ge).join(" ");Ie>=($e??Pe.logLevel)&&z({level:j[Ie].toLowerCase(),message:we,args:st,type:Pe.name})}}}},8766:(dt,Se,F)=>{F.d(Se,{Lj:()=>Ne,X3:()=>Xe});var h=F(5861);let P,oe;const ue=new WeakMap,fe=new WeakMap,_e=new WeakMap,z=new WeakMap,G=new WeakMap;let Pe={get(he,ve,X){if(he instanceof IDBTransaction){if("done"===ve)return fe.get(he);if("objectStoreNames"===ve)return he.objectStoreNames||_e.get(he);if("store"===ve)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return ge(he[ve])},set:(he,ve,X)=>(he[ve]=X,!0),has:(he,ve)=>he instanceof IDBTransaction&&("done"===ve||"store"===ve)||ve in he};function we(he){return"function"==typeof he?function st(he){return he!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(he)?function(...ve){return he.apply(tt(this),ve),ge(ue.get(this))}:function(...ve){return ge(he.apply(tt(this),ve))}:function(ve,...X){const ee=he.call(tt(this),ve,...X);return _e.set(ee,ve.sort?ve.sort():[ve]),ge(ee)}}(he):(he instanceof IDBTransaction&&function $e(he){if(fe.has(he))return;const ve=new Promise((X,ee)=>{const pe=()=>{he.removeEventListener("complete",ae),he.removeEventListener("error",Be),he.removeEventListener("abort",Be)},ae=()=>{X(),pe()},Be=()=>{ee(he.error||new DOMException("AbortError","AbortError")),pe()};he.addEventListener("complete",ae),he.addEventListener("error",Be),he.addEventListener("abort",Be)});fe.set(he,ve)}(he),((he,ve)=>ve.some(X=>he instanceof X))(he,function le(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(he,Pe):he)}function ge(he){if(he instanceof IDBRequest)return function J(he){const ve=new Promise((X,ee)=>{const pe=()=>{he.removeEventListener("success",ae),he.removeEventListener("error",Be)},ae=()=>{X(ge(he.result)),pe()},Be=()=>{ee(he.error),pe()};he.addEventListener("success",ae),he.addEventListener("error",Be)});return ve.then(X=>{X instanceof IDBCursor&&ue.set(X,he)}).catch(()=>{}),G.set(ve,he),ve}(he);if(z.has(he))return z.get(he);const ve=we(he);return ve!==he&&(z.set(he,ve),G.set(ve,he)),ve}const tt=he=>G.get(he);function Xe(he,ve,{blocked:X,upgrade:ee,blocking:pe,terminated:ae}={}){const Be=indexedDB.open(he,ve),je=ge(Be);return ee&&Be.addEventListener("upgradeneeded",vt=>{ee(ge(Be.result),vt.oldVersion,vt.newVersion,ge(Be.transaction))}),X&&Be.addEventListener("blocked",()=>X()),je.then(vt=>{ae&&vt.addEventListener("close",()=>ae()),pe&&vt.addEventListener("versionchange",()=>pe())}).catch(()=>{}),je}function Ne(he,{blocked:ve}={}){const X=indexedDB.deleteDatabase(he);return ve&&X.addEventListener("blocked",()=>ve()),ge(X).then(()=>{})}const ke=["get","getKey","getAll","getAllKeys","count"],Ce=["put","add","delete","clear"],We=new Map;function se(he,ve){if(!(he instanceof IDBDatabase)||ve in he||"string"!=typeof ve)return;if(We.get(ve))return We.get(ve);const X=ve.replace(/FromIndex$/,""),ee=ve!==X,pe=Ce.includes(X);if(!(X in(ee?IDBIndex:IDBObjectStore).prototype)||!pe&&!ke.includes(X))return;const ae=function(){var Be=(0,h.Z)(function*(je,...vt){const tn=this.transaction(je,pe?"readwrite":"readonly");let $t=tn.store;return ee&&($t=$t.index(vt.shift())),(yield Promise.all([$t[X](...vt),pe&&tn.done]))[0]});return function(vt){return Be.apply(this,arguments)}}();return We.set(ve,ae),ae}!function Ie(he){Pe=he(Pe)}(he=>({...he,get:(ve,X,ee)=>se(ve,X)||he.get(ve,X,ee),has:(ve,X)=>!!se(ve,X)||he.has(ve,X)}))},5861:(dt,Se,F)=>{function h(P,oe,le,ye,ue,fe,_e){try{var z=P[fe](_e),G=z.value}catch(J){return void le(J)}z.done?oe(G):Promise.resolve(G).then(ye,ue)}function j(P){return function(){var oe=this,le=arguments;return new Promise(function(ye,ue){var fe=P.apply(oe,le);function _e(G){h(fe,ye,ue,_e,z,"next",G)}function z(G){h(fe,ye,ue,_e,z,"throw",G)}_e(void 0)})}}F.d(Se,{Z:()=>j})}},dt=>{dt(dt.s=9095)}]);